define(["modules-bundle"],function(Modules){

 function headerDropdownsHandlers(){var e;Modules.$doc.on("click","body, .js-ctgry-btn, .js-drpdwn-menu-wrpr",function(t){var r,s,o;if(t.stopPropagation(),!$(".drpdwn-menu-wrpr--show").length&&$(this).hasClass("js-ctgry-btn")){if($(".js-drpdwn-menu-wrpr").addClass("drpdwn-menu-wrpr--show"),$(".js-drpdwn-menu-ovrly").addClass("drpdwn-menu-ovrly--show"),Modules.$win.height()<$(".drpdwn-menu").height()+$(".js-drpdwn-menu-wrpr").offset().top&&$(".js-drpdwn-menu-wrpr").addClass("drpdwn-menu-wrpr--s"),"done"==$(".drpdwn-menu").data("processed")&&"#forcepopup"!==location.hash)return void(e=setTimeout(function(){$(".drpdwn-menu").addClass("drpdwn-menu--show")},340));localStorage&&"#forcepopup"!==location.hash&&(s=parseInt(localStorage.browsePopupDataTime,10),((new Date).getTime()-s)/864e5<30&&localStorage.browsePopupDataVer==$(".js-drpdwn-menu-wrpr").data("ver")&&(r=localStorage.browsePopupData)),r&&"undefined"!=r&&void 0!==r||(o=setTimeout(function(){$(".js-drpdwn-menu-wrpr").find(".drpdwn-menu-wrpr__ldng").show()},600),r=getBrowsePopupData(),localStorage.browsePopupData=r,localStorage.browsePopupDataTime=(new Date).getTime(),localStorage.browsePopupDataVer=$(".js-drpdwn-menu-wrpr").data("ver")),r&&"undefined"!=r&&void 0!==r&&($(".drpdwn-menu").html(r).data("processed","done"),e=setTimeout(function(){$(".js-drpdwn-menu-wrpr").find(".drpdwn-menu-wrpr__ldng").hide(),clearTimeout(o),$(".drpdwn-menu").addClass("drpdwn-menu--show")},340))}else $(this).hasClass("js-drpdwn-menu-wrpr")||(clearTimeout(e),$(".js-drpdwn-menu-wrpr").removeClass("drpdwn-menu-wrpr--show"),$(".drpdwn-menu").removeClass("drpdwn-menu--show"),$(".js-drpdwn-menu-ovrly").removeClass("drpdwn-menu-ovrly--show"),$(".js-drpdwn-menu-wrpr").find(".drpdwn-menu-wrpr__ldng").hide())})}function hideDropdownContent(){$(".dropdown .dropdown-content").addClass("hide")}function toggleDropdownContent(){return $(".dropdown .dropdown-content").toggleClass("hide"),!1}!function(){var e=function(e){return['<div id="'+e+'" style="height:600px; width:120px;">','<script> googletag.cmd.push(function() { googletag.display("'+e+'"); }); <\/script>',"</div>"].join("")},t=window.innerWidth-1e3,r=500+Math.max(10,Math.min(40,(t/2-120)/2));if(!Modules.Cookie.get("hideSidebarAds")){var s=$(".ad-sdbr--left"),o=$(".ad-sdbr--rght");s.append(e(s.data("id"))),o.append(e(o.data("id"))),s.css("margin-right",r+"px"),o.css("margin-left",r+"px"),$(".ad-sdbr__cls").on("click",function(){setCookie("hideSidebarAds",1,1),$(".ad-sdbr").remove()})}}(),Modules.$doc.ready(function(){$(".js-shr-dl").on("click",function(){$(".prdct-dtl__tlbr-shr-tltp").toggleClass("hide")})}),$(".cptr-eml-card__btn").click(function(){if(!$(this).hasClass("btn--red"))return!1;var e,t=$(this).closest(".cptr-eml-card__frm"),r=t.find(".cptr-eml-card__inpt").val();if(!/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(r))return alert("Please enter a valid Email ID."),!1;e=$(".algn-wrpr__dls").length||$(".prdct-dtl--deal").length?"/deals/save_email.php":"http://www.mysmartprice.com/fashion/promotion/capture_email";var s=window.location.href;return $.ajax({url:e,type:"POST",data:{email:r,page_url:s,type:"sidebar"}}).done(function(e){t.find(".cptr-eml-card__inpt-wrpr").hide(),t.find(".cptr-eml-card__msg").hide(),t.find(".cptr-eml-card__alt-msg.sccss-msg").show(),t.find(".btn--red").html("Subscribed"),t.find(".btn--red").removeClass("btn--red"),t.parents().hasClass("prdct-dtl__deal-sbscrb")&&(t.html(""),$(".prdct-dtl__deal-sbscrb__lbl").html("Email Subscribed Successfully!"))}).fail(function(e){t.find(".cptr-eml-card__inpt-wrpr").hide(),t.find(".cptr-eml-card__msg").hide(),t.find(".cptr-eml-card__alt-msg.err-msg").show(),t.find(".btn--red").html("Not Subscribed"),t.find(".btn--red").removeClass("btn--red")}),!1}),headerDropdownsHandlers(),Modules.$doc.on("click",hideDropdownContent).on("click",".dropdown .btn-dropdown",toggleDropdownContent),function(){var e=$(".js-ftr-eml-inpt"),t=$(".ftr__lylty__eml-wrpr-sbmt");function r(e){var t=e.val();Modules.Validator.email(t)?(Modules.Cookie.get("partial_login")||(popupDataObj={type:"signup"}),setCookie("msp_login_email",t),openPopup("/users/login.html")):alert("Please enter a valid email address")}if(e.length){var s=Modules.Cookie.get("msp_login_email");if(Modules.Cookie.get("msp_login")){var o=$(".js-lylty-info-hdr"),a=$(".js-lylty-info-stps"),n=$(".js-ftr-eml-wrpr"),i=$(".js-ftr-stats-wrpr");o.html("Congratulations! You're already a Cashback Program member."),a.html(["Shop &rarr; Earn Cashback &rarr; Transfer to your Bank A/c ",'<span class="ftr__lylty__txt-link js-open-link" data-open-link="/cashback/more-details/?ref=desktop_footer">Know more.</span>'].join("")),n.hide(),i.replaceWith(['<div data-href="/users/login.html" class=" bttn bttn--scndry ftr__lylty__view-cshbk js-lylty-login js-open-link" data-open-link="/loyalty/">',"View your cashback","</div>"].join(""))}else s&&e.val(s),e.on("keyup",function(t){return 13===t.keyCode&&r(e),!1}),t.on("click",function(){return r(e),!1})}}(),Modules.$doc.keyup(function(e){27==e.keyCode&&(0!==$(".browse-popup-cont.show, .drpdwn-menu-ovrly--show").length&&$(".browse-menu-btn .js-ctgry-btn").click(),0!==$(".popup-overlay").length&&$(".popup-overlay").click(),$(".pop-up__cls-btn")[0]&&($link=$(".pop-up__cls-btn > a"),$link[0]&&window.open($link.attr("href"),"_blank"),$link.trigger(closePopup_RUI())))}),Modules.$doc.keydown(function(e){if(e.altKey)switch(String.fromCharCode(e.keyCode).toLowerCase()){case"c":$(".browse-menu-btn, .js-ctgry-btn").click();break;case"s":$(".srch-wdgt__fld").focus()}}),Modules.$doc.ready(function(){Modules.$doc.on("click",".browse-menu-btn, .browse-popup-cont",function(e){var t,r,s=$(".browse-menu-btn").offset().left;if($(".browse-popup").css("left",s).toggleClass("show"),$(".browse-popup-cont").toggleClass("show"),0!==$(".browse-popup.show").length){if("done"==$(".browse-popup-data").data("processed")&&"#forcepopup"!==location.hash)return void setTimeout(function(){$(".browse-popup").find(".loading-circle").hide(),$(".browse-popup-data").addClass("show")},340);var o;if(localStorage&&"#forcepopup"!==location.hash){var a=parseInt(localStorage.browsePopupDataTime,10);((new Date).getTime()-a)/864e5<30&&localStorage.browsePopupDataVer==$(".browse-popup-data").data("ver")&&(o=localStorage.browsePopupData)}o&&"undefined"!=o&&void 0!==o||($(".browse-popup").find(".loading-circle").show(),t="/old_browse-menu.htm",$.ajax({url:t,async:!1}).done(function(e){r=e}),o=r,localStorage.browsePopupData=o,localStorage.browsePopupDataTime=(new Date).getTime(),localStorage.browsePopupDataVer=$(".browse-popup-data").data("ver")),o&&"undefined"!=o&&void 0!==o&&($(".browse-popup-data").html(o).data("processed","done"),setTimeout(function(){$(".browse-popup").find(".loading-circle").hide(),$(".browse-popup-data").addClass("show")},340))}else $(".browse-popup-data").removeClass("show")}),Modules.$doc.on("click",".browse-popup",function(e){e.stopPropagation()})}),Modules.$doc.on("click",".js-lylty-hdr",function(){var e=Modules.Cookie.get("partial_login")?"Partial-Login-Click":"Loyalty-Header-Click";window.ga&&ga("send","event","Loyalty",e,Modules.Cookie.get("msp_uid")||"")});var url=new Modules.Url;!function(){var e=$(".usr-inputbox__optns-link--dlmtr");if(e.length&&url.getAQueryParam("destUrl")){var t=url.getAQueryParam("destUrl");t=url.getAQueryParam("utm_source")?t+"&utm_source="+url.getAQueryParam("utm_source"):t;var r=e.attr("href");e.attr("href",r+"?destUrl="+encodeURIComponent(t))}else;}();var loginCallbackQueue=[],MSP={};function loginCallback(e,t,r){"1"==Modules.Cookie.get("msp_login")?e.apply(t,r):(loginCallbackQueue.push(function(){e.apply(t,r)}),$(".js-lgn").eq(0).click())}function isUserPasswordExist(e){var t=$.Deferred();return $.ajax({url:"/users/login_common.php",type:"POST",dataType:"JSON",data:{email:encodeURIComponent(e),process:"query_password",login_type:"isUserPasswordExist"}}).done(function(e){t.resolve(e)}),t.promise()}var extnsnWlcmPage={};function windowLogin(e,t){var r="https://www.mysmartprice.com/users/";"signup"==e?r="https://www.mysmartprice.com/users/signup.php":"login"==e&&(r="https://www.mysmartprice.com/users/login.php"),newWindow=window.open(r+t),window.addEventListener("message",receiveMessage,!1)}function receiveMessage(e){"https://www.mysmartprice.com"==e.origin&&"update_ui"==e.data&&postLogin()}function postLogin(){newWindow.close(),update_ui()}function update_ui(){var e=Modules.Cookie.get("partial_login"),t=Modules.Cookie.get("msp_login"),r=Modules.Cookie.get("new_user"),s=Modules.Cookie.get("msp_user_image"),o=Modules.Cookie.get("msp_login_name")||"",a=Modules.Cookie.get("msp_login_email")||"",n=['<div class="user-link">','<div class="drpdwn-wdgt__item user-link__rwrds js-open-link" data-open-link="/loyalty">','<span class="user-link__icon-rwrds"></span> My Cashback</div>','<div class="drpdwn-wdgt__item user-link__rfr js-open-link" data-open-link="/promotions/refer/?ref=header_nav">','<span class="user-link__icon-rfr"></span> Refer &amp; Earn</div>',"</div>"].join(""),i=['<div class="user-link js-prtl-lgn">','<div class="drpdwn-wdgt__item user-link__rwrds js-open-link" data-need-login="true" data-open-link="/loyalty">','<span class="user-link__icon-rwrds"></span> My Cashback</div>','<div class="drpdwn-wdgt__item user-link__rfr js-open-link" data-need-login="true" data-open-link="/promotions/refer/?ref=header_nav">','<span class="user-link__icon-rfr"></span> Refer &amp; Earn</div>',"</div>"].join("");$(".js-trck-sign-up").show(),$(".cshbck-str__top").show(),$(".cshbck-str__top-sign").removeClass("hide"),(e||t)&&($(".cshbck-str__top-sign").addClass("hide"),Modules.Cookie.get("msp_loyalty_points")||$.ajax({url:"/users/get_msp_coins.php",async:!1,type:"POST",data:encodeURIComponent(a)}).done(function(e){(e=JSON.parse(e))&&(e.coins&&setCookie("msp_loyalty_points",e.coins,1),e.may_4th&&setCookie("may_4th","712",30))}),$(".js-trck-sign-up").hide(),$(".cshbck-str__top").hide());var l="",d="",p=$.trim(Modules.Cookie.get("msp_loyalty_points")).replace(/\D/g,"")||0;("1"==t||e)&&Modules.Cookie.get("hideLoyaltyOnBoarded")?(l='&#8377;<span class="js-lylty-pnts">'+p+"</span>",d="in your account"):(l="Upto 12%<br>Cashback",d="on every purchase");var c=['<div class="hdr__user" style="display: block">','<div class="hdr__call-out'+(Modules.Cookie.get("hideLoyaltyOnBoarded")?" hdr__call-out--lgd-in":"")+' js-lylty-hdr js-open-link" data-need-login="true" data-open-link="/loyalty/">','<div class="hdr__call-out-ttl">'+l+"</div>",'<div class="hdr__call-out-sbttl">'+d+"</div>","</div>","</div>"].join(""),u=['<div class="hdr__user" style="display: block">','<div class="hdr__user-lgn btn btn--s btn--no-bg js-lgn" data-page="login">Login</div>','<div class="hdr__user-sign-up btn btn--s js-lgn" data-page="signup">Sign Up</div>','<div class="hdr__call-out js-lylty-hdr js-open-link" data-open-link="/cashback/more-details/?utm_source=Loyalty-Header">','<div class="hdr__call-out-ttl">'+l+"</div>",'<div class="hdr__call-out-sbttl">'+d+"</div>","</div>","</div>"].join("");if("1"==t){for(;loginCallbackQueue.length;)loginCallbackQueue.shift()();setCookie("partial_login","",-1),$(".sdbr-login").length&&sdbrWlcmPage.showCnfrmtn(),$(".demo-login").length&&extnsnWlcmPage.changeMessage(),$(".pnts-intro")[0]&&$(".js-grid__text--sign-up").removeClass("js-lgn js-popup-trgt").attr("href","/loyalty/#tabOpen=redemption").removeAttr("data-href").text("View all >>"),$(".hdr__user").length&&$(".hdr__user").replaceWith(c),$(".drpdwn-wdgt").length&&$(".drpdwn-wdgt").addClass("loggedIn").removeClass("loggedOut"),$(".user-dtls").length&&$(".user-dtls").html().indexOf("user-link")<0&&$(".user-nm-wrpr").after(n),$(".user-nm").length&&$(".user-nm").text("Hi"+(o?", "+o:"")+"!"),$(".user-email").length&&$(".user-email").text(a),$(".user-img").length&&$(".user-img").addClass("user-img--loggedin"),s&&$(".user-img").length&&$(".user-img").css("background-image","url("+s+")"),$(".js-ftr-eml-wrpr").hide()}else e?("true"==r&&isUserPasswordExist(a).done(function(e){"password_set"==e.auth.result.msg&&setCookie("new_user","",-1)}),$(".hdr__user").length&&$(".hdr__user").replaceWith(c),$(".drpdwn-wdgt").length&&$(".drpdwn-wdgt").addClass("loggedIn").removeClass("loggedOut"),$(".js-prtl-lgn")[0]&&$(".js-prtl-lgn").remove(),$(".user-nm-wrpr").length&&$(".user-nm-wrpr").after(i).attr("data-need-login","true"),$(".user-nm").length&&$(".user-nm").text("Hi"+(o?", "+o:"")+"!").attr("data-need-login","true"),$(".user-email").length&&$(".user-email").text(a).attr("data-need-login","true"),$(".js-ftr-eml-wrpr").show()):($(".sdbr-login").length&&sdbrWlcmPage.hideCnfrmtn(),$(".demo-login").length&&extnsnWlcmPage.changeMessage(),$(".hdr__user").length&&$(".hdr__user").replaceWith(u),$(".drpdwn-wdgt").length&&$(".drpdwn-wdgt").removeClass("loggedIn"),$(".user-link").length&&$(".user-link").remove(),$(".user-img").length&&$(".user-img").css("background-image","").removeClass("user-img--loggedin"),$(".js-ftr-eml-wrpr").show());setTimeout(function(){$(".hdr__call-out").not(".hdr__call-out--lgd-in").addClass("slide-left")},2e3)}function loginme(e){get_uid();var t=Modules.Cookie.get("msp_loyalty");setCookie("msp_login","1",365),t||setCookie("msp_loyalty","1",365);Modules.Cookie.get("msp_login");"facebook"!=e.auth.login_type&&"gplus"!=e.auth.login_type&&"resetpass"!=e.auth.login_type&&(setCookie("msp_login_uid",e.auth.result.user_id,365),setCookie("msp_login_name",e.auth.result.user_name,365)),setCookie("msp_login_email",e.auth.result.email_id,365),e.loyalty&&(setCookie("msp_loyalty_points",e.loyalty.result.msp_coins,1),setCookie("hideLoyaltyOnBoarded",e.loyalty.result.onboarded,365)),update_ui(),"refer"===$(".body-wrpr").data("page-type")&&(window.ga&&ga("send","event","Refer","ReferralLoginAction"),setCookie("referralLoginReload",1),window.location.reload()),"loyalty"===dataLayer[0].pagetype?(e.loyalty.result.nonmsp_bonus_credited&&setCookieMins("nonmsp_bonus_credited",e.loyalty.result.nonmsp_bonus_credited,20),location.reload()):"signup"!==e.auth.login_type&&"signup_loyalty"!==e.auth.login_type&&"resetpass"!==e.auth.login_type&&"facebook"!==e.auth.login_type&&"gplus"!==e.auth.login_type||t||(e.loyalty.nonmsp_bonus_credited&&setCookieMins("nonmsp_bonus_credited",e.loyalty.result.nonmsp_bonus_credited,20),Modules.Cookie.get("cb_instant")?window.location.href="/loyalty":Modules.Cookie.get("u99rs1deal")?(window.location.href="/loyalty",deleteCookie("u99rs1deal")):Modules.Cookie.get("chrome_extension_welcome")||url.getAQueryParam("destUrl")||(window.location.href="/loyalty/#tabOpen=how_it_works")),"login"===e.auth.login_type&&Modules.Cookie.get("cb_instant")&&(window.location.href="/loyalty")}$(".demo-login").length&&(extnsnWlcmPage={changeMessage:function(){var e=Modules.Cookie.get("pluginInstallSource"),t="";Modules.Cookie.get("msp_login")?(t="Get Cashback on Every Purchase via MySmartPrice <a class='demo__knw-more' href='http://www.mysmartprice.com/loyalty/?ref=welcome#tabOpen=how_it_works'>Know More</a>",$(".demo-login .demo-signup__form").hide(),!e||"deal-comparables"!==e&&"pluginCashback"!==e||(t="Complete Purchase via MySmartPrice and Get Cashback")):(t="Signup and Get Rs.25<span class='demo-login__hdr-offr'>Cashback</span>",$(".demo-login .demo-signup__form").show(),!e||"deal-comparables"!==e&&"pluginCashback"!==e||(t="Signup to Get Cashback")),$(".demo-login .demo-login__hdr-cntnt").html(t)},signupFormValidator:function(){var e=$("#demo-signup__email"),t=$("#demo-signup__password"),r=$(".demo-login div.error");return MSP.utils.validate.form([{type:"email",inputField:e,errorNode:r,errorMsg:"Please enter a valid email"},{type:"required",inputField:t,errorNode:r,options:{min:6},errorMsg:"Password must be atleast 6 characters long"}]).done(function(){captureEmail(e.val());var s=url.getAQueryParam("utm_source")?url.getAQueryParam("utm_source"):utmsource;($(".js-chrm-wlcm").length||$(".wlcm-hdr").length)&&(s="chrome welcome"),$.ajax({type:"POST",url:"/users/login_common.php",dataType:"JSON",async:!1,data:{process:"signup",email:encodeURIComponent(e.val()),password:t.val(),subscribed_status:"subscribed",source:"desktop",login_type:"signup",number:"",utm_source:s}}).done(function(e){return"error"==e||"error"==e.auth.result.msg?(r.html("There is some error in signup. Please try after sometime"),Modules.Cookie.get("u99rs1deal")&&alert("Unable to login. Please check credentials")):"true"==e.auth.result.msg?(setCookie("chrome_extension_welcome","1",1),loginme(e),closePopup()):(r.html(e.auth.result.msg+". <a class='js-popup-trgt demo-login__link' data-href='/users/login.html'>Click here to login</a>"),r.show()),!1})}),!1},eventHandlers:function(){$(".demo-signup__email").change(function(){$(".demo-signup__email").blur(function(){$this=$(this),Modules.Validator.email($this.val())?($this.removeClass("hghlght-err-fld"),!$(".demo-signup__form .hghlght-err-fld").length&&$(".demo-signup__form div.error").text("")):($this.addClass("hghlght-err-fld"),$(".demo-signup__form div.error").text("Please enter a valid email"))})}),$(".demo-signup__password").on("change",function(){$(".demo-signup__password").on("blur",function(){$this=$(this),Modules.Validator.required($this.val())?($this.removeClass("hghlght-err-fld"),!$(".demo-signup__form .hghlght-err-fld").length&&$(".demo-signup__form div.error").text("")):($this.addClass("hghlght-err-fld"),$(".demo-signup__form div.error").text("Please enter a password"))})}),$(".demo-signup__submit").click(function(e){e.preventDefault(),extnsnWlcmPage.signupFormValidator()})},init:function(){this.eventHandlers()}}),Modules.$doc.on("click",".js-lgn",function(){var e="?destUrl="+encodeURIComponent(window.location.href);(window.screenTop||window.screenY)&&(e+="&close=1"),windowLogin($(this).data("page"),e)}),Modules.$doc.on("mouseenter",".drpdwn-wdgt",function(){$(this).hasClass("loggedIn")||$(".drpdwn-wdgt").addClass("loggedOut")});var FBloggedIn=!1;function loginme_by_fb(e,t,r){FBloggedIn=!0,setCookie("msp_login_name",r,365),setCookie("msp_user_image",t,365),loginme(e)}function logoutme(){setCookie("msp_login","",-1),setCookie("partial_login","",-1),setCookie("new_user","",-1),setCookie("msp_login_name","",-1),setCookie("msp_user_image","",-1),setCookie("msp_loyalty_points","",-1),setCookie("msp_tier","",-1),setCookie("hideSupportPopup_loyalty","",-1),setCookie("hideLoyaltyOnBoarded","",-1),FBloggedIn=!1,"loyalty"===dataLayer[0].pagetype?window.location.href="/":$(".pnts-intro")[0]&&location.reload(),update_ui()}if(Modules.$doc.on("click",".js-lylty-signup, .js-trck-sign-up",function(){$(this).hasClass("js-trck-sign-up-cb")&&window.ga&&ga("send","event","Loyalty","click","PDP-signup","cashback"),setCookieMins("signup-utm",$(this).data("utmsource")||"",2)}),$(document).on("focus","input.prefill-email",function(){var e=$(this);e.val()||"1"!=Modules.Cookie.get("msp_login")||e.val(Modules.Cookie.get("msp_login_email"))}),!window.userFormValidations)var userFormValidations={};function logLoginPageEvents(e,t){window.ga&&ga("send","event","DesktopLoginPage",e,t)}userFormValidations=function(){var e={shakeBtn:function(e){var t=2,r=5,s=200;$this=e;for(var o=1;o<=t;o++)$this.animate({left:-1*r},s/t/4).animate({left:r},s/t/2).animate({left:0},s/t/4)},showFieldValidation:function(e,t,r){t?e.hasClass("hghlght-err-fld")&&e.removeClass("hghlght-err-fld").siblings(".usr-inputbox__error").add(".lgn__err").slideUp():(e.hasClass("hghlght-err-fld")||e.addClass("hghlght-err-fld").siblings(".js-vldtn-err").add(".lgn__err").slideDown(),$(".lgn__err").length&&$(".lgn__err").html(r).slideDown(),void 0!==r&&e.siblings(".usr-inputbox__error").text(r))},hasErrFields:function(t){var r=t.find(".hghlght-err-fld");return!!r.length&&(e.shakeBtn(t.find("input[type='submit']")),r[0].focus(),!0)},redirectLoggedUser:function(){var e=Modules.Cookie.get("previousUrl");deleteCookie("previousUrl"),"1"==url.getAQueryParam("close")&&window.opener&&window.opener.postMessage("update_ui","*"),window.location=url.getAQueryParam("destUrl")||e||"/"}};return{loginformValidator:function(t){var r,s,o,a=$("#inputbox__login-form");if(e.hasErrFields(a))return t.preventDefault(),!1;r=$("#login-form__email"),s=$("#login-form__pwd"),o=[{type:"email",inputField:r,errorNode:r.siblings(".js-vldtn-err").add(".lgn__err"),errorMsg:"Please enter a valid email address"},{type:"required",inputField:s,errorNode:s.siblings(".js-vldtn-err").add(".lgn__err"),errorMsg:"Please enter a valid password"}],MSP.utils.validate.form(o).done(function(){var e=r.val(),o=s.val();$(".pop-up__cntnr .ldr__ovrly").show(),$.ajax({type:"POST",url:"/users/login_common.php",dataType:"json",data:{process:"login",email:encodeURIComponent(e),password:o,source:"desktop",login_type:"login"},async:!1}).done(function(e){if("error"===e||"Incorrect password"===e.auth.result.msg)return t.preventDefault(),$(".pop-up__cntnr").length?($(".usr-inputbox"),(r=$("div.usr-inputbox__error")).length&&r.remove(),$(".pop-up__cntnr").not(".hide").find(".usr-inputbox__inr").prepend("<div class='usr-inputbox__error usr-inputbox__error--in-popup'>The email and password you entered did not match our records. Please double-check and try again.</div>").slideDown("slow")):((s=$(".lgn__err")).text("Email and password did not match.").slideDown(),logLoginPageEvents("login-error","Email and password did not match.")),$("body").animate({scrollTop:0},500),!1;if("No account exists with this email_id"===e.auth.result.msg){if(t.preventDefault(),$(".pop-up__cntnr").length){var r;$(".usr-inputbox"),(r=$("div.usr-inputbox__error")).length&&r.remove(),$(".pop-up__cntnr").not(".hide").find(".usr-inputbox__inr").prepend("<div class='usr-inputbox__error usr-inputbox__error--in-popup'>There is no account with your email id. Please signup and try again. </div>").slideDown("slow")}else{var s=$(".lgn__err"),o="signup.php"+location.search;s.html("Not Registered. Please <a href='"+o+"'>Sign up</a>.").slideDown(),logLoginPageEvents("login-error","Not Registered.")}return $("body").animate({scrollTop:0},500),!1}if($(".pop-up__cntnr").length&&$(".usr-inputbox__error").slideUp("slow"),$(".lgn__err").length&&$(".lgn__err").slideUp("slow"),loginme(e),$(".pop-up__cntnr").length)return closePopup_RUI(),t.preventDefault(),!1;logLoginPageEvents("login-success","MSP Login.");var a=url.getAQueryParam("destUrl")||Modules.Cookie.get("previousUrl")||"/";return a=url.getAQueryParam("destUrl")&&url.getAQueryParam("utm_source")&&"bonusapp"!=url.getAQueryParam("utm_source")?a+"?utm_source="+url.getAQueryParam("utm_source"):a,window.location.href=a,deleteCookie("previousUrl"),!1})}).fail(function(){return t.preventDefault(),$(".pop-up__cntnr").length||logLoginPageEvents("validation-error","Invalid email/password format."),!1}).always(function(){$(".pop-up__cntnr .ldr__ovrly").hide()})},signupformValidator:function(t){var r,s,o,a=$("#inputbox__signup-form");if(e.hasErrFields(a))return t.preventDefault(),!1;r=$("#signup-form__email"),s=$("#signup-form__pwd"),o=[{type:"email",inputField:r,errorNode:r.siblings(".js-vldtn-err").add(".lgn__err"),errorMsg:"Please enter a valid email address"},{type:"required",inputField:s,errorNode:s.siblings(".js-vldtn-err").add(".lgn__err"),errorMsg:"Please enter a valid password"}],$(".pop-up__cntnr .ldr__ovrly").show(),MSP.utils.validate.form(o).done(function(){var e=r.val(),a=$("#signup-form__name").val(),n=s.val(),i=Modules.Cookie.get("signup-utm")||(window.qS&&url.getAQueryParam("fromEducationPopup")?"education_popup":url.getAQueryParam("utm_source")||url.getAQueryParam("ref")),l="chrome_extension_notif_nontrans_loyal"==url.getAQueryParam("utm_source")?url.getAQueryParam("signup_token"):"";$.ajax({type:"POST",url:"/users/login_common.php",dataType:"json",async:!1,data:{process:"signup",email:encodeURIComponent(e),password:n,subscribed_status:"subscribed",name:a,utm_source:i,source:"desktop",login_type:"signup",signup_token:l},async:!1}).done(function(e){if("string"!=typeof e&&"Account already exists with this email_id"===e.auth.result.msg){if(t.preventDefault(),$(".pop-up__cntnr").length)$(".usr-inputbox"),(a=$("div.usr-inputbox__error")).length&&a.remove(),$(".pop-up__cntnr").not(".hide").find(".usr-inputbox__inr").prepend("<div class='usr-inputbox__error usr-inputbox__error--in-popup'>This email address is already registered.</div>").slideDown("slow");else{var r=$(".lgn__err"),s="login.php"+location.search;r.html("Already Registered. <a href='"+s+'\'>Login</a> or <span class="text-link js-popup-trgt" data-href="fp.htm">Reset Your Password</span>.').slideDown(),logLoginPageEvents("signup-error","Already Registered.")}return Modules.Cookie.get("u99rs1deal")&&alert("Unable to login. Please check credentials"),$("body").animate({scrollTop:0},500),!1}var a;if("error"===e)return t.preventDefault(),$(".pop-up__cntnr").length?($(".usr-inputbox"),(a=$("div.usr-inputbox__error")).length&&a.remove(),$(".pop-up__cntnr").not(".hide").find(".usr-inputbox__inr").prepend("<div class='usr-inputbox__error usr-inputbox__error--in-popup'>There is some error in signup. Please try after sometime.</div>").slideDown("slow")):((r=$(".lgn__err")).text("Error occurred. Please try after sometime.").slideDown(),logLoginPageEvents("signup-error","Error occurred. Please try after sometime.")),$("body").animate({scrollTop:0},500),!1;if("true"==e.auth.result.msg){if($(".pop-up__cntnr").length&&$(".usr-inputbox__error").slideUp("slow"),$(".lgn__err").length&&$(".lgn__err").slideUp("slow"),loginme(e),deleteCookie("signup-utm"),$(".pop-up__cntnr").length)return closePopup_RUI(),t.preventDefault(),!1;logLoginPageEvents("signup-success","success");var n=url.getAQueryParam("destUrl")||Modules.Cookie.get("previousUrl")||"/";return n=url.getAQueryParam("destUrl")&&url.getAQueryParam("utm_source")&&"bonusapp"!=url.getAQueryParam("utm_source")?n+"?utm_source="+url.getAQueryParam("utm_source"):n,window.location.href=n,deleteCookie("previousUrl"),!1}o[0].errorNode.html(e.auth.result.msg),o[0].errorNode.show()})}).fail(function(){return t.preventDefault(),$(".pop-up__cntnr").length||logLoginPageEvents("validation-error","Invalid email/password format."),!1}).always(function(){$(".pop-up__cntnr .ldr__ovrly").hide()})},forgotformValidator:function(t){t.preventDefault();var r,s,o=$("#inputbox__forgot-form");if(e.hasErrFields(o))return t.preventDefault(),!1;r=$("#forgot-form__email"),s=[{type:"email",inputField:r,errorNode:r.siblings(".js-vldtn-err"),errorMsg:"Please enter a valid email address"}],MSP.utils.validate.form(s).done(function(){var e=r.val();$.ajax({type:"POST",dataType:"json",url:"/users/login_common.php",data:{process:"forgotpassword",email:encodeURIComponent(e),login_type:"forget_password"}}).done(function(e){$(".usr-inputbox__inr").children().remove().end().append('<div class="usr-inputbox__cnfrmtn">The email for resetting the password has been sent to you. Please check your email.</div>')})}).fail(function(){return t.preventDefault(),!1})},resetformValidator:function(t){t.preventDefault();var r,s,o,a=$("#inputbox__resetpass-form");return!e.hasErrFields(a)&&(r=$("#resetpass-form__pwd"),s=$("#resetpass-form__pwd-cnfrm"),o=[{type:"required",inputField:r,errorNode:r.siblings(".js-vldtn-err"),errorMsg:"Please enter a valid password"},{type:"required",inputField:s,errorNode:s.siblings(".js-vldtn-err"),errorMsg:"Please enter a valid password"}],MSP.utils.validate.form(o).done(function(){var e=r.val();if(e===s.val()){url.hashParams;var t=url.getAQueryParam("email"),o=url.getAQueryParam("user");$.ajax({type:"POST",url:"/users/login_common.php",dataType:"json",data:{process:"resetpass",email:encodeURIComponent(t),password:e,login_type:"resetpass",source:"desktop",user:o}}).done(function(e){"error"==e?alert("error"):(loginme(e),$(".usr-inputbox__form").hide(),$(".usr-inputbox__inr").append('<div class="usr-inputbox__cnfrmtn">Your password has been changed, You will be redirected to home page in 3 seconds.</div>'),setTimeout(function(){window.location="/loyalty/#tabOpen=how_it_works"},3e3))})}})),!1},eventHandlers:function(){if($(".algn-wrpr--form-athntctn").length){if(Modules.Cookie.get("msp_login")){var t=Modules.Cookie.get("previousUrl");deleteCookie("previousUrl"),"1"==url.getAQueryParam("close")&&window.opener&&window.opener.postMessage("update_ui","*"),window.location=url.getAQueryParam("destUrl")||t||"/"}$(".algn-wrpr--form-athntctn .usr-inputbox__form input:eq(0)").focus(),loginCallbackQueue.push(e.redirectLoggedUser)}$(".login-form__email, .signup-form__email, .forgot-form__email").on("change",function(){$(this).blur(function(){var t=$(this);isValid=Modules.Validator.email(t.val()),e.showFieldValidation(t,isValid,"Please enter a valid email address")})}),$(".login-form__pwd").on("change",function(){$(this).blur(function(){var t=$(this);isValid=Modules.Validator.required(t.val()),e.showFieldValidation(t,isValid,"Please enter a valid password")})}),$(".signup-form__pwd,.resetpass-form__pwd").on("change",function(){$(this).blur(function(){var t=$(this),r="",s=!1,o=t.val();(s=Modules.Validator.required(o))?(s=Modules.Validator.required(o,{min:6}))||(r="Password should be minimum of 6 characters"):r="Please enter a valid password",e.showFieldValidation(t,s,r)})}),$(".resetpass-form__pwd-cnfrm").on("change",function(){$(this).blur(function(){var t=$(this),r=t.val()===$(".resetpass-form__pwd").val();e.showFieldValidation(t,r,"Passwords does not match")})}),$(".lgn__form").on("submit",function(e){var t=$(this),r=$(".lgn__err"),s=t.find(".lgn__fld--eml .lgn__inpt"),o=t.find(".lgn__fld--pswd .lgn__inpt");return Modules.Validator.email(s.val())?o.val().length<6&&r.text("Please enter a valid password.").slideDown():r.text("Please enter a valid email address.").slideDown(),!1}),$(".lgn__btn--eml").on("click",function(){var e=$(this);e.fadeOut("fast",function(){e.siblings(".lgn__form").fadeIn("fast",function(){$(".js-signup__email").focus()})}),logLoginPageEvents("email-button","Clicked.")}),$(".lgn__btn--ggl").on("click",function(){MSP.login.gplus()}),$(".lgn__btn--fcbk").on("click",function(){MSP.login.facebook()}),$("#login-form__submit").on("click",function(e){userFormValidations.loginformValidator(e)}),$("#signup-form__submit").on("click",function(e){userFormValidations.signupformValidator(e)}),$("#forgot-form__submit").on("click",function(e){userFormValidations.forgotformValidator(e)}),$("#resetpass-form__submit").on("click",function(e){userFormValidations.resetformValidator(e)})}}}(),MSP.login={fb_init:function(){var e,t,r,s;window.fbAsyncInit=function(){FB.init({appId:"253242341485828",channelUrl:"/users/fbchannel.html",status:!0,cookie:!0,xfbml:!0,version:"v2.9"})},e=document,r="facebook-jssdk",s=e.getElementsByTagName("script")[0],e.getElementById(r)||((t=e.createElement("script")).id=r,t.async=!0,t.src="//connect.facebook.net/en_US/all.js",s.parentNode.insertBefore(t,s))},extensionWelcome:function(){setCookie("chrome_extension_welcome","1",1),MSP.login.facebook()},showRedirectLoader:function(){var e=['<div class="sctn--ldng">','<div class="ldr"><div class="ldr__crcl"></div><div class="ldr__text" style="">Redirecting...</div></div>',"</div>"].join("");$(".sctn--lgn").append(e)},removeRedirectLoader:function(){$(".sctn--ldng").length&&$(".sctn--ldng").remove()},facebook:function(){function e(e){var t="";return FB.api("/me","GET",{fields:"id, name, email, first_name, last_name, picture"},function(r){if(MSP.login.showRedirectLoader(),t=r.email,r.first_name||(r.first_name=t.split("@")[0]),r.access_token=e.authResponse.accessToken,r.email=encodeURIComponent(r.email),!t)return $(".pop-up__sgnp").removeClass("hide"),$(".pop-up__lgn").addClass("hide"),$(".pop-up__sgnp .usr-inputbox__msg").show(),$(".pop-up__sgnp .usr-inputbox__orline").hide(),$(".pop-up__sgnp .usr-inputbox__social").hide(),!1;$.ajax({url:"/users/login_common.php",type:"POST",dataType:"json",data:{fb:r,login_type:"facebook",source:"desktop",email:encodeURIComponent(t)}}).done(function(e){loginme_by_fb(e,r.picture.data.url,r.first_name),$(".pop-up__cntnr").length?closePopup_RUI():$(".scl__qna-popup").length?(qnaSocialLogin(),$(".js-sbmt-answr").trigger("click")):(logLoginPageEvents("fb-success","success"),closePopup())}).fail(function(){logLoginPageEvents("fb-error","error"),MSP.login.removeRedirectLoader()})}),t&&captureEmail(t),t}!function(){if(!FBloggedIn){$(".pop-up__cntnr .ldr__ovrly").show(),FB.login(function(t){t.authResponse&&e(t)},{scope:"email, user_birthday, user_likes, user_location, publish_actions"})}}()},gplus:function(){gapi.auth.authorize({client_id:"697312397493-f0hdl2qr52fqfphvm8ihg01e17f5tfcr.apps.googleusercontent.com",scope:"https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email"},function(){var e,t;e=gapi.auth.getToken(),t={},$(".pop-up__cntnr .ldr__ovrly").show(),$.ajax({url:"https://www.googleapis.com/oauth2/v1/userinfo?access_token="+e.access_token+"&alt=json"}).done(function(r){MSP.login.showRedirectLoader(),t=r,$.ajax({url:"/users/login_common.php",type:"POST",dataType:"json",data:{gplus:t,login_type:"gplus",source:"desktop",email:t.email,access_token:e.access_token}}).done(function(e){loginme_by_fb(e,t.picture,t.given_name),$(".pop-up__cntnr .ldr__ovrly").hide(),$(".pop-up__cntnr").length?closePopup_RUI():$(".scl__qna-popup").length?(qnaSocialLogin(),$(".js-sbmt-answr").trigger("click")):(logLoginPageEvents("ggl-success","success"),closePopup())}).fail(function(){logLoginPageEvents("ggl-error","error"),MSP.login.removeRedirectLoader()})})})}},Modules.$doc.on("click",".js-user-lgt",function(){logoutme()}),update_ui(),$(".sctn--lgn, .usr-inputbox").length&&userFormValidations.eventHandlers();var currentPage=window.location.href;if((currentPage.indexOf("users/signup.php")>-1||currentPage.indexOf("users/login.php"))&&"refer"==url.getAQueryParam("source")){var $_msg='<div class="cntxt-info js-cntxt-info">Signup is Required to access Referral Cashback</div>';$(".algn-wrpr--form-athntctn").prepend($_msg),$(".algn-wrpr--form-athntctn").css("margin-top","30px")}var sdbrWlcmPage={};function loyaltyCounter(){var e=Modules.numberWithoutCommas($(".js-lylty-cnt").html()),t=e+1,r=setInterval(function(){$(".js-lylty-cnt").html(Modules.numberWithCommas(t)),++t>e+10&&clearInterval(r)},300)}$(".sdbr-login").length&&(sdbrWlcmPage={cnfrmtnMsg:"<div class='sdbr-login__icon'></div><p>You are part of our Cashback Program</p>",showCnfrmtn:function(){$(".sdbr-login__dtls,.js-pwd-tgglbtn").hide(),$(".sdbr-login__cnfrmtn").show(),$(".sdbr-login__msg").html(this.cnfrmtnMsg),$("#lylty-signup__email,#sdbr-signup__password").val(""),$(".sdbr-login div.error").hide().html("")},hideCnfrmtn:function(){$(".sdbr-login").length&&($(".sdbr-login__dtls").show(),$(".sdbr-login__cnfrmtn").hide())},signupLoyaltyformValidator:function(){var e=$("#sdbr-signup__email"),t=$("#sdbr-signup__password"),r=$(".sdbr-login div.error");return MSP.utils.validate.form([{type:"email",inputField:e,errorNode:r,errorMsg:"Please enter a valid email"},{type:"required",inputField:t,errorNode:r,options:{min:6},errorMsg:"Please enter a valid password"}]).done(function(){var s=url.getAQueryParam("utm_source")?url.getAQueryParam("utm_source"):utmsource;($(".js-chrm-wlcm").length||$(".wlcm-hdr").length)&&(s="chrome welcome"),$.ajax({type:"POST",url:"/users/login_common.php",dataType:"JSON",async:!1,data:{process:"signup",email:encodeURIComponent(e.val()),password:t.val(),subscribed_status:"subscribed",source:"desktop",login_type:"signup_loyalty",number:"",utm_source:s}}).done(function(e){return"error"==e||"error"==e.auth.result.msg?(r.html("There is some error in signup. Please try after sometime"),Modules.Cookie.get("u99rs1deal")&&alert("Unable to login. Please check credentials")):"true"==e.auth.result.msg?(loginme(e),closePopup()):(r.html(e.auth.result.msg+". <a class='js-popup-trgt sdbr-login__link' data-href='/users/login.html'>Click here to login</a>"),r.show()),!1})}),!1},eventHandlers:function(){$(".sdbr-signup__email").change(function(){$(".sdbr-signup__email").blur(function(){$this=$(this),Modules.Validator.email($this.val())?($this.removeClass("hghlght-err-fld"),!$(".sdbr-signup__form .hghlght-err-fld").length&&$(".sdbr-signup__form div.error").text("")):($this.addClass("hghlght-err-fld"),$(".sdbr-signup__form div.error").text("Please enter a valid email"))})}),$(".sdbr-signup__password").on("change",function(){$(".sdbr-signup__password").on("blur",function(){$this=$(this),Modules.Validator.required($this.val())?($this.removeClass("hghlght-err-fld"),!$(".sdbr-signup__form .hghlght-err-fld").length&&$(".sdbr-signup__form div.error").text("")):($this.addClass("hghlght-err-fld"),$(".sdbr-signup__form div.error").text("Please enter a password"))})}),$(".sdbr-signup__submit").click(function(e){e.preventDefault(),sdbrWlcmPage.signupLoyaltyformValidator()}),$(".sdbr-signup__password").on("keydown",function(){$(this).val().length>1?$(".js-pwd-tgglbtn").show():$(".js-pwd-tgglbtn").hide()}),$(".js-pwd-tgglbtn").on("click",function(){var e=$(".sdbr-signup__password")[0];"password"===e.type?(e.type="text",$(this).text("Hide").attr("title","Hide Password")):(e.type="password",$(this).text("Show").attr("title","Show Password"))})},stickLogin:function(){var e=$(".js-sdbr-login-wrpr"),t=$(".js-sdbr-login"),r=e.offset().top+5,s=$(".main-hdr-wrpr").outerHeight(),o=$(".sub-hdr"),a=Modules.$win.scrollTop()+s;a>=r?(!t.hasClass("sticky")&&t.addClass("sticky"),o.hide(),a+t.outerHeight()>$(".ftr").offset().top-20?t.addClass("scroll"):a+t.outerHeight()>$(".ftr").offset().top-150&&t.removeClass("scroll")):(t.removeClass("sticky"),a<r-40&&o.show())},init:function(){this.eventHandlers(),Modules.$win.scroll(function(){sdbrWlcmPage.stickLogin()})}}),Modules.$doc.ready(function(){$(".sdbr-login").length&&sdbrWlcmPage.init(),$(".demo-login").length&&extnsnWlcmPage.init()});var loyalty_counter=!1;if($(".ftr__lylty").has(".js-lylty-cnt").length&&$(window).scroll(function(){var e=$(".ftr__lylty").offset().top,t=$(".ftr__lylty").outerHeight(),r=$(window).height(),s=$(this).scrollTop();$(".js-lylty-cnt").length>0&&s+r>e+t&&!loyalty_counter&&(loyaltyCounter(),loyalty_counter=!0)}),function(){if(localStorage.highlighterData){var e=JSON.parse(localStorage.highlighterData),t=new Date;for(var r in e){var s=new Date(e[r].lastUsed);s.setDate(s.getDate()+parseInt(14)),s<=t&&(e[r].count=0),e[r].count>=2&&$(".js-hghlghtr-link[data-highlight-id="+r+"]").find(".hghlghtr-link").removeClass("hghlghtr-link")}localStorage.highlighterData=JSON.stringify(e)}}(),Modules.$doc.on("click",".js-hghlghtr-link",function(){var e=$(this).data("highlight-id"),t=localStorage.highlighterData?JSON.parse(localStorage.highlighterData):{};t[e]=t[e]?t[e]:{},t[e].lastUsed=new Date,t[e].count=t[e].count?parseInt(t[e].count)+1:1,parseInt(t[e].count)>=2&&$(this).find(".hghlghtr-link").removeClass("hghlghtr-link"),localStorage.highlighterData=JSON.stringify(t)}),function(){var e,t=$(".body-wrpr").data("category");$("body").append(['<div class="js-list-ask-qstn list-ask-qstn popup-target" data-href="/review/qna/popup/ask_a_question.php?source=desktop_list&subcategory='+t+'">','<span class="list-ask-qstn__icon">','<span class="list-ask-qstn__qstn-mrk">&#63;</span>',"</span> Ask a question","</div>"].join("")),e=$(".js-list-ask-qstn"),setTimeout(function(){e.addClass("slide-up")},2e3)}(),$.QueryString=function(e){if(""===e)return{};for(var t={},r=0;r<e.length;++r){var s=e[r].split("=");2==s.length&&(t[s[0]]=decodeURIComponent(s[1].replace(/\+/g," ")))}return t}(window.location.search.substr(1).split("&")),$.QueryString.utm_source&&setCookie("utm_source",$.QueryString.utm_source,2),function(){if(!Modules.isInstalled("plugin_id")&&1===$(".body-wrpr[data-category=computer-pendrive]").length){var e=['<div class="sctn chrme-acqstn" style="background: #fff url(//assets.mspcdn.net/msp-ui/icons/chrome-ext.png) no-repeat 12px center/32px;">','<div class="sctn__inr">','<b style="padding-left: 20px;">Chrome Exclusive</b>&nbsp; ',"Install MySmartPrice Chrome Extension &amp; get 25% cashback on any purchase ",'<button style="float: right;" class="btn btn--s btn--blue js-extension-popup">Get Offer</button>',"</div>","</div>"].join("");$(e).insertAfter(".list-hdr"),window.ga&&ga("send","event","Deals","list-page-show","js-log-list-page",{nonInteraction:!0}),$(document).on("click",".js-extension-popup",function(){window.ga&&ga("send","event","Deals","list-page-click","js-log-list-page",{nonInteraction:!0}),openPopup("/deals/popup/add-chrome-overlay.html")})}}(),url.getAQueryParam&&url.getAQueryParam("utm_source")&&setCookie("utm_source",url.getAQueryParam("utm_source"),1),function(){var e=$("input[name='email']"),t=Modules.Cookie.get("msp_login_email");e.length&&t&&e.val(t)}(),function(){var e;url.getAQueryParam("extensionrating")&&(e=url.getAQueryParam("extensionrating").toString(),window.ga&&ga("send","event","Extension","extension-nps-click",e,{nonInteraction:!0}),openPopup("/promotions/popups/extension_rating_popup.html"))}(),url.getAQueryParam&&"PriceAlert"===url.getAQueryParam("utm_campaign")){var _hash=url.hashParams;if(_hash.price){var $mspSingleTitle=$("#mspSingleTitle");if($mspSingleTitle.length){var emailPrice=parseInt(_hash.price,10),bestPrice=parseInt($mspSingleTitle.data("bestprice"),10);bestPrice>emailPrice&&openPopup("/price_alert/paepopup.php?mspid="+$mspSingleTitle.data("mspid"))}}}setTimeout(function(){$(".bottom-slideup").is(":visible")&&$(".qna-bbl").css("bottom",$(".bottom-slideup").height+"px")},3e3),url.getAQueryParam&&["pa-transact","ps-transact","browsing_pa_emailer","browsing_ps_emailer"].indexOf(-1!==url.getAQueryParam("utm_source"))&&"Chrome"===Modules.Browser.name&&(Modules.isInstalled("plugin_id")||(window.ga&&ga("send","event","autopopup","pricedrop","pdp-pageview",{nonInteraction:!0}),$("body").attr("data-autopopup","/promotions/install-extn-auto-popup.php"))),function(){if(!Modules.isInstalled("plugin_id")&&(("FB-DRT-MSP-25CB"===url.getAQueryParam("utm_source")||"FB-DRT-MSP"===url.getAQueryParam("utm_source")||url.getAQueryParam("utm_source")&&-1!==url.getAQueryParam("utm_source").indexOf("acebook"))&&"Chrome"===Modules.Browser.name)){var e=0;openPopup("/deals/popup/extension_install_overlay.php?pageSource=fbTaggedSinglePage"),function t(){$(".popup-closebutton").addClass("not-vsbl"),$(".popup-overlay").addClass("noclose"),Modules.Cookie.get("plugin_id")||++e<=180&&setTimeout(t,1e3)}()}}(),$(".page-nvgtn--PDP").on("click",".page-nvgtn__item",function(){window.ga&&ga("send","event","Comparables","pdp-nav-click",$(this).data("href"))}),"mail_gtsinstall"===url.getAQueryParam("utm_source")&&(popupDataObj={type:"signup"},openPopup("/users/login.html")),$("#compare_button").show(),$("body").on("click","#addtolistbutton",function(){if(1==Modules.Cookie.get("msp_login"))$("#addedtolistbutton").css("display","inline-block"),$("#addtolistbutton").hide(),$.get("https://www.mysmartprice.com/users/add_to_list.php",{mspid:PriceTable.dataPoints.mspid});else{var e=setInterval(function(){1==Modules.Cookie.get("msp_login")&&(clearInterval(e),$("#addtolistbutton").click())},500);$(".loginbutton").click()}return!1}),$("body").on("click",".logoutbutton",function(){$("#addedtolistbutton").hide(),$("#addtolistbutton").css("display","inline-block")}),Modules.$doc.on("click","body",function(e){var t,r=$(".msg-box");$(e.target).closest(".js-xtrs-msg-box-trgt").length||$(e.target).closest(".js-msg-box-trgt").length||r.each(function(e,r){$(r).closest(".js-msg-box-trgt").length?$(r).removeClass("msg-box--show"):$(r).closest(".js-xtrs-msg-box-trgt").length&&((t=$(r).closest(".js-xtrs-msg-box-trgt")).hasClass("cashback")||t.hasClass("offline")?$(r).removeClass("msg-box--show"):$(r).remove())})}),function(e,t,r,s){"use strict";var o={mCycleItem:"img",animTime:200,waitTime:1e4,isAutoPlay:!1,direction:"left",slideBullets:!0,height:"auto"};function a(t,r){this.element=t,this.options=e.extend({},o,r),this._defaults=o,this._name="mCycle",this._autoPlayQueued=!1,this._animating=!1,this.forcedNextSlide=-1,this.init(!0)}a.prototype={init:function(t){if(t){var r=e(this.element),s=r.find(this.options.mCycleItem).length,o=0;if(r.addClass("mCycleCont").find(this.options.mCycleItem).each(function(t){var r=e(this);r.addClass("show mCycleItemWrapper").attr("data-count",t+1),o=Math.max(r.height(),o)}),r.show(),0===parseInt(r.height(),10)&&"auto"===this.options.height?r.height(o):"auto"!==this.options.height&&r.height(this.options.height),r.find(".mCycleItemWrapper").eq(0).addClass("mCycleItemCurrent"),this.options.slideBullets){r.append('<div class="mCycleSlideBullets"></div>');for(var a=s;a--;)r.find(".mCycleSlideBullets").append('<div class="mCycleSlideBullet"></div>');r.find(".mCycleSlideBullet").eq(0).addClass("active")}if(this.options.isAutoPlay&&s>1){var n=this;n._autoPlayQueued=!0,setTimeout(function(){n._autoPlayQueued=!1,n.options.isAutoPlay&&n.slide()},n.options.waitTime)}}},play:function(){this.options.isAutoPlay||(this.options.isAutoPlay=!0,this.slide())},pause:function(){this.options.isAutoPlay=!1},reverse:function(){this.options.direction="left"===this.options.direction?"right":"left"},slideLeft:function(){this.slide("left")},slideRight:function(){this.slide("right")},slideTo:function(t){var r=e(this.element),s=t>r.index(e(this.element).hasClass("mCycleItemCurrent"))?"left":"right",o=this.options.isAutoPlay,a=this;this.pause(),this.forcedNextSlide=t,r.eq(t).addClass("mCycleItemNext"),setTimeout(function(){a.slide(s),a.forcedNextSlide=-1,setTimeout(function(){o&&a.play()},a.options.animTime+a.options.waitTime+10)},a.options.animTime+10)},slide:function(t){if(!(this.options.isAutoPlay&&this._autoPlayQueued||this._animating)){t=t||this.options.direction;var r,s,o=e(this.element).find(".mCycleItemCurrent"),a=e(this.element).find(".mCycleItemWrapper"),n=-1===this.forcedNextSlide?function(e,t){var r;switch(t){case"left":r=e.next(".mCycleItemWrapper");break;case"right":r=e.prev(".mCycleItemWrapper")}if(r.length)return r;switch(t){case"left":r=e.parent().find(".mCycleItemWrapper").first();break;case"right":r=e.parent().find(".mCycleItemWrapper").last()}return r}(o,t):a.eq(this.forcedNextSlide);switch(t){case"left":s="mCycleItemNext",r="-100%";break;case"right":s="mCycleItemPrev",r="100%"}if(!n.hasClass("mCycleItemCurrent")){n.addClass(s);var i=this;this._animating=!0;e("body").offset().top;o.css({"-webkit-transition":"transform"+i.options.animTime/1e3+"s",transition:"transform "+i.options.animTime/1e3+"s","-webkit-transform":"translateX("+r+")","-ms-transform":"translateX("+r+")",transform:"translateX("+r+")"}),n.css({"-webkit-transition":"transform "+i.options.animTime/1e3+"s",transition:"transform "+i.options.animTime/1e3+"s","-webkit-transform":"translateX(0)","-ms-transform":"translateX(0)",transform:"translateX(0)"}),"MSIE"===Modules.Browser.name&&Modules.Browser.version<9&&(o.css({left:r}),n.css({left:"0"})),setTimeout(function(){var t=e(i.element);if(o.removeClass("mCycleItemCurrent").removeAttr("style"),n.toggleClass(s+" mCycleItemCurrent").removeAttr("style"),"MSIE"===Modules.Browser.name&&Modules.Browser.version<9&&(o.removeClass("mCycleItemCurrentIE").removeAttr("style"),n.toggleClass(s+" mCycleItemCurrentIE").removeAttr("style")),i.options.slideBullets){var r=t.find(".mCycleItemCurrent").data("count");t.find(".mCycleSlideBullet.active").removeClass("active"),t.find(".mCycleSlideBullet").eq(r-1).addClass("active")}i._animating=!1,i.options.isAutoPlay&&(i._autoPlayQueued=!0,setTimeout(function(){i.options.isAutoPlay&&i._autoPlayQueued?(i._autoPlayQueued=!1,i.slide()):(i.options.isAutoPlay=!1,i._autoPlayQueued=!1)},i.options.waitTime))},i.options.animTime+10)}}}},e.fn.mCycle=function(t){var r=Array.prototype.splice.call(arguments,1,1);return this.each(function(){if(e.data(this,"mCycle")){var s=e.data(this,"mCycle");"string"==typeof t&&s[t]?s[t].apply(s,r):"object"==typeof t&&(s.options=e.extend({},s.options,t))}else e.data(this,"mCycle",new a(this,t))})}}(jQuery,window,document),$(".js-crsl-wdgt, .widget-carousel").each(function(){var e,t=$(this);t.data("autoplay")?t.mCycle({mCycleItem:".crsl__item",isAutoPlay:!0}):t.mCycle({mCycleItem:".crsl__item"});var r=t.data("impression-url");function s(){clearTimeout(e),e=setTimeout(function(){t.mCycle("play")},1e4)}r&&(r.indexOf("[timestamp]")>=0&&(r=r.replace("[timestamp]",$.now)),$.ajax({url:r})),t.on("mousever",".crsl-wdgt__prvs-btn, .prev-button",function(){t.mCycle("pause").mCycle("slideRight"),s()}),t.on("click",".crsl-wdgt__prvs-btn, .prev-button",function(){t.mCycle("pause").mCycle("slideRight"),s()}),t.on("click",".crsl-wdgt__next-btn, .next-button",function(){t.mCycle("pause").mCycle("slideLeft"),s()}),t.on("click",".mCycleSlideBullet",function(){t.mCycle("slideTo",$(this).index())})}),elementSlider={init:function(e){var t=$(e).data("slideitem"),r=$(e).data("slideitemwrapper");if(t&&r&&!$(e).find("."+r).hasClass("js-sldr-item-wrpr1")){var s=$(e).find("."+t),o=Math.floor($(e).find("."+r).eq(0).width()/s.eq(0).outerWidth(!0)),a=$($(e).find("."+t).get(0)).outerWidth(!0)*s.length;s.length>o&&($(e).find("."+r).addClass("js-sldr-item-wrpr1").wrapInner("<div class='js-sldr-item-wrpr'></div>"),$(e).find("."+t).eq(0).addClass("js-sldr-crnt"),$(e).find(".js-sldr__prvs").addClass("js-sldr__dsbl-btn").show(),$(e).find(".js-sldr__next").show()),$(".js-sldr-item-wrpr").css("width",a+"px")}},slide:function(e,t){var r,s=$(e).closest(".js-sldr"),o=s.data("slideitemwrapper"),a=s.find(".js-sldr-item-wrpr"),n=s.data("slideitem"),i=a.find("."+n),l=i.filter(".js-sldr-crnt"),d=null,p=Math.floor($("."+o).width()/i.eq(0).outerWidth(!0)),c=i.length-i.index(l)-p,u=i.index(l);if(!$(e).hasClass("js-sldr__dsbl-btn")&&!$(e).hasClass("js-sldr__dsbl-btn"))return $(e).siblings(".js-sldr__prvs").removeClass("js-sldr__dsbl-btn"),$(e).siblings(".js-sldr__next").removeClass("js-sldr__dsbl-btn"),"right"===t?c>p?d=i.eq(i.index(l)+p):(d=i.eq(i.length-p),$(e).addClass("js-sldr__dsbl-btn")):"left"===t&&(u>p?d=i.eq(i.index(l)-p):(d=i.eq(0),$(e).addClass("js-sldr__dsbl-btn"))),l.removeClass("js-sldr-crnt"),d.addClass("js-sldr-crnt"),r=-d.position().left,"MSIE"===Modules.Browser.name&&Modules.Browser.version<9?a.css({left:r}):a.css({transform:"translateX("+r+"px)","-webkit-transform":"translateX("+r+"px)","-ms-transform":"translateX("+r+"px)"}),!1}},$(".js-sldr").each(function(e){elementSlider.init(this)}),Modules.$doc.on("click",".js-slct-trgr",function(){Modules.selectText($(this))}),Modules.$doc.on("click",".js-sldr__prvs",function(){elementSlider.slide(this,"left")}),Modules.$doc.on("click",".js-sldr__next",function(){elementSlider.slide(this,"right")}),function(e,t){"use strict";function r(e,t){for(var r=0,s=e.length;s>r;r++)if(e[r]==t)return!o;return o}var s,o=!1,a=null,n=parseFloat,i=Math.min,l=/(-?\d+\.?\d*)$/g,d=/(\d+\.?\d*)$/g,p=[],c=[],u=function(e){return"string"==typeof e},g=function(e,t){for(var r,s=e.length,o=s;o--;)t(e[r=s-o-1],r)},m=Array.prototype.indexOf||function(e){var t=this.length,r=Number(arguments[1])||0;for(0>(r=0>r?Math.ceil(r):Math.floor(r))&&(r+=t);t>r;r++)if(r in this&&this[r]===e)return r;return-1};e.tinysort={id:"TinySort",version:"1.5.6",copyright:"Copyright (c) 2008-2013 Ron Valstar",uri:"http://tinysort.sjeiti.com/",licensed:{MIT:"http://www.opensource.org/licenses/mit-license.php",GPL:"http://www.gnu.org/licenses/gpl.html"},plugin:(s=function(e,t){p.push(e),c.push(t)},s.indexOf=m,s),defaults:{order:"asc",attr:a,data:a,useVal:o,place:"start",returns:o,cases:o,forceStrings:o,ignoreDashes:o,sortFunction:a}},e.fn.extend({tinysort:function(){var t,s,_,f,h=this,v=[],w=[],$=[],b=[],y=0,k=[],P=[],C=function(e){g(p,function(t){t.call(t,e)})},x=function(e,t){return"string"==typeof t&&(e.cases||(t=(r=t)&&r.toLowerCase?r.toLowerCase():r),t=t.replace(/^\s*(.*?)\s*$/i,"$1")),t;var r},j=function(e,t){var r=0;for(0!==y&&(y=0);0===r&&f>y;){var s=b[y],a=s.oSettings,i=a.ignoreDashes?d:l;if(C(a),a.sortFunction)r=a.sortFunction(e,t);else if("rand"==a.order)r=Math.random()<.5?1:-1;else{var p=o,m=x(a,e.s[y]),_=x(a,t.s[y]);if(!a.forceStrings){var h=u(m)?m&&m.match(i):o,v=u(_)?_&&_.match(i):o;if(h&&v)m.substr(0,m.length-h[0].length)==_.substr(0,_.length-v[0].length)&&(p=!o,m=n(h[0]),_=n(v[0]))}r=s.iAsc*(_>m?-1:m>_?1:0)}g(c,function(e){r=e.call(e,p,m,_,r)}),0===r&&y++}return r};for(t=0,_=arguments.length;_>t;t++){var M=arguments[t];u(M)?k.push(M)-1>P.length&&(P.length=k.length-1):P.push(M)>k.length&&(k.length=P.length)}for(k.length>P.length&&(P.length=k.length),0===(f=k.length)&&(f=k.length=1,P.push({})),t=0,_=f;_>t;t++){var S=k[t],T=e.extend({},e.tinysort.defaults,P[t]),L=!(!S||""===S),A=L&&":"===S[0];b.push({sFind:S,oSettings:T,bFind:L,bAttr:!(T.attr===a||""===T.attr),bData:T.data!==a,bFilter:A,$Filter:A?h.filter(S):h,fnSort:T.sortFunction,iAsc:"asc"==T.order?1:-1})}return h.each(function(t,r){var o,a=e(r),n=a.parent().get(0),i=[];for(s=0;f>s;s++){var l=b[s],d=l.bFind?l.bFilter?l.$Filter.filter(r):a.find(l.sFind):a;i.push(l.bData?d.data(l.oSettings.data):l.bAttr?d.attr(l.oSettings.attr):l.oSettings.useVal?d.val():d.text()),void 0===o&&(o=d)}var p=m.call($,n);0>p&&(p=$.push(n)-1,w[p]={s:[],n:[]}),o.length>0?w[p].s.push({s:i,e:a,n:t}):w[p].n.push({e:a,n:t})}),g(w,function(e){e.s.sort(j)}),g(w,function(e){var s=e.s,a=e.n,n=s.length,l=a.length,d=n+l,p=[],c=d,u=[0,0];switch(T.place){case"first":g(s,function(e){c=i(c,e.n)});break;case"org":g(s,function(e){p.push(e.n)});break;case"end":c=l;break;default:c=0}for(t=0;d>t;t++){var m=r(p,t)?!o:t>=c&&c+n>t,_=m?0:1,f=(m?s:a)[u[_]].e;f.parent().append(f),(m||!T.returns)&&v.push(f.get(0)),u[_]++}}),h.length=0,Array.prototype.push.apply(h,v),h}}),e.fn.TinySort=e.fn.Tinysort=e.fn.tsort=e.fn.tinysort}(jQuery),function(){var e=$("[data-id='price-history']");if(e.length){var t=e.offset().top;Modules.$win.on("scroll.lazyGraph",Modules.throttle(function(){Modules.$win.scrollTop()+window.innerHeight>t&&(Modules.$win.off("scroll.lazyGraph"),$.ajax({url:"/msp/processes/property/ui-factory/msp_generate_pricegraph.php",data:{mspid:$(".prdct-dtl__ttl").data("mspid")}}).done(function(t){e.replaceWith(t)}))},250))}}(),$(".prc-grph").length&&Modules.lazyLoad.assign({node:$(".prc-grph"),isStatic:!0,callback:{definition:function(){if($(".prc-grph__not-sprtd").length)return $(".prc-grph__not-sprtd").show(),void $(".prc-grph__ldr").hide();$("head").append('<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/c3/0.4.10/c3.min.css">'),$.getScript("https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.6/d3.min.js",function(){$.getScript("https://cdnjs.cloudflare.com/ajax/libs/c3/0.4.10/c3.min.js",function(){$.getScript("assets/js/priceGraph.js",function(){$(".prc-grph__rght-chrt").show(),$(".prc-grph__btn-wrpr").show(),$(".prc-grph__ldr").hide()})})})},context:window,arguments:[]}}).run(),$(document).on("click",".js-instatab-popup",function(e){e.preventDefault();var t=$(this).data("url"),r=Modules.Cookie.get("msp_login_email"),s=Modules.Cookie.get("instatab"),o=Modules.Cookie.get("gtspopup")?Modules.Cookie.get("gtspopup").split(";"):void 0,a=o?o[0]:void 0,n=o?o[1]:void 0,i=o?o[2]:void 0;return o?a<4?"instatab"===n?s?r||i?d():(setCookie("gtspopup",Number(a)+1+";email;",30),l()):l():r||"email_done"===i?s?d():(setCookie("gtspopup","4;instatab;"+(i||""),30),l()):l():d():s?r?d():(setCookie("gtspopup","1;email;",30),l()):l(),!1;function l(){_gPopStoreUrl=t||null,openPopup("https://www.mysmartprice.com/loyalty/popup/gts.php?gtsURL="+encodeURIComponent(t),"PromoB")}function d(){window.open(t,"_blank")}}),Modules.$doc.ready(function(){$(document).on("click",".js-gts-only-email-popup",function(e){e.preventDefault(),e.stopImmediatePropagation();var t=$(this),r=t.data("url");return _gPopStoreUrl=r||null,t.removeClass("js-instatab-popup js-prc-tbl__gts-btn"),openPopup("https://www.mysmartprice.com/loyalty/popup/gts-only-email.php?gtsURL="+encodeURIComponent(r)),!1})}),$("body").on("click",".openPopup_rd",function e(t){var r,s,o,a,n,i=$(this);function l(e){return['<div class="offers_expand popup_rd">','<div class="head">','<div class="title">Offer Details</div>','<div class="closebutton">&times;</div>','<br clear="all">',"</div>",'<div class="text">',e,"</div>","</div>"].join("")}e.popupData=e.popupData||{},$(t.target).is($(".openPopup_rd, .openPopup_rd *").not(".popup_rd, .popup_rd *"))&&$(".popup_rd").slideUp("fast",function(){$(this).closest(".openPopup_rd").is(".offers:not(.cashback)")&&$(this).remove()}),"common"===i.data("popup-type")?(r=i.siblings(".popup_rd")).is(":visible")||(r.length?r.slideDown("fast"):i.after(['<div class="loyalty_expand popup_rd common">',$("#common_popup_rd").html(),"</div>"].join("")).siblings(".popup_rd").slideDown("fast")):i.find(".popup_rd").is(":visible")||(i.is(".offers:not(.cashback)")?(s=$("#mspSingleTitle").data("mspid"),a=$(this).closest(".store_pricetable").data("storename"),o=$(".filter_colour").length&&$(".filter_colour").find(".selected").data("callout")||"default",e.popupData.colour!==o?$.ajax({url:"/msp/offertext_ajax.php",dataType:"json",data:{mspid:s,color:"default"!==o?o:void 0}}).done(function(t){e.popupData.content=t,n=t[a],i.append(l(n)),i.find(".popup_rd").slideDown("fast")}):(n=e.popupData.content[a],i.append(l(n)),i.find(".popup_rd").slideDown("fast"))):((r=i.find(".popup_rd")).hasClass("coupon_expand")&&"1"==Modules.Cookie.get("msp_login")&&Modules.Cookie.get("msp_login_email")&&!$.trim(r.find(".coupon_value").text())&&(r.find(".coupon_email").val(Modules.Cookie.get("msp_login_email")),r.find(".coupon_form").submit()),r.slideDown("fast")))}),$("body").on("click",".closebutton",function(e){$(this).parents(".popup_rd").slideUp("fast"),e.stopPropagation()});var PriceTable={dataPoints:{category:$(".body-wrpr").attr("category"),mspid:$(".prdct-dtl__ttl").data("mspid"),defaultRows:6,previousCategory:"recommended",onload:!0,colorChange:!1,prevColor:null,variant:{model:$(".prdct-dtl__ttl-vrnt").data("model"),size:$(".prdct-dtl__ttl-vrnt").data("size")},partialOnlineRows:!0,price:{getMrp:function(){return $(".prdct-dtl__slr-prc-mrp-prc").data("value")}},productThumb:$(".prdct-dtl__thmbnl-img").eq(0).attr("src"),cardLoading:!1,getTitle:function(){return $(".prdct-dtl__ttl").text()},getSelectedColor:function(){return $(".avlbl-clrs__inpt:checked").val()},getAppliedSort:function(){return $(".js-prc-tbl__sort").val()},getAppliedFilters:function(){return $.map($(".prc-tbl__fltrs-inpt:checked"),function(e){return $(e).attr("value")})},getSelectedCategory:function(){return $(".prc-tbl__ctgry-inpt:checked").val()},getSelectedCategoryLabel:function(){return $(".prc-tbl__ctgry-inpt:checked").data("label")}},init:function(){$(".prdct-dtl__ttl");$("body").on("click",".js-show-prc-card-dtls",function(e){var t=$(this).siblings(".prc-card__dtls-tltp");$(".prc-card__dtls-tltp").not(t).slideUp(),t.stop(!0,!0).slideToggle(),e.stopPropagation()}).on("click",".prc-card__dtls",function(e){e.stopPropagation()}).on("click",function(){$(".prc-card__dtls-tltp").slideUp()}),Modules.$doc.on("click",".js-expnd-grid",function(){if(PriceTable.dataPoints.cardLoading)return!1;var e=$(this).parents(".prc-grid").find(".prc-grid__more-dtls"),t=e.attr("data-show-txt"),r=e.attr("data-hide-txt"),s=e.text().split("")[0].trim()==t?r+"<span class='prc-grid__arw-up'> </span>":t+"<span class='prc-grid__arw'> </span>",o=$(this).closest(".prc-grid"),a=o.children(".prc-grid-expnd"),n=o.data("storename"),i=PriceTable.dataPoints.mspid;e.html(s),a.hasClass("js-has-data")?(a.children(".prc-grid-expnd__data").remove(),a.css("height","0")):(PriceTable.dataPoints.cardLoading=!0,$loader='<div class="prc-grid-expnd__data"><div class="ldr ldr--sml"><div class="ldr__crcl"></div><div class="ldr__text" style="">Loading...</div> </div></div>',a.append($loader),matchChildHeight(a,".prc-grid-expnd__data"),PriceTable.fetch.cardData(i).done(function(e){a.empty(),a.append(e[n]),matchChildHeight(a,".prc-grid-expnd__data"),PriceTable.dataPoints.cardLoading=!1})),a.toggleClass("js-has-data")}),Modules.$doc.on("click",".js-expnd-offr",function(){if(PriceTable.dataPoints.cardLoading)return!1;var e=$(this).parents(".prc-grid").find(".prc-grid__more-dtls"),t=e.attr("data-show-txt"),r=e.attr("data-hide-txt"),s=e.text().split("")[0].trim()==t?r+"<span class='prc-grid__arw-up'> </span>":t+"<span class='prc-grid__arw'> </span>",o=$(this).closest(".prc-grid"),a=o.children(".prc-grid-expnd");o.data("storename"),PriceTable.dataPoints.mspid;e.html(s),a.hasClass("js-has-data")?(a.children(".prc-grid-expnd__data").hide(),a.css("height","0")):(a.children(".prc-grid-expnd__data").show(),matchChildHeight(a,".prc-grid-expnd__data")),a.toggleClass("js-has-data")}),Modules.$doc.on("click",".js-cls-grid",function(){$(this).parent().css("height","0px")}),Modules.$doc.on("click",".js-more-strs",function(){$button=$(this),PriceTable.update.allCards(PriceTable.dataPoints.prevColor).done(function(e){var t,r,s,o;t=$button,r=t.attr("data-more-txt"),s=t.attr("data-few-txt"),o=t.text()==r?s:r,t.text(o),alignPriceCards(t.attr("data-few-txt")==t.text())})}),Modules.$doc.on("click",".avlbl-clrs__inpt",(PriceTable.dataPoints.prevColor=PriceTable.dataPoints.getSelectedColor(),function(){var e=$(this),t=$(".prdct-dtl__ttl-vrnt"),r=e.closest(".prdct-dtl__vrnt-clr").find(".prdct-dtl__vrnt-cler"),s=t.data("model"),o=t.data("size"),a=e.val();a===PriceTable.dataPoints.prevColor?(PriceTable.dataPoints.colorChange=!1,t.text(s||o?"("+(s?o?s+", ":s:"")+(o||"")+")":""),r.hide(),e.prop("checked",!1)):(PriceTable.dataPoints.colorChange=!0,t.text("("+(s?s+", ":"")+a+(o?", "+o:"")+")"),r.show(),PriceTable.dataPoints.prevColor=a,e.prop("checked",!0)),PriceTable.update.allCards(a).done(function(e){$(".js-more-strs").text($(".js-more-strs").attr("data-more-txt")),alignPriceCards()})})),Modules.$doc.on("click",".prdct-dtl__vrnt-clr .prdct-dtl__vrnt-cler",function(){var e=$(".prdct-dtl__ttl-vrnt"),t=PriceTable.dataPoints.variant.model,r=PriceTable.dataPoints.variant.size;PriceTable.dataPoints.colorChange=!0,PriceTable.dataPoints.prevColor=null,$(".avlbl-clrs__inpt").prop("checked",!1),e.text(t||r?"("+(t?r?t+", ":t:"")+(r||"")+")":""),$(this).hide(),$(".prc-grid").attr("data-show",!0),PriceTable.update.allCards().done(function(e){$(".js-more-strs").text($(".js-more-strs").attr("data-more-txt")),alignPriceCards()})}),Modules.$doc.on("click",".avlbl-sizes__item",function(){var e=$(this);e.hasClass("avlbl-sizes__item--slctd")||e.parents(".avlbl-sizes").hasClass("avlbl-sizes--no-slct")||(window.location.href=e.data("href"))}),Modules.$doc.on("click",".js-ctgry-inpt",function(){var e=$(this),t=PriceTable.dataPoints.previousCategory,r=e.attr("value");r===t||($(".js-ctgry-inpt").prop("checked",!1),e.prop("checked",!0),PriceTable.dataPoints.previousCategory=r,PriceTable.update.byFilter(r))}),Modules.$doc.on("click",".prdct-dtl__slr-offln-area",function(){return $(".usr_location__wrpr").trigger("click"),!1}),Modules.$doc.on("click",".js-offln-click",function(){$('.js-ctgry-inpt[value="offline"]').trigger("click")}),Modules.$doc.on("click",".js-onln-click",function(){$('.js-ctgry-inpt[value="online"]').trigger("click")}),Modules.$doc.on("click",".prc-tbl__fltrs-inpt",function(){PriceTable.update.byFilter(void 0,{latitude:window.localStorage.userLatitude,longitude:window.localStorage.userLongitude})}),function(){Modules.$doc.on("change",".js-prc-tbl__sort",function(){var e,t,r,s,o,a,n,i=$(this).val(),l=i.split(":")[0],d=$(".prc-tbl-hdr__clm[data-sort-category='"+l+"']");PriceTable.dataPoints.partialOnlineRows?PriceTable.update.byFilter(void 0,{latitude:window.localStorage.userLatitude,longitude:window.localStorage.userLongitude}):(t=i,(e=d).length?(s=t.split(":")[0],o=t.split(":")[1],a=n=Modules.cycleShift(["asc","desc"],o),r=s+":"+n,e.data("sort-value",r),e.find(".prc-tbl-hdr__arw").removeClass("prc-tbl-hdr__arw--"+a).addClass("prc-tbl-hdr__arw--"+o),$(".prc-tbl-hdr__clm[data-sort-category]").removeClass("prc-tbl-hdr__clm--slctd").find(".prc-tbl-hdr__cptn").text("Sort By"),e.addClass("prc-tbl-hdr__clm--slctd").find(".prc-tbl-hdr__cptn").text("Sorted By")):$(".prc-tbl-hdr__clm[data-sort-category]").removeClass("prc-tbl-hdr__clm--slctd").find(".prc-tbl-hdr__cptn").text("Sort By"),PriceTable.sort(i))}),Modules.$doc.on("click",".prc-tbl-hdr__clm[data-sort-value]",function(){var e=$(this).data("sort-value");$(".js-prc-tbl__sort").val(e).change()})}(),Modules.$doc.on("click",".js-prc-tbl__show-more",function e(){var t=$(this),r=t.find(".prc-card__more-inr"),s=$(".prc-card").not(t),o=t.data("collapsed"),a=PriceTable.dataPoints.defaultRows,n=s.length;if(t.removeClass("js-prc-tbl__show-more"),e.innerHtml=e.innerHtml||r.html(),o&&!$(".js-offln-avl").length&&!(n-a))return PriceTable.update.byFilter(),PriceTable.dataPoints.partialOnlineRows=!1,t.addClass("js-prc-tbl__show-more"),void setTimeout(function(){t.trigger("click")},1500);s.slice(a).fadeToggle(400,function(){var e=$(".prc-card--more");e.css("margin-left",e.index(".prc-card:visible")%3?"14px":"0")}),o?(r.text("See less stores"),$("html, body").animate({scrollTop:s.eq(a-1).offset().top-$(".hdr-size").height()}),t.data("collapsed",!1)):(r.html(e.innerHtml),$("html, body").animate({scrollTop:s.eq(a).offset().top-$(window).height()+2*$(".hdr-size").height()}),t.data("collapsed",!0)),t.addClass("js-prc-tbl__show-more")}),Modules.$doc.on("click",".js-xtrs-msg-box-trgt",function e(t){var r,s,o,a,n,i=$(this),l=i.find(".prc-tbl__xtrs-clm-pop"),d=$(this).closest(".prc-tbl-row");i.hasClass("cashback")||i.hasClass("offline")?i.find(".msg-box").toggleClass("msg-box--show"):$(t.target).hasClass("js-xtrs-msg-box__cls")||(e.popupData=e.popupData||{},l.hasClass("msg-box--show")||(r=PriceTable.dataPoints.mspid,o=d.data("storename"),s=PriceTable.dataPoints.getSelectedColor()||!1,e.popupData.colour!==s?PriceTable.fetch.offersPopups(r,s).done(function(t){e.popupData.content=t,a=t[o],n=PriceTable.components.offersMsgBox(a),i.append(n);$("body").offset().top;i.find(".msg-box").addClass("msg-box--show")}):(a=e.popupData.content[o],n=PriceTable.components.offersMsgBox(a),i.append(n),i.find(".msg-box").addClass("msg-box--show"))))}),Modules.$doc.on("click",".js-xtrs-msg-box__cls",function(){var e=$(this),t=e.closest(".js-xtrs-msg-box-trgt");t.hasClass("cashback")||t.hasClass("offline")||e.closest(".msg-box").remove()}),$("body").keydown(function(e){27==e.which&&$(".msg-box").is(":visible")&&$(".js-msg-box__cls, .js-xtrs-msg-box__cls").click()})},update:{allCards:function(e){var t=$.Deferred(),r=PriceTable.dataPoints.mspid;return $loader="<div class='prc-grid--ldr'><div class='ldr'><div class='ldr__crcl'></div></div></div>",$(".prc-grid-wrpr").append($loader),PriceTable.fetch.allTableData(r,e).done(function(e){$(".prc-grid--ldr").remove(),$(".prc-grid-wrpr").html(e),PriceTable.update.miniPriceTable(e),showCplWidget(),updateSidebarPriceTable(),t.resolve()}),t.promise()},miniPriceTable:function(e){var t,r,s,o,a=$("<div>"+e+"</div>").find(".prc-grid"),n=a.length,i={},l=$(".prc-tbl"),d="";n=n<4?n:4,t=a.length-n;for(var p=0;p<n;p++){var c=a.eq(p);i.store=c.data("storename").toLowerCase(),"ebay_1"===i.store&&(i.store="ebay"),i.storeLogoUrl="https://assets.mspcdn.net/q_auto/logos/partners/"+i.store+"_store.png",i.price=c.find(".prc-grid__prc-val").text().replace(/[^0-9,]/g,""),i.shippingInfo=c.find(".prc-grid__shpng").text(),i.gtsUrl=c.find(".js-prc-tbl__gts-btn").data("url"),d+=(r=i.storeLogoUrl,s=i.price,i.shippingInfo,o=i.gtsUrl,['<div class="prc-tbl__row-wrpr">','<div class="prc-tbl__row clearfix">','<div class="prc-tbl__logo"><img class="prdct-dtl__str-icon" src="'+r+'"></div>','<div class="prc-tbl__info">','<div class="prc-tbl__prc">',"&#8377;"+s,"</div>","</div>",'<div class="prc-tbl__btn">','<div class="bttn bttn--gts prc-tbl__gts-btn js-prc-tbl__gts-btn" data-cookiename="" data-cookietimedays="" data-href="" data-url="'+o+'"></div>',"</div>","</div>","</div>"].join(""))}t>0&&(d+=['<div class="prc-tbl__more-info clearfix">','<div class="prc-tbl__more-strs text-link js-inpg-link" data-href="price-table">',t+" more stores ","</div>","</div>"].join("")),l.html(d)},byFilter:function(e,t){var r=PriceTable.components.loadingMask(),s=$(".prc-grid-wrpr"),o=$(".sort-wrpr__ctgry-inpt:checked").attr("value"),a=e||$(".js-ctgry-inpt:checked").attr("value"),n=PriceTable.dataPoints.getAppliedFilters(),i=PriceTable.dataPoints.getSelectedColor();s.append(r),PriceTable.fetch.tableByFilter(a,o,n,t,i).done(function(e){if(e){if(e.pricetable){if(-1==e.pricetable.search("prc-grid"))s.html('<div class="no-strs">No stores available</div>');else{s.html(e.pricetable);var t=$(".prc-grid, .prc-grid--ofln"),r=$(".prc-grid--more");if(t.length>PriceTable.dataPoints.defaultRows){t.slice(PriceTable.dataPoints.defaultRows).hide();var o=$(".prc-grid[data-storename='amazon'], .prc-grid[data-storename='flipkart']").not(":visible");if(o.length){o.insertAfter($(".prc-grid").eq(PriceTable.dataPoints.defaultRows-1)).show(),PriceTable.dataPoints.defaultRows=t.filter(":visible").length;var a=t.not(":visible").length;a?$(".prc-grid__more-inr").text("See "+a+" more "+(a>1?"stores":"store")):r.hide()}}r.css("margin-left",r.index(".prc-card:visible")%3?"14px":"0")}}if(PriceTable.dataPoints.colorChange&&(e.online_store_count?($(".prdct-dtl__slr-onln .lghtr").html("Starting from"),$(".prdct-dtl__slr-onln .prdct-dtl__slr-hghlght").html(" "+e.online_best_price),$(".js-onln-click.btn.btn-strs").html("View "+e.online_store_count+" Online Stores &#187;")):($(".prdct-dtl__slr-onln .lghtr").html("No Online stores available"),$(".prdct-dtl__slr-onln .prdct-dtl__slr-hghlght").html(""),$(".js-onln-click.btn.btn-strs").html("No Online stores listed")),$(".prdct-dtl__slr-prc-rcmnd-val").text(e.online_best_price).data("value",e.online_best_price_raw)),"Y"==$(".prdct-dtl__ttl").data("offlinedelivery")||"Y"==$(".prdct-dtl__ttl").data("jdavailable"))if(PriceTable.dataPoints.partialOnlineRows=!1,PriceTable.dataPoints.onload||PriceTable.dataPoints.colorChange)(parseInt($(".prdct-dtl__slr-prc-rcmnd-val").data("value"))||99999999)>e.offline_best_price_raw&&$(".prdct-dtl__slr-prc-rcmnd-val").text(e.offline_best_price).data("value",e.offline_best_price_raw),$(".prc-tbl__ctrls").css("display","block"),$(".prc-tbl-hdr").css("border-top","1px solid #dfe1e8"),$(".js-strs-offln-prc").html(" "+e.offline_best_price),$(".js-strs-offln-cnt").html("View "+e.offline_store_count+" Nearby Stores &#187;"),$(".prdct-dtl__slr").addClass("js-offln-avl"),PriceTable.dataPoints.onload=!1;alignPriceCards(),PriceTable.dataPoints.colorChange=!1}else s.html('<div class="no-strs">No stores returned</div>');if($(".js-offln-avl").length){var n=$(".prdct-dtl__slr-strs"),i=$(".prdct-dtl__slr-strs-ntfy");$(".prdct-dtl__slr-onln").length?n.removeClass("prdct-dtl__slr-strs--l"):i.remove()}}).fail(function(){s.find(".js-fltr-ldng-mask").remove()})}},sort:function(e){var t,r=$(".prc-tbl-inr"),s=$(".prc-tbl-row"),o=e.split(":")[0],a=e.split(":")[1],n=$(".js-xtrs-msg-box-trgt.cashback").find("msg-box--show"),i=$(".js-xtrs-msg-box-trgt.offline").find("msg-box--show");$(".js-xtrs-msg-box-trgt").not(".cashback").find(".js-msg-box__cls, .js-xtrs-msg-box__cls").click(),i.removeClass("msg-box--show"),n.removeClass("msg-box--show"),t={popularity:{attr:"data-relrank"},price:{attr:"data-pricerank"},price:{attr:"data-pricerank"},rating:{attr:"data-rating"},rating:{attr:"data-rating"}},r.css({height:r.height(),display:"block"}),s.show(),s.each(function(e,t){var r=$(t).position().top;$.data(t,"h",r)}),"popularity"===e?$(".prc-tbl-row--NA").attr("data-relrank","9999"):"price:asc"===e?$(".prc-tbl-row--NA").attr("data-pricerank","9999999"):"price:desc"===e?$(".prc-tbl-row--NA").attr("data-pricerank","0"):"rating:asc"===e?($(".prc-tbl-row--NA").attr("data-rating","6"),$(".prc-tbl-row--NA").find(".js-prc-tbl__str-rtng").attr("data-rating","6")):"rating:desc"===e&&($(".prc-tbl-row--NA").attr("data-rating","-1"),$(".prc-tbl-row--NA").find(".js-prc-tbl__str-rtng").attr("data-rating","-1")),$(".prc-tbl-row").tsort({attr:t[o].attr,order:a}).each(function(e,t){var o=$(t),a=$.data(t,"h"),n=0;o.prevAll(".prc-tbl-row:visible").each(function(){n+=$(this).outerHeight()}),o.css({position:"absolute",top:a}).stop().animate({top:n},500,function(){s.css({position:"relative",top:"auto"}),r.css({height:"auto",display:"block"}),$(".js-prc-tbl__show-more").data("collapsed")?$(".prc-tbl-row").slice(PriceTable.dataPoints.defaultRows).hide():$(".prc-tbl-row").slice(PriceTable.dataPoints.defaultRows).show()})})},components:{loadingMask:function(){return['<div class="js-fltr-ldng-mask">','<div class="ldr">','<div class="ldr__crcl"></div>','<div class="ldr__text" style="">Loading...</div> ',"</div>","</div>"].join("")},offersMsgBox:function(e){var t,r,s=1;return/<li>/.test(e)?(s=$(e).find("li").length||1,r="",s?$(e).find("li").each(function(){r+='<div class="msg-box__row">'+$(this).html()+"</div>"}):r+='<div class="msg-box__row">'+$(e).html()+"</div>",t=r):t='<div class="msg-box__row">'+e+"</div>",['<div class="msg-box prc-tbl__xtrs-clm-pop">','<div class="msg-box__hdr clearfix">',s+" Offers",'<span class="msg-box__cls js-xtrs-msg-box__cls"></span>',"</div>",'<div class="msg-box__inr">',t,"</div>","</div>"].join("")}},fetch:{allTableData:Modules.memoize(function(e,t){var r=$.Deferred(),s={mspid:e,data:"table",color:t};return setServingLocation(),$.ajax({url:"/mobile/ptrows_details.php",data:s}).done(function(e){r.resolve(e)}).fail(function(e){r.reject(e)}),r.promise()},{cacheLimit:10}),cardData:Modules.memoize(function(e){var t=$.Deferred(),r={mspid:e,data:"store"};return $.ajax({url:"/mobile/ptrows_details.php",dataType:"json",data:r}).done(function(e){t.resolve(e)}).fail(function(e){t.reject(e)}),t.promise()},{cacheLimit:10}),tableByFilter:Modules.memoize(function(e,t,r,s,o){var a=$.Deferred(),n={mspid:PriceTable.dataPoints.mspid,mrp:PriceTable.dataPoints.price.getMrp()||0,sort:PriceTable.dataPoints.getAppliedSort(),colour:(PriceTable.dataPoints.getSelectedColor()||"").toLowerCase(),cod:-1!==r.indexOf("cod"),emi:-1!==r.indexOf("emi"),returnpolicy:-1!==r.indexOf("returnPolicy"),offers:-1!==r.indexOf("offers"),coupons:-1!==r.indexOf("coupons"),storetype:e||"recommended",sort:t||"popularity",latitude:s&&s.latitude,longitude:s&&s.longitude,colour:o||!1};return $.ajax({url:"/mobile/filter_response_new.php",dataType:"json",data:n}).done(function(e){a.resolve(e)}).fail(function(e){a.reject(e)}),a.promise()},{cacheLimit:10}),offersPopups:Modules.memoize(function(e,t){var r=$.Deferred();return $.ajax({url:"/msp/offertext_ajax.php",type:"GET",dataType:"json",data:{mspid:e,color:t}}).done(function(e){r.resolve(e)}),r.promise()},{cacheLimit:10})},updateMoreStores:function(){var e=$(".prc-grid").length-1;e>0?$(".js-str-cnt").html(e+" More "+(1===e?"Store":"Stores")).show():$(".js-str-cnt").hide()}};function adjustGridStyle(){$(".prc-grid--no-brdr").removeClass("prc-grid--no-brdr"),$(".prc-grid").filter(":visible:last").addClass("prc-grid--no-brdr")}function matchChildHeight(e,t){var r=e.children(t).outerHeight(!0);e.css("height",r+"px")}function alignPriceCards(e){e?$(".prc-grid").show():$(".prc-grid:visible").slice(6).hide(),$(".prc-grid").length>=6?$(".js-more-strs").show():$(".js-more-strs").hide(),adjustGridStyle()}PriceTable.init(),Modules.$doc.on("submit",".js-ntfy-frm",function(){var e=$(this).find(".js-ntfy-eml"),t=$(this).find(".js-ntfy-err");return MSP.utils.validate.form([{type:"email",inputField:e,errorNode:t}]).done(function(){$.ajax({url:"/price_alert/capture_email.php",data:{email:e.val(),mspid:PriceTable.dataPoints.mspid,capture_point:"outofstock",popupname:"pricealert"}}),$(".js-ntfy-eml").hide(),$(".js-ntfy-sbmt").hide(),$(".js-ntfy-sccss").fadeIn()}),!1}),Modules.$doc.on("click",".js-prc-tbl__gts-btn",function(){var e=$(this),t=e.data("url"),r=e.hasClass("js-popup-trgt")||e.hasClass("js-lylty-popup-trgt")||e.hasClass("js-instatab-popup"),s=!e.hasClass("btn-GTS--dsbld");return!r&&s&&window.open(t),!1}),Modules.$doc.on("click",".js-ntfy-sbmt",function(){var e=$(this).closest(".js-ntfy-frm"),t=e.find(".js-ntfy-eml"),r=e.find(".js-ntfy-err");return MSP.utils.validate.form([{type:"email",inputField:t,errorNode:r}]).done(function(){$.ajax({url:"/price_alert/capture_email.php",data:{email:t.val(),mspid:PriceTable.dataPoints.mspid,capture_point:"outofstock",popupname:"pricealert"}}),e.hide(),$(".js-ntfy-sccss").fadeIn()}),!1}),Modules.$doc.on("click",".prc-tbl__btn .js-prc-tbl__gts-btn",function(e){var t=$(this).closest(".prc-tbl");t.hasClass("cards")?t.hasClass("full")?logGTSEvent("Top-Price-Table--FullCards"):logGTSEvent("Top-Price-Table--Cards"):logGTSEvent("Top-Price-Table")}).on("click",".prc-grid__clmn-4 .js-prc-tbl__gts-btn",function(e){logGTSEvent("Bottom-Price-Table")}).on("click",".js-gts-sidebar",function(e){logGTSEvent("Sidebar-Price-Table")}),function(){var e=$(".prdct-dtl__prc-val").text().replace(/\D/g,"");$(".prc-grid[data-pricerank="+e+"]").addClass("prc-grid--lwst-price"),url.getAQueryParam&&url.getAQueryParam("utm_medium")&&$(".prc-grid[data-storename="+url.getAQueryParam("utm_medium")+"]").addClass("prc-grid--vstd-store")}(),$(".prc-grid__gts-btn--mdl--ncCompare")[0]&&$(".prc-grid__gts-btn--mdl--ncCompare").on("click",function(){window.ga&&ga("send","event","Non-Comparables","Click","price-table-gts")}),"nc"==$(".prdct-dtl__ttl").data("page-type")&&$(".prc-grid").length&&window.ga&&ga("send","event","Non-Comparables","gtsLoad","price-table-gts",{nonInteraction:!0}),alignPriceCards(),function(){var e=+Modules.Cookie.get("msp_uid");e%10<2?($(".prc-tbl").addClass("cards"),e%10<1?window.ga&&ga("send","event","Comparables","GTS-Page-View","Top-Price-Table--Cards"):($(".prc-tbl").addClass("full"),window.ga&&ga("send","event","Comparables","GTS-Page-View","Top-Price-Table--FullCards"))):window.ga&&ga("send","event","Comparables","GTS-Page-View","Top-Price-Table")}(),$(document).on("click",".prc-grid__instl-extnsn-btn",function(e){var t=$(this),r=$(this).closest(".prc-grid__no-stck-form");if(t.hasClass("btn--dsbld"))return!1;t.html("Checking ..."),t.addClass("btn--dsbld"),t.removeClass("btn--blue"),window.open("https://chrome.google.com/webstore/detail/mysmartprice/bofbpdmkbmlancfihdncikcigpokmdda?hl=en");var s=0,o=setInterval(function(){s+=10,console.log("here"),s>120&&clearInterval(o),Modules.isInstalled("plugin_id")?(r.hide(),r.siblings(".prc-grid__no-stck-scs").fadeIn(),r.siblings(".prc-grid__no-stck-sub").hide(),clearInterval(o)):s>120&&(t.html("Add Extension"),t.removeClass("btn--dsbld"),t.addClass("btn--blue"))},1e4)});var msp_login_email=Modules.Cookie.get("msp_login_email")||"";function createSidebarPriceTable(e){"use strict";var t,r,s,o="",a="",n=$(".prc-tbl__more-info"),i=$('<div class="cols1-prdcts__view-all text-link js-inpg-link" data-href="price-table">View all stores &raquo;</div>');if(e)return e.stores.forEach(function(e,t){var r,s,n;"amazon"===e.storeName.toLowerCase()||"flipkart"===e.storeName.toLowerCase()?a+=['<div class="cols1-prdcts__ftrd" data-strname="'+(s=e).storeName+'">',"<div>",'<div class="cols1-prdcts__ftrd-stre"><img src="'+(n=s.storeName,"https://assets.mspcdn.net/q_auto/logos/partners/"+n+"_store.png")+'"></div>','<div class="cols1-prdcts__ftrd-prc">'+s.price+"</div>","</div>",'<a rel="nofollow" target="_blank" href="'+s.gtsURL+'" class="cols1-prdcts__ftrd-gts js-gts-sidebar '+s.storeName+" "+s.classes+'" data-url="'+s.gtsURL+'"></a>',"</div>"].join(""):o+=['<div class="cols1-prdcts__str">','<div class="cols1-prdcts__str-name" data-strname="'+e.storeName+'">','<img class="cols1-prdcts__str-icon" src="'+(r=e.storeName,"https://assets.mspcdn.net/msp-ui/fav-icon/"+r+".png")+'">',"<span>"+(e.storeName.charAt(0).toUpperCase()+e.storeName.slice(1))+"</span>","</div>",'<a rel="nofollow" target="_blank" href="'+e.gtsURL+'" class="cols1-prdcts__gts-btn js-gts-sidebar '+e.classes+'" data-url="'+e.gtsURL+'">',e.price+" &#10141;","</a>","</div>"].join("")}),s=$(a).sort(function(e,t){return $(e).data("strname")<$(t).data("strname")?-1:1}),t=$('<div class="sctn__inr clearfix"></div>').prepend($(o)).prepend(s),r=$('<div class="sctn cols1-prdcts clearfix"></div>').append(t),n.length&&r.append(i),r}function fetchTopPriceTableData(){if($(".prc-tbl").length){var e=$(".prc-tbl").find(".prc-tbl__row"),t=[];return e&&e.each(function(e,r){var s=$(r),o=s.find(".js-prc-tbl__gts-btn").attr("data-url"),a=new Modules.Url(o);t.push({storeName:a.getAQueryParam("store"),price:s.find(".prc-tbl__prc").text().trim(),gtsURL:o,classes:s.find(".js-prc-tbl__gts-btn").attr("class").match(/js[^\s]*/g,"").join(" ")})}),{product:$(".prdct-dtl__ttl").text()+$(".prdct-dtl__ttl-vrnt").text(),productImage:$(".prdct-dtl__img").attr("src"),stores:t}}}function updateSidebarPriceTable(){var e=createSidebarPriceTable(fetchTopPriceTableData());$(".cols1-prdcts").length&&$(".cols1-prdcts").remove(),$(".main-wrpr__cols1").prepend(e)}function jsAppend(e){var t=document.createElement("script");t.type="text/javascript",t.src="https://www.mysmartprice.com/mobile/js/"+e,document.getElementsByTagName("head")[0].appendChild(t)}function handleImageError(e){var t=$(e);t.attr("alt")&&t.replaceWith("<div class='str-name'>"+t.attr("alt")+"</div>")}function hideImage(e){$(e).hide()}if($(".prc-grid__no-stck-inpt").val(msp_login_email),function(){"use strict";var e=$(".main-wrpr"),t=e.offset().top,r=e.offset().left,s=$(".js-pdp-sidebar"),o=$(".main-wrpr__cols3").width(),a=$(".main-wrpr__cols1"),n=$(".ftr"),i=fetchTopPriceTableData();function l(){s.removeClass("main-wrpr__cols1--fixed"),s.is(":visible")&&s.hide()}i&&(a.prepend(createSidebarPriceTable(i)),s.css("left",r+o+"px"),Modules.$win.scroll(Modules.throttle(function(){var e=$(this),r=e.scrollTop(),o=e.height();r-100>t?r+o>n.offset().top?l():(s.addClass("main-wrpr__cols1--fixed"),s.is(":visible")||s.show()):l()},100)))}(),"nc"==$(".prdct-dtl__ttl").data("page-type")&&($(".prdct-dtl__str-offr li").length>2&&$(".prdct-dtl__str-offr li:nth-child(2)").append("<span class='prdct-dtl__shw-ofr js-show-offer'>Show More</span>"),Modules.$doc.on("click",".js-show-offer",function(){var e,t,r=$(this).text().trim();$(".prdct-dtl__offr-sctn").toggleClass("prdct-dtl__offr-sctn--expnd"),"show more"==r.toLowerCase()?(e="Show Less",t=$(".prdct-dtl__str-offr li").length):(e="Show More",t=2),$(this).remove(),$(".prdct-dtl__str-offr li:nth-child("+t+")").append("<span class='prdct-dtl__shw-ofr js-show-offer'>"+e+"</span>")})),Modules.$doc.on("click",".prc-grid__no-stck-sbmt",function(){var e=$(this).prev(".prc-grid__no-stck-inpt"),t=$(this).closest(".prc-grid__no-stck-form"),r=t.find(".js-vldtn-err"),s=$(this).data("capture-point");return MSP.utils.validate.form([{type:"email",inputField:e,errorNode:r}]).done(function(){$.ajax({url:"/price_alert/capture_email.php",data:{email:e.val(),mspid:PriceTable.dataPoints.mspid,capture_point:s,popupname:"pricealert"}}),t.hide(),t.siblings(".prc-grid__no-stck-scs").fadeIn(),t.siblings(".prc-grid__no-stck-sub").hide()}),!1}),$(".prdct-dtl__spfctn-more-wrpr").length&&Modules.$doc.on("click",".js-prdct-dtl__spfctn-show-more, .js-prdct-dtl__spfctn-show-less",function(){var e=$(this).hasClass("js-prdct-dtl__spfctn-show-less")?400:0;setTimeout(function(){$(".js-prdct-dtl__spfctn-show-more").toggle()},e),$(".prdct-dtl__spfctn-more-wrpr").toggleClass("prdct-dtl__spfctn-more-wrpr--show")}),Modules.$doc.on("click",".js-xpnd-prc-box-item",function(){var e=$(this),t=e.closest(".prdct-dtl__box-item");if(!t.hasClass("prdct-dtl__box-item--open")){var r=$(".prdct-dtl__box-item--open");r.length&&r.removeClass("prdct-dtl__box-item--open").find(".prdct-dtl__box-btm").slideUp("fast"),e.siblings(".prdct-dtl__box-btm").slideDown("fast"),t.addClass("prdct-dtl__box-item--open"),window.ga&&t.hasClass("prdct-dtl__box-item--ofln")&&ga("send","event","Offline","CPL Clicks Tech 1",PriceTable.dataPoints.mspid+"")}}),$(".prdct-dtl__thmbnl").on("mouseenter",function(e){var t=$(this).find(".prdct-dtl__thmbnl-img"),r=t.attr("src"),s=t.data("thumb-id");$(".prdct-dtl__img").attr("src",r).data("thumb-id",s).data("media_position",s),$(".prdct-dtl__img-wrpr").data("href",$(this).data("href")),$(".prdct-dtl__thmbnl").removeClass("prdct-dtl__thmbnl--slctd"),$(this).addClass("prdct-dtl__thmbnl--slctd")}),$(".prdct-dtl__thmbnl-wrpr").on("mouseleave",function(e){var t=$(".prdct-dtl__img").data("image");$(".prdct-dtl__img").attr("src",t)}),$(".prdct-dtl__img-wrpr, .prdct-dtl__thmbnl").on("click",function(e){var t=$(this).parent().data("video-id")?$(this).parent().data("video-id").trim():"",r=t?$(".prdct-dtl__thmbnl-wrpr .prdct-dtl__thmbnl").length-1:$(".prdct-dtl__thmbnl-wrpr .prdct-dtl__thmbnl").length,s=$(this).find("img").data("media_key"),o=$(this).find("img").data("media_position"),a=["mspid="+$(".prdct-dtl__ttl").data("mspid"),"offset_media_key="+s,"offset_position="+o,"primaryThumb="+$(".prdct-dtl__img").data("image"),"maxThumbs="+r,"thumbId="+$(".prdct-dtl__img").data("thumb-id"),"videoUrl="+t].join("&");openPopup("/mobile/"+$(".prdct-dtl__thmbnl").data("href")+"?"+a)}),Modules.$doc.on("click",".prdct-dtl__save",function(e){return loginCallback(function(){$(".prdct-dtl__save").addClass("prdct-dtl__save--svd"),$.get("/users/add_to_list.php",{mspid:PriceTable.dataPoints.mspid},function(e){})}),!1}),Modules.$doc.on("click",".js-user-lgt",function(e){$(".prdct-dtl__save").removeClass("prdct-dtl__save--svd")}),Modules.isInstalled()?($(".prdct-dtl__offr-sctn li").length||$(".prdct-dtl__offr-sctn").hide(),$(".prc-grid__upcmng-mbl").length&&($(".prc-grid__upcmng-mbl").removeClass("hide"),$(".prc-grid__instl-extnsn").addClass("hide"))):"nc"==$(".prdct-dtl__ttl").data("page-type")?"amazon"!==dataLayer[0]["min-price-store"]&&($(".prdct-dtl__coin-wrpr").after(["<div>",$(".prdct-dtl__coin-wrpr").length?"Extra <strong>upto 25% cashback</strong>":"<strong>Upto 25% cashback</strong>"," on adding our Chrome extension"," <span class='help-icon js-tltp' data-tooltip='Maximum cashback of &#8377;100'>i</span>"," <span class='text-link js-add-chrome'><strong>Know more</strong></span>","</div>"].join("")),ga("send","event","NC","nc_single_pv","js-log-nc",{nonInteraction:!0})):"amazon"===dataLayer[0]["min-price-store"]?0===$(".prdct-dtl__offr-sctn li").length&&$(".prdct-dtl__offr-sctn").remove():($(".prdct-dtl__offr-sctn").append(["<ul><li>",$(".prdct-dtl__coin-wrpr").length?"Extra <strong>upto 25% cashback</strong>":"<strong>Upto 25% cashback</strong>"," on adding our Chrome extension"," <span class='help-icon js-tltp' data-tooltip='Maximum cashback of &#8377;100'>i</span>"," <span class='text-link js-add-chrome'><strong>Know more</strong></span>","</li></ul>"].join("")),window.ga&&ga("send","event","Comparables","comparables_single_pv","js-log-comparables",{nonInteraction:!0})),$(document).on("click",".js-windows-app",function(e){return e.preventDefault(),initWindowsAppDownload($(this).data("url")),$(".prdct-dtl__box-GTS:not(.js-inpg-link), .bttn--gts").addClass("js-prc-tbl__gts-btn").removeClass("js-windows-app"),!1}),Modules.$doc.on("mousedown",".js-save-btn",function(){var e=$(this),t=e.closest(".prdct-item").data("mspid")||$(".prdct-dtl__ttl").data("mspid");return!!t&&(e.hasClass("prdct-item__save-btn--svd")||loginCallback(saveProduct,this,[t,e]),!1)}),$(".list-main").length){var ListPage={settings:{filterLength:8},controller:{init:function(){var e,t=ListPage.model.params.changes,r=ListPage.model.params.defaults,s=ListPage.model.params.current,o=(ListPage.model.params.page,ListPage.model.clipboard);ListPage.controller.getDefaults(),ListPage.controller.updatePage(),$(document).on("click",".js-load-more",function(){o.scroll.isTrigger=!0,o.scroll.isLoading=!0,o.scroll.counter++,ListPage.controller.updatePage()}),e=[],$(".list-hdr-srch").on("submit",function(){var e=$.trim($(this).find(".list-hdr-srch__fld").val());if(""!==e)t.add.ss=e;else{if(!o.prevLocalSearch)return!1;t.remove.ss=o.prevLocalSearch}return t.inFilterBox=!1,ListPage.controller.updatePage(),!1}),$(".list-hdr-srch__btn").on("click",function(){$(".list-hdr-srch").submit()}),Modules.$doc.on("click",".fltr:not([data-groupname='price']) .js-fltr-val--mltpl input:not([disabled])",function(){$(this).closest(".fltr").data("groupname"),0===e.length&&$.merge(e,$(this)),$(e).each(function(e,r){var o=s.property&&-1!==s.property.indexOf($(r).attr("value"))?"remove":"add",a=t[o];a.property=a.property||[],a.property.push($(r).attr("value"))}),e=[],t.inFilterBox=!0,ListPage.controller.updatePage(),ListPage.controller.redirectPage()}),Modules.$doc.on("click",".fltr:not([data-groupname='price']) .js-fltr-val--sngl input:not([disabled])",function(){var r=$(this).closest(".fltr").data("groupname");0===e.length&&$.merge(e,$(this).closest(".fltr").find(".fltr-val__inpt:checked")),$(e).each(function(e,o){var a=s[r]!==$(o).attr("value")?"add":"remove";t[a][r]=$(o).attr("value")}),e=[],t.inFilterBox=!0,ListPage.controller.updatePage(),ListPage.controller.redirectPage()}),Modules.$doc.on("click",".fltr[data-groupname='price'] .js-fltr-val--sngl input:not([disabled])",function(){var e=$(this).attr("value").split(";"),r=parseInt(e[0],10),o=parseInt(e[1],10),a=s.price!==$(this).attr("value")?"add":"remove";$.extend(t[a],{price:r+";"+o}),t.inFilterBox=!0,ListPage.controller.updatePage(),ListPage.controller.redirectPage()}),Modules.$doc.on("click",".fltr__cler",function(){var r=$(this).closest(".fltr"),s=r.data("groupname"),a=r.find(".fltr-val__inpt:checked");"price"===s?($.extend(t.remove,{price:o.prevMinPrice+";"+o.prevMaxPrice}),t.inFilterBox=!0,ListPage.controller.updatePage()):($.merge(e,r.find("input:checked")),a.eq(0).click()),$(".list-main__ttl, .list-info__dscrptn, .list-info__link-wrpr").hide()}),"nc"===o.pageType&&$(window).on("scroll",function(e){var t=$(document).height(),r=parseInt($(".js-prdct-cnt__rng").html().split("-")[1]),s=parseInt($(".js-prdct-cnt__totl").html());t-$(e.target).scrollTop()<1800&&o.scroll.isEnabled&&!o.scroll.isLoading&&o.scroll.counter<3&&r<s&&o.scroll.isAutoLoad&&(o.scroll.counter++,o.scroll.isTrigger=!0,o.scroll.isLoading=!0,o.isOnLoad=!1,ListPage.controller.updatePage())}),Modules.$doc.on("change",".js-fltr-prc__inpt-min, .js-fltr-prc__inpt-max",function(){$(".fltr-val__inpt[name=price]").prop("checked",!1);var e=/^[0-9]+$/,s=$(".js-fltr-prc__inpt-min"),o=$(".js-fltr-prc__inpt-max"),a=s.val(),n=o.val(),i=ListPage.model.clipboard;if(e.test(a)&&e.test(n)&&(a=parseInt(a,10))<(n=parseInt(n,10)))return a<r.priceMin&&(a=r.priceMin,s.val(a)),n>r.priceMax&&(n=r.priceMax,o.val(n)),a!==r.priceMin||n!==r.priceMax?$.extend(t.add,{price:a+";"+n}):$.extend(t.remove,{price:i.prevMinPrice+";"+i.prevMaxPrice}),t.inFilterBox=!0,void ListPage.controller.updatePage();s.val(i.prevMinPrice),o.val(i.prevMaxPrice)}),function(){var e=[];function r(){var r,s;$.each(e,function(e,o){"searchTerm"===$(o).closest(".js-fltrs-apld").data("groupname")?t.remove.s=$(o).data("value"):"localSearch"===$(o).closest(".js-fltrs-apld").data("groupname")?t.remove.ss=$(o).data("value"):"price"===$(o).closest(".js-fltrs-apld").data("groupname")?t.remove.price=$(o).data("value"):"discount"===$(o).closest(".js-fltrs-apld").data("groupname")?t.remove.discount=$(o).data("value"):(r=$(o).data("value"),s=$('.fltr-val__inpt[value="'+r+'"]').closest(".fltr-val"),t.remove.property=t.remove.property||[],t.remove.property.push(s.find("input").attr("value")?s.find("input").attr("value"):r))}),e=[],t.inFilterBox=!1,ListPage.controller.updatePage()}$(".js-fltrs-apld-wrpr1").on("click",".js-fltrs-apld__item",function(){$.merge(e,$(this)),r()}),$(".js-fltrs-apld-wrpr1").on("click",".js-fltrs-apld__lbl",function(){$.merge(e,$(this).closest(".js-fltrs-apld").find(".js-fltrs-apld__item")),r()}),$(".js-fltrs-apld-wrpr1").on("mouseover",".js-fltrs-apld__lbl",function(){$(this).closest(".js-fltrs-apld").addClass("js-fltrs-apld--strk")}).on("mouseout",".js-fltrs-apld__lbl",function(){$(this).closest(".js-fltrs-apld").removeClass("js-fltrs-apld--strk")}),$(".js-fltrs-apld-wrpr1").on("click",".js-fltrs-apld-cler",function(){$(".js-fltrs-apld__item").each(function(){$.merge(e,$(this))}),r()})}(),Modules.$doc.on("change",".js-list-sort",function(){var e=$(this).val();t.add.sort=e,t.inFilterBox=!1,ListPage.controller.updatePage()}),Modules.$doc.on("click",".js-pgntn__item",function(){if(!$(this).hasClass("pgntn__item--crnt")){var e=$(this).data("pgno");t.add.page=e,t.inFilterBox=!1,ListPage.controller.updatePage()}return!1})},getDefaults:function(){var e,t,r,s,o=ListPage.model.params.defaults,a=ListPage.model.clipboard,n=(r=$(".body-wrpr"),s={},r.data("refurb")&&(s.refurb=r.data("refurb")),r.data("category")&&"nc"!=r.data("page-type")&&(s.subcategory=r.data("category")),(r.data("start_price")||r.data("end_price"))&&(e=parseInt(r.data("start_price")||$(".js-fltr-prc__inpt-min").attr("val"),10),t=parseInt(r.data("end_price")||$(".js-fltr-prc__inpt-max").attr("val"),10),s.price=e+";"+t),r.data("brand")&&(s.property=s.property||"",s.property+=$(".fltr-val__inpt[dispname='"+r.data("brand")+"']").attr("value")+"|"),r.data("property")&&(s.property=s.property||"",s.property+=r.data("property")+"|"),r.data("properties")&&(s.property=s.property||"",s.property+=r.data("properties")),r.data("discount")&&(s.discount=r.data("discount")),s.property&&(s.property=$.grep(s.property.split("|").sort(),function(e,t){return""!==e})),s);$.extend(ListPage.model.params.page,n),$.extend(o,{priceMin:parseInt($(".fltr-prc__sldr").attr("value").split(";")[0],10),priceMax:parseInt($(".fltr-prc__sldr").attr("value").split(";")[1],10)}),$.extend(a,{prevMinPrice:o.priceMin,prevMaxPrice:o.priceMax,pageType:$(".body-wrpr").data("page-type"),pageName:$(".body-wrpr").data("page-name")})},redirectPage:function(){"nc-filter"===ListPage.model.clipboard.pageType&&(window.location.href="//mysmartprice.com/"+dataLayer[0].category+"/"+dataLayer[0].subcategory+ListPage.model.URLParams+"&ref=config_page")},updatePage:function(){var e,t=ListPage.model.params.current,r=ListPage.model.params.changes,s=(ListPage.model.params.defaults,ListPage.model.params.page),o=ListPage.model.clipboard,a=ListPage.services;if(o.isOnLoad=$.isEmptyObject(t),clearInterval(timerInterval),o.isOnLoad){var n="";n="nc"===o.pageType?window.location.href.split("?")[1]:window.location.hash.replace(/</g,"&lt;").replace(/>/g,"&gt;"),$.extend(t,a.filterURL.toParams(n)),e=0,$.each(t,function(){e++}),0!==e&&"1"!==t.ql||($.each(s,function(e,r){$.isArray(r)?(t[e]=$.isArray(t[e])?t[e]:[],$.each(r,function(r,s){-1===t[e].indexOf(s)&&t[e].push(s)})):t[e]=r}),delete t.ql),$.each(t,function(e){r.add[e]=t[e]}),t.subcategory=t.subcategory||s.subcategory,o.isLoadParamsEqualtoPageParams=ListPage.services.filterURL.fromParams(t)===ListPage.services.filterURL.fromParams(s),"nc"===o.pageType&&""===ListPage.services.filterURL.fromParams(t)&&(o.isLoadParamsEqualtoPageParams=!1),ListPage.view.init()}else"nc"!==o.pageType||t.subcategory||(r.add.subcategory=$(".body-wrpr").data("category")),$.each(r.add,function(e){"property"===e?$.isArray(r.add.property)&&(t.property=$.isArray(t.property)?t.property:[],$.merge(t.property,r.add.property)):t[e]=r.add[e]}),$.each(r.remove,function(e){var s;"property"===e?($.each(r.remove.property,function(e,r){s=t.property.indexOf(r),t.property.splice(s,1)}),0===t.property.length&&delete t.property):delete t[e]});ListPage.model.URLParams=ListPage.services.filterURL.fromParams(t),"nc-filter"!==o.pageType&&ListPage.view.render()}},model:{URLParams:"",params:{current:{},changes:{add:{},remove:{}},page:{},defaults:{}},clipboard:{prevMinPrice:"",prevMaxPrice:"",slider:{},prevLocalSearch:"",pageType:"",pageName:"",scroll:{isAutoLoad:!0,isEnabled:!0,counter:0,isLoading:!1,isTrigger:!1}}},services:{filterURL:{toParams:function(e){var t="nc"==ListPage.model.pageType?"?":"#",r={},s=decodeURIComponent(e).replace(t,"").split("&");return""!==s[0]&&($.each(s,function(e,t){r[t.split("=")[0]]=t.split("=")[1]}),"property"in r&&(r.property=$.grep(r.property.split("|").sort(),function(e,t){return""!==e})),r.startinr===r.priceMin&&r.endinr===r.priceMax||(r.price=parseInt(r.startinr,10)+";"+parseInt(r.endinr,10)),delete r.startinr,delete r.endinr),r},fromParams:function(e){var t=$(".body-wrpr").data("page-type"),r="nc"==t||"nc-filter"==t?"?":"#",s=[];return $.each(e,function(r){e[r]&&("nc"==t&&"subcategory"===r?s.unshift(r+"="+e[r]):"price"===r?(s.push("startinr="+e[r].split(";")[0]),s.push("endinr="+e[r].split(";")[1])):"property"===r?s.push(r+"="+e[r].join("|")):s.push(r+"="+e[r]))}),s.length>0?r+s.join("&"):""}},fetch:{apiQuery:function(e){var t="nc"===ListPage.model.clipboard.pageType?t=$(".body-wrpr").data("category"):e.subcategory;return["subcategory="+t,e.category?"&category="+e.category:"",e.refurb?"&refurb="+e.refurb:"",e.s?"&s="+e.s:"",e.property?"&property="+e.property.join("|"):"",e.price?"&startinr="+e.price.split(";")[0]:"",e.price?"&endinr="+e.price.split(";")[1]:"",e.sort?"&sort="+e.sort:"",e.ss?"&ss="+e.ss:"",e.page?"&page="+e.page:"",e.start?"&start="+e.start:"",e.rows?"&rows="+e.rows:"",e.discount?"&discount="+e.discount:"",e.pageName?"&pageName="+e.pageName:"",e.source?"&source="+url.getAQueryParam("source"):""].join("")},productList:Modules.memoize(function(e){var t=$.Deferred(),r=this.apiQuery(e),s=ListPage.services.fetch.productList;s.XHR&&s.XHR.abort();var o="";return"nc"===ListPage.model.clipboard.pageType?(o="/fashion/filters/filter_get_redesign?"+r,window.location.href.indexOf("bestsellers")>-1&&(o="/fashion/bestsellers_filters/filter_get_redesign?"+r)):(o=($(".list-main").length?"/msp/processes/property/api/msp_get_html_for_property_new.php?":"/msp/search/msp_search_new.php?")+r,log_data("property_info",{subcategory:e.subcategory,property:r},o)),1==e.refurb&&(o=($(".list-main").length?"/msp/processes/property/api/msp_get_html_for_property_refurb.php?":"/msp/search/msp_search_new.php?")+r),s.XHR=$.ajax({url:o}).done(function(e){t.resolve(e)}).fail(function(e){t.reject(e)}),t.promise()},{cacheLimit:15}),hourlyDeals:Modules.memoize(function(e){var t=$.Deferred(),r=this.apiQuery(e),s=ListPage.services.fetch.hourlyDeals;return s.XHR&&s.XHR.abort(),s.XHR=$.ajax({url:"/msp/autodeals/hourly_deals.php?"+r}).done(function(e){t.resolve(e)}).fail(function(e){t.reject(e)}),t.promise()},{cacheLimit:15})}},view:{init:function(){var e=ListPage.model.params.current,t=ListPage.model.params.defaults;ListPage.view.filterPlugins.init({priceSlider:{min:e.price?e.price.split(";")[0]:t.priceMin,max:e.price?e.price.split(";")[1]:t.priceMax}})},render:function(){var e,t,r,s,o,a,n=ListPage.model.params.current,i=ListPage.model.params.changes,l=ListPage.model.params.defaults,d=ListPage.model.params.page,p=ListPage.model.clipboard,c=ListPage.view.filterPlugins,u=ListPage.model.URLParams;"nc"===p.pageType?(""===u&&(u=window.location.pathname),window.history.pushState("","Filters",u)):"nc-filter"===p.pageType||(window.location.hash=ListPage.model.URLParams),p.isOnLoad&&$(".list-main__ttl, .list-info__dscrptn, .list-info__link-wrpr").show(),ListPage.services.filterURL.fromParams(n)!==ListPage.services.filterURL.fromParams(d)&&($(".list-main__ttl, .list-info__dscrptn, .list-info__link-wrpr").hide(),$(".js-list-ttl").html($(".list-info__ttl").html())),"nc"===p.pageType&&($(".body-wrpr").data("indexed")?$(".list-main__ttl, .list-info__dscrptn, .list-info__link-wrpr").show():$(".list-main__ttl, .list-info__dscrptn, .list-info__link-wrpr").hide()),t=$.extend({},ListPage.model.params.changes),r=$.extend({},ListPage.model.params.current),s=ListPage.view.components.loadingMask(),o=ListPage.view.components.loadingMaskSmall(),a=+new Date,"nc"===p.pageType&&(p.scroll.isLoading||(p.scroll.counter=0),$.extend(r,{start:24*p.scroll.counter,rows:24,pageName:p.pageName})),"nc"===p.pageType&&p.isOnLoad||0!==$(".body-wrpr").length&&(p.isOnLoad&&p.isLoadParamsEqualtoPageParams?(p.scroll.isLoading=!1,$(".js-fltr-ldng-mask").remove(),p.isLoadParamsEqualtoPageParams=!1):(p.scroll.isLoading||"search"==p.pageType?$(".js-prdct-grid-wrpr").append(o):$(".js-prdct-grid-wrpr").append(s),$(".js-load-more").hide(),ListPage.services.fetch.productList(r).done(function(e){var r,s,o=e.split("//&//#"),a=ListPage.view.filterPlugins;if($(".prdct-grid__no-data").remove(),ListPage.model.params.current.page=void 0,t.inFilterBox){var n=$(o[0]),i=[];r=[],$.each(["add","remove"],function(e,s){"price"in t[s]&&r.push("price"),"property"in t[s]&&$.each(t[s].property,function(e,t){var s=$(".fltr-val[value='"+t+"']").closest(".fltr").data("groupname");r.push(s)})}),s=r,n.find(".fltr").filter(function(){return-1===s.indexOf($(this).data("groupname"))}).each(function(){var e=$(this),t=e.data("groupname"),r=$(".fltr[data-groupname='"+t+"']");i.push(t),r.replaceWith(e)}),a.init({priceSlider:{min:p.slider.priceMin,max:p.slider.priceMax}},i)}else $(".fltr-wrpr1").html(o[0]),a.init({priceSlider:{min:p.slider.priceMin,max:p.slider.priceMax}});if(!p.isLoadParamsEqualtoPageParams||p.scroll.isLoading){"nc"===p.pageType?($(".js-pgntn-cnt-ajax, .js-prdct-cnt-ajax").remove(),p.scroll.isLoading?$(".js-prdct-grid-wrpr").append(o[1]):$(".js-prdct-grid-wrpr").html(o[1]),$(".js-pgntn-cnt__crnt").text($(".js-pgntn-cnt-ajax").data("current")),$(".js-pgntn-cnt__totl").text($(".js-pgntn-cnt-ajax").data("total"))):$(".js-prdct-grid-wrpr").html(o[1]);var l=$(".js-prdct-cnt-ajax").data("count"),d=$(".js-prdct-cnt-ajax").data("total");l&&l.split("-")[1]>=d?$(".js-load-more").hide():$(".js-load-more").show(),$(".js-prdct-cnt__rng").text(l),$(".js-prdct-cnt__totl").text(d)}else p.isLoadParamsEqualtoPageParams=!1;"search"===ListPage.model.clipboard.pageType&&$(".srch-fdbck").show(),lazyLoadImages(),lazyLoadBgImages(),attachFilterScroll()}).always(function(){var e=+new Date-a,t=e<250?250-e:0;ProductList.initGrid(),setTimeout(function(){$(".ldng-mask-wrpr").remove(),$(".js-fltr-ldng-mask").remove()},t),p.scroll.isLoading=!1}))),$(".js-hrly-deals-grid").length&&function e(){var t=$(".js-hrly-deals-grid");ListPage.services.fetch.hourlyDeals(r).done(function(r){var s,o,a,n,i,l=r.split("//&//#")[0],d=r.split("//&//#")[1];function p(e){return e=parseInt(e,10),isNaN(e)||e<0||e>59?59:e}t.find(".sctn__inr").html(d),t.find(".js-hrly-deals__cntdwn-wrpr").html(l),$(d).filter(".prdct-item-with-bdg").length>2?t.find(".sctn__view-all-link").show():t.find(".sctn__view-all-link").hide(),(s=t.find(".cntdwn")).length&&(o=p(s.find(".cntdwn__mins").data("minutes")),a=p(s.find(".cntdwn__scnds").data("seconds")),n=60*o+a,i=parseInt(+new Date/1e3,10),0!==o||0!==a?timerInterval=setInterval(function t(){var r=Math.floor(+new Date/1e3)-i,o=Math.floor((n-r)/60),a=(n-r)%60;return a<=0&&(a=59,o<=0)?(clearInterval(timerInterval),void e()):(s.find(".cntdwn__mins").text(o<10?"0"+o:o),s.find(".cntdwn__scnds").text(a<10?"0"+a:a),t)}(),1e3):(s.hide(),t.find(".hrly-deals-expry-lbl").hide()))}).fail(function(){t.find(".cntdwn").hide(),t.find(".hrly-deals-expry-lbl").hide()})}(),(e={add:function(){var t,r=ListPage.view.components.appliedFilter;$(".fltr__cler").removeClass("fltr__cler--show"),$.each(e.add.queue,function(e,s){"unitValue"in s&&(((t=$(".fltr[data-groupname='"+s.groupName+"'] .fltr-val__inpt")).closest(".fltr-val").hasClass("js-fltr-val--sngl")||"localSearch"==s.groupName||"price"==s.groupName)&&$(".js-fltrs-apld[data-groupname='"+s.groupName+"']").remove(),t.filter("[value='"+s.unitValue+"']").prop("checked",!0),setTimeout(function(){$(".fltr[data-groupname='"+s.groupName+"']").find(".fltr__cler").addClass("fltr__cler--show")},0)),"price"==s.groupName&&($(".fltr-prc__sldr").slider("values",[c.priceSlider.priceToRange(s.unitValue.split(";")[0]),c.priceSlider.priceToRange(s.unitValue.split(";")[1])]),$(".js-fltr-prc__inpt-min").val(s.unitValue.split(";")[0]),$(".js-fltr-prc__inpt-max").val(s.unitValue.split(";")[1])),0!==$(".js-fltrs-apld[data-groupname='"+s.groupName+"']").length?$(".js-fltrs-apld[data-groupname='"+s.groupName+"']").append(r.unit(s)):$(".js-fltrs-apld-wrpr").append(r.group(s))}),0!==e.add.queue.length&&($(".js-fltrs-apld-wrpr1").show(),function(){if("nc"!==p.pageType){var e=$(".body-wrpr").data("listname"),t=$(".body-wrpr").data("listcode"),r=encodeURIComponent(window.location.hash),s="../../promotions/savesearchpopup.php?subcatname="+encodeURIComponent(e)+"&subcatcode="+encodeURIComponent(t)+"&filterhash="+r;$(".list-hdr__save").data("href",s).show()}}())},remove:function(){$.each(e.remove.queue,function(e,t){var r=$(".js-fltrs-apld[data-groupname='"+t.groupName+"']"),s=r.find(".js-fltrs-apld__item[data-value='"+t.unitValue+"']"),o=$(".fltr-val__inpt[value='"+t.unitValue+"']");1===r.find(".js-fltrs-apld__item").length?r.remove():s.remove(),setTimeout(function(){o.prop("checked",!1),0===o.closest(".fltr").find(".fltr-val__inpt:checked").length&&o.closest(".fltr").find(".fltr__cler").removeClass("fltr__cler--show")},0),"price"===t.groupName&&($(".fltr-prc__sldr").slider("values",[0,200]),$(".js-fltr-prc__inpt-min").val(l.priceMin),$(".js-fltr-prc__inpt-max").val(l.priceMax))}),0===$(".js-fltrs-apld").length&&($(".js-fltrs-apld-wrpr1").hide(),$(".list-hdr__save").hide())}}).add.queue=[],e.remove.queue=[],$.each(["add","remove"],function(t,r){var s,o,a,d;if("s"in i[r]&&($(".js-hdr-srch").val(i[r].s),e[r].queue.push({unitValue:i[r].s,unitLabel:i[r].s,groupName:"searchTerm",groupLabel:"Search"})),"sort"in i[r]&&$('.js-list-sort option[value="'+i[r].sort+'"]').attr("selected","selected"),"ss"in i[r]&&($(".list-hdr-srch__fld").val(n.ss),e[r].queue.push({unitValue:i[r].ss,unitLabel:i[r].ss,groupName:"localSearch",groupLabel:"List Search"})),"price"in i[r]&&(s=i[r].price.split(";")[0],o=i[r].price.split(";")[1],a=i[r].price,d=s.toLocaleString()+"-"+o.toLocaleString(),e[r].queue.push({unitValue:a,unitLabel:d,groupName:"price",groupLabel:"price"}),"add"===r?(p.slider.priceMin=s,p.slider.priceMax=o):(p.slider.priceMin=l.priceMin,p.slider.priceMax=l.priceMax)),"property"in i[r]&&$.each(i[r].property,function(t,s){var o=$('.fltr-val__inpt[value="'+s+'"]'),a=$('.js-fltrs-apld__item[data-value="'+s+'"]'),n=s,i=o.attr("dispname"),l=o.closest(".fltr").data("groupname")?o.closest(".fltr").data("groupname"):a.closest(".js-fltrs-apld").data("groupname"),d=$.trim(o.closest(".fltr").find(".fltr__ttl").text());e[r].queue.push({unitValue:n,unitLabel:i,groupName:l,groupLabel:d})}),"discount"in i[r]){var c=i[r].discount,u=i[r].discount.split(";")[0]+"% - "+i[r].discount.split(";")[1]+"%";e[r].queue.push({unitValue:c,unitLabel:u,groupName:"discount",groupLabel:"discount"})}}),$.each(["add","remove"],function(t,r){e[r].queue.length&&e[r]()}),$.extend(p,{prevMinPrice:n.price?n.price.split(";")[0]:l.minPrice,prevMaxPrice:n.price?n.price.split(";")[1]:l.maxPrice,prevLocalSearch:n.ss||""}),$.extend(i,{add:{},remove:{}})},filterPlugins:{init:function(e,t){ListPage.view.filterPlugins.nanoScrollbarInit(t),ListPage.view.filterPlugins.priceSlider.init(e.priceSlider,t)},priceSlider:{init:function(e,t){var r=e.min,s=e.max,o=r?this.priceToRange(r):0,a=s?this.priceToRange(s):200,n=ListPage.model.params.changes,i=ListPage.view.filterPlugins;$.isArray(t)&&-1===t.indexOf("price")||($(".fltr-prc__sldr").slider({range:!0,min:0,max:200,values:[o||0,a||200],step:1,animate:!0,slide:i.priceSlider.callback,stop:function(e,t){var r,s;0===t.values[0]&&200===t.values[1]?(r=ListPage.model.clipboard.prevMinPrice,s=ListPage.model.clipboard.prevMaxPrice,n.remove.price=r+";"+s):(r=i.priceSlider.rangeToPrice(t.values[0]),s=i.priceSlider.rangeToPrice(t.values[1]),n.add.price=r+";"+s),n.inFilterBox=!0,ListPage.controller.updatePage(),$(".fltr-val__inpt:checked").prop("checked",!1),$(".fltr-prc__sldr").slider("values",[t.values[0],t.values[1]])}}),(r||s)&&($(".js-fltr-prc__inpt-min").val(r||ListPage.model.params.defaults.price.split(";")[0]),$(".js-fltr-prc__inpt-max").val(s||ListPage.model.params.defaults.price.split(";")[1])))},rangeToPrice:function(e){var t=ListPage.model.params.defaults.priceMin,r=ListPage.model.params.defaults.priceMax,s=Math.exp(Math.log(r/t)/200),o=t*Math.pow(s,e),a=Math.pow(10,Math.floor(Math.log(o-o/s)/Math.log(10)));return o=Math.ceil(o/a)*a,0===e||o<t?t:200==e||o>r?r:o},priceToRange:function(e){return function e(t,r,s,o){if(e.old=e.current,e.current=Math.floor((s+o)/2),e.old===e.current)return e.current;if(t>r(e.current))s=e.current;else{if(!(t<r(e.current)))return e.current;o=e.current}return e(t,r,s,o)}(e,ListPage.view.filterPlugins.priceSlider.rangeToPrice,0,200)},callback:function(e,t){var r,s;if(t.values[0]+1>=t.values[1])return!1;r=ListPage.view.filterPlugins.priceSlider.rangeToPrice(t.values[0]),s=ListPage.view.filterPlugins.priceSlider.rangeToPrice(t.values[1]),$(".js-fltr-prc__inpt-min").val(r),$(".js-fltr-prc__inpt-max").val(s)}},nanoScrollbarInit:function(e){var t;(t=e?$(".fltr-val-wrpr.nano").filter(function(){return-1!==e.indexOf($(this).closest(".fltr").data("groupname"))}):$(".fltr-val-wrpr.nano")).each(function(){var e;$filteritem=$(".fltr-val",$(this)),$filteritem.length<=ListPage.settings.filterLength&&(e=0,$filteritem.each(function(){e+=$(this).outerHeight(!0)}),e<224&&$(this).css("height",e+"px"))}),t.nanoScroller({alwaysVisible:!0})}},components:{appliedFilter:{group:function(e){return['<div class="js-fltrs-apld" data-groupname="'+e.groupName+'">','<div class="js-fltrs-apld__lbl">'+e.groupLabel+":</div>",this.unit(e),"</div>"].join("")},unit:function(e){return['<div class="js-fltrs-apld__item" data-value="'+e.unitValue+'">','<span class="js-fltrs-apld__item-label">'+e.unitLabel+"</span>",'<img class="js-fltrs-apld__item-cler" src="https://assets.mspcdn.net/msp-ui/icons/cross-grey-small.png"/>',"</div>"].join("")}},loadingMask:function(){return['<div class="js-fltr-ldng-mask">','<div class="ldr">','<div class="ldr__crcl"></div>','<div class="ldr__text" style="">Loading...</div> ',"</div>","</div>"].join("")},loadingMaskSmall:function(){return['<div class="ldng-mask-wrpr">','<div class="js-fltr-ldng-mask">','<div class="ldr ldr--sml">','<div class="ldr__crcl"></div>','<div class="ldr__text" style="">Loading...</div> ',"</div>","</div>","</div>"].join("")}}}};$("#mobilefilterwrapper").length?$.ajax({url:"/msp/prop_filters/mobile-new.html"}).done(function(e){var t=e.split("//&//#");$("#mobilefilterwrapper").html(t[0]),ListPage.controller.init()}):ListPage.controller.init();var ProductList={initGrid:function(){"nc-filter"!==ListPage.model.clipboard.pageType&&("large"===localStorage.getItem("gridType")?this.setGridType("large"):"small"===localStorage.getItem("gridType")&&this.setGridType("small"),Modules.$doc.on("click",".js-list-hdr-view",function(){$(this).hasClass("list-hdr-view__prdct-l")?ProductList.setGridType("large"):ProductList.setGridType("small")}))},setGridType:function(e){$(".list-hdr-view__prdct-l").removeClass("list-hdr-view__prdct-l--slctd"),$(".list-hdr-view__prdct-s").removeClass("list-hdr-view__prdct-s--slctd"),"large"===e?($(".prdct-grid").addClass("prdct-grid--prdct-l"),$(".prdct-grid").removeClass("prdct-grid--prdct-s"),$(".list-hdr-view__prdct-l").addClass("list-hdr-view__prdct-l--slctd"),localStorage.setItem("gridType","large")):($(".prdct-grid").addClass("prdct-grid--prdct-s"),$(".prdct-grid").removeClass("prdct-grid--prdct-l"),$(".list-hdr-view__prdct-s").addClass("list-hdr-view__prdct-s--slctd"),localStorage.setItem("gridType","small"))}};ProductList.initGrid(),$(document).on("change",".fltr-val__inpt",function(){var e=$(this).parents(".fltr").data("groupname"),t=$(this).next(".fltr-val__text").children(".fltr-val__lbl").text().trim();window.ga&&ga("send","event","listpage_filters",e,t),$(".list-main__ttl, .list-info__dscrptn, .list-info__link-wrpr").hide()}),$(".fltr-wrpr1").on("keyup",".fltr-srch__fld",function(){var e=$.trim($(this).val()),t=$(this).closest(".fltr");""===e?(t.find(".fltr-val").show(),t.find(".fltr-srch__icon--srch").removeClass("fltr-srch__icon--hide"),t.find(".fltr-srch__icon--cler").addClass("fltr-srch__icon--hide"),t.find(".nano").nanoScroller()):(t.find(".fltr-val").hide(),t.find(".fltr-srch__icon--srch").addClass("fltr-srch__icon--hide"),t.find(".fltr-srch__icon--cler").removeClass("fltr-srch__icon--hide"),t.find(".fltr-val").filter(function(){var t=$.trim($(this).text()).toLowerCase(),r=t.indexOf(e),s=!1;return 0===r?s=!0:r>0&&" "===t.toLowerCase().charAt(r-1)&&(s=!0),s}).show(),t.find(".nano").nanoScroller())}),$(".fltr-wrpr1").on("click",".js-fltr-srch__cler",function(){var e=$(this).closest(".fltr");e.find(".fltr-srch__fld").val(""),e.find(".fltr-srch__icon").toggleClass("fltr-srch__icon--hide"),e.find(".fltr-val").show(),e.find(".nano").nanoScroller()}),function(){var e=$(".list-main"),t=$(".fltr-wrpr1");e.length&&(e.append(['<span class="btn btn--s show-fltr js-show-fltr js-inpg-link" data-href="list-filter">',"Show Filters","</span>"].join("")),t.attr("data-id","list-filter"),window.onscroll=function(r){var s=$(".js-show-fltr"),o=t.offset().top+t.outerHeight(),a=Modules.$win.height();scrolledBottom=Modules.$win.scrollTop()+Modules.$win.height(),listMainBottom=e.offset().top+e.outerHeight(),scrolledBottom<=o+a?s.filter(":visible").length&&s.hide(0):(s.show(0),scrolledBottom>listMainBottom?s.removeClass("fixed").addClass("abslt"):s.removeClass("abslt").addClass("fixed").css("left",t.offset().left+"px"))})}()}"/"===location.pathname&&Modules.$doc.on("click",".mCycleItemWrapper:first-child",function(){window.ga&&ga("send","event","HomePage","promo-bnr-click","first-bnr")});var timeout,searchTrigger,QnASearch={settings:{mspId:function(){return"single"===dataLayer[0].pagetype?dataLayer[0].mspid&&dataLayer[0].mspid:$(".js-prdct-ttl").data("mspid")||"qna_single"===dataLayer[0].pagetype?dataLayer[0].mspid&&dataLayer[0].mspid:"qna_list"===dataLayer[0].pagetype?dataLayer[0].mspid&&dataLayer[0].mspid:void 0},qnaApi:function(){return"/review/qna/search/?mspid="+QnASearch.settings.mspId()},inputSelector:function(){return"single"===dataLayer[0].pagetype?".js-qstn-txt":"qna_single"===dataLayer[0].pagetype?".js-qstn-txt":"qna_list"===dataLayer[0].pagetype?".js-qstn-txt":void 0},questionCount:5,answerCount:3,weightage:{fullMatch:2,partialMatch:1,uniqueMatch:3,repeatMatch:2,sequence:1.5,caseMatch:2,minRelevance:.6},stopWords:["i","the","is","a","all","am","an","and","are","as","at","be","by","in","into","it","its","my","no","nor","not","of","on","or","that","then","this","to","was","were","does","has","have","had","when","where","which","what","how","do","why","who","whose","if","both","we","will","with","without"]},data:{searchWordsArr:[],sDataJson:{},sequence:[],qnaJson:""},buildFunction:{init:function(e){return QnASearch.data.searchWordsArr=QnASearch.buildFunction.getJson(e).done(function(e){return QnASearch.data.qnaJson=e,QnASearch.data.sDataJson=e,QnASearch.buildFunction.splittingInWordsArray(QnASearch.data.qnaJson)})},getJson:function(e){var t=$.Deferred();return $.ajax({url:e,dataType:"json"}).done(function(e){return mData=e,t.resolve(e)}),t.promise()},keywordArrayToJson:function(e,t,r,s,o,a){for(var n=0;n<r.length&&""!=r[n];n++)t.push({word:r[n],questionId:e,answerWordIndex:a,valueFactor:s,sentenceIndex:n,searchArrayIndex:t.length});return t},splittingInWordsArray:function(e){var t,r=[];for(id in e){var s=e[id].question.replace(/[^a-zA-Z0-9' ]/g,"").split(" ").filter(function(){return!0});t=id+"-0",r=QnASearch.buildFunction.keywordArrayToJson(id,r,s,.2,"question",t);for(var o=0;o<e[id].answer.length;o++){var a=e[id].answer[o].replace(/[^a-zA-Z0-9' ]/g,"").split(" ").filter(function(){return!0});t=id+"-"+o,r=QnASearch.buildFunction.keywordArrayToJson(id,r,a,.2,"answer",t),QnASearch.generalFunction.wipeAnArray(a),a=[]}s=[]}return r=QnASearch.generalFunction.sortedByWord(r),QnASearch.data.builtData=r,r}},domObject:{$loader:'<div class="ldr__ovrly" style="height:50px;position: relative; overflow: hidden;">                    <div class="ldr ldr--s">                        <div class="ldr__crcl"></div>                    </div>                </div>'},generalFunction:{sortedByWord:function(e){return e.sort(function(e,t){var r=e.word.toLowerCase().toString(),s=t.word.toLowerCase().toString();return r>s?1:r<s?-1:0}),e},sortQuestionsAns:function(e){return e.sort(function(e,t){return t.matchScore-e.matchScore}),e},wipeAnArray:function(e){return[]},highlightText:function(e,t){for(var r=0;r<t.length;r++)e.highlight(t[r])},keywordCleaner:function(e){if(!e)return!1;var t=QnASearch.settings.stopWords;return e.replace(/[.\,\/#!$%\^&\*;:{}=\-_`~()?]/g," ").replace(/[\s]+/g," ").split(" ").reduce(function(e,r){return(r.length>0||r===r.toUpperCase()&&r.length>1)&&-1==t.indexOf(r.toLowerCase())&&e.push(r),e},[])}},binarySearch:function(e,t,r){if(void 0===e||e.length<=0||void 0===t||""===t)return-1;var s=e,o=t,a=[],n=s.length,i=n-1,l=0,d=0;function p(e,t){return e&&t.word&&"string"==typeof t.word?t.word.toLowerCase():t.word}for(o=r&&o&&"string"==typeof o?o.toLowerCase():o;d<=i;){if(p(r,s[l=parseInt(d+(i-d)/2,10)]).indexOf(o)>-1){if(a.push(l),a.length>n)return a;if(s[l+1]&&p(r,s[l+1]).indexOf(o)>-1)for(var c=1;c<n&&(!s[l+1]||-1!=p(r,s[l+c]).indexOf(o));c++)a.push(l+c);if(a.length>n)return a;if(s[l-1]&&p(r,s[l-1]).indexOf(o)>-1)for(c=1;c<n&&-1!=p(r,s[l-c]).indexOf(o);c++)a.push(l-c);return a}o>p(r,s[l])?d=l+1:i=l-1}return-1},getSearchResult:function(e,t){t=t;var r,s=e,o=[];if(s.length>0)for(var a=0,n=s.length;a<n;a++)termArrIndex=QnASearch.binarySearch(t,s[a],!0,"multiple"),-1!==termArrIndex&&termArrIndex.length>=1&&$.each(termArrIndex,function(e,n){var i=t[n].questionId,l=t[n].answerWordIndex;QnASearch.data.sDataJson[i].wordOccurrence?QnASearch.data.sDataJson[i].wordOccurrence.indexOf(t[n].word)>-1?(QnASearch.data.sDataJson[i].wordOccurrence.push(t[n].word),r=2):(QnASearch.data.sDataJson[i].wordOccurrence.push(t[n].word),r=1):(QnASearch.data.sDataJson[i].wordOccurrence=[],QnASearch.data.sDataJson[i].wordOccurrence.push(t[n].word),r=1);var d=0;if(r>1?d+=parseInt(QnASearch.settings.weightage.repeatMatch):1===r&&(d+=parseInt(QnASearch.settings.weightage.uniqueMatch)),s[a].toLowerCase()===t[n].word.toLowerCase()?d*=QnASearch.settings.weightage.fullMatch:d*=QnASearch.settings.weightage.partialMatch,s[a]===t[n].word&&(d*=QnASearch.settings.weightage.caseMatch),0===QnASearch.data.sequence.length&&s[a].toLowerCase()===t[n].word.toLowerCase()?QnASearch.data.sequence.push(t[n].searchArrayIndex):QnASearch.data.sequence.indexOf(t[n].searchArrayIndex-1)>-1?d*=QnASearch.settings.weightage.sequence:QnASearch.data.sequence.push(t[n].searchArrayIndex),o.length<1)o.push({questionId:i,answerWordIndex:l,matchScore:d});else{for(var p=!1,c=0,u=o.length;c<u;c++)o[c].questionId===i&&(o[c].matchScore+=parseInt(d),o[c].answerWordIndex+=o[c].answerWordIndex.indexOf(l)>-1?"":"|"+l,p=!0);p||o.push({questionId:i,answerWordIndex:l,matchScore:d})}});for(var i=0,l=o.length;i<l;i++)delete QnASearch.data.sDataJson[o[i].questionId].wordOccurrence;return QnASearch.data.sequence=QnASearch.generalFunction.wipeAnArray(QnASearch.data.sequence),o},processSearch:function(e){var t,r,s=QnASearch.data.builtData;if(e.length<1)return!1;var o=(r=(t=QnASearch.getSearchResult(e,s)).length&&QnASearch.generalFunction.sortQuestionsAns(t)).length&&QnASearch.searchResultJson(r),a=o&&QnASearch.domFunction.createHtml(o);return isAppend=QnASearch.domFunction.appendDom(a,e),QnASearch.domFunction.removeDom(isAppend,e),a},domFunction:{rsltStateMsg:function(e){return'<div class="" style="display:block;text-align:center; margin-top: 30px; margin-bottom: 30px;">                 <span class="rslt__state" style="line-height: 20px; font-size:18px; margin-right: 15px;"> '+e+'</span>                <div style="padding: 8px 36px" class="bttn bttn--blue ask-qstn--wdgt js-ask-qstn--wdgt js-popup-trgt" href="/review/qna/popup/ask_a_question.php?source=desktop_q_list&amp;mspid='+$(".prdct-dtl__ttl").data("mspid")+'">Ask a Question</div>            </div>'},createHtml:function(e){var t,r,s,o="",a="";for(id in e){if(r=(t=e[id].q_id).replace(/[^0-9]/g,""),a+=' <div class="qna__answr-wrpr">',(s=e[id].answer.length)>0)for(var n=0;n<e[id].answer.length;n++)a+='<div class="qna__answr clearfix" style="display:block">'+e[id].answer[n]+"</div>";else a+='<div class="qna__answr clearfix"><span  style="opacity: 0.3;">This question has no answer yet </span><span class="js-qna__rqst-answr qstn-answr__flw" data-qid="'+r+'"><span class="flw__lbl js-flw__lbl">Request Answer </span></span></div>';a+="</div>";var i='<div class="qna__item js-qna__item clearfix" data-qid="'+t+'" data-ans-count="'+s+'">                   <a class="qna__item--href js-qna__item--href" target="_blank" href="/review/qna/redesign/single.php?ref=qna-search&q_id='+r+'"> <div class="qna__qstn">'+e[id].question+"</div>                       "+a+"                   </a></div>";o+=i,a=question=i=""}return o},removeDom:function(e,t){var r=QnASearch.domFunction.rsltStateMsg("No results found.");return["single","qna_single","qna_list"].indexOf(dataLayer[0].pagetype)>=0&&(!e&&t?($(".ldr__ovrly").remove(),$(".qna__body--search").html(r),$(".qna > .js-open-link").hide()):e||t||($(".ldr__ovrly, .js-ldr--stts").remove(),$(".qna__body--search").html(""),$(".qna__body").css("display","block"),$(".qna > .js-open-link").show(),$(".js-qna__srch-kywrds").show()),!0)},appendDom:function(e,t){var r,s=QnASearch.domFunction.rsltStateMsg("Didn't find what you're looking for? ");return!!e&&(["single","qna_single","qna_list"].indexOf(dataLayer[0].pagetype)>=0&&(r=$(".qna__body--search"),$(".ldr__ovrly, .qna__body").css("display","none")),r.append(e),QnASearch.generalFunction.highlightText(r,t),r.prepend(s),!0)},loaderHandler:function(){["single","qna_single","qna_list"].indexOf(dataLayer[0].pagetype)>=0&&($(".qna__body").css("display","none"),$(".qna__body--search").html(""),$(".qna__body--search").append(QnASearch.domObject.$loader),$(".ldr__ovrly").css({display:"block"}))}},searchResultJson:function(e){for(var t,r,s,o,a=e.length>QnASearch.settings.questionCount?QnASearch.settings.questionCount:e.length,n={},i=[],l=0;l<a;l++){s=e[l].questionId,r=e[l].matchScore,s.replace(/[^0-9]/g,""),t=QnASearch.data.sDataJson[s].question;var d=e[l].answerWordIndex?e[l].answerWordIndex.split("|"):0;ansGroupLength=d.length>QnASearch.settings.answerCount?QnASearch.settings.answerCount:d.length;for(var p=0;p<ansGroupLength;p++)o=d[p]?d[p].split("-"):"",i.push(QnASearch.data.sDataJson[s].answer[o[1]]);n[l]={},n[l].question=t,n[l].answer=void 0===i[0]?[]:i,n[l].q_id=s,n[l].matchScore=r,i=[]}return n},eventFunction:{searchInput:function(e){var t,r=e.val().trim();t=QnASearch.generalFunction.keywordCleaner(r),dom=QnASearch.processSearch(t)}}};$(document).on("input",QnASearch.settings.inputSelector(),function(e){if(QnASearch.settings.inputSelector()){var t=$(this);QnASearch.data.searchWordsArr.length<1?QnASearch.data.searchWordsArr=QnASearch.buildFunction.init(QnASearch.settings.qnaApi()):(QnASearch.domFunction.loaderHandler(),clearTimeout(timeout),timeout=setTimeout(function(){QnASearch.eventFunction.searchInput(t)},200)),window.ga&&!searchTrigger&&(ga("send","event","QNA","search",QnASearch.settings.inputSelector()),searchTrigger=!0)}}),jQuery.fn.highlight=function(e){return this.length&&e&&e.length?this.each(function(){!function e(t,r){var s=0;if(3==t.nodeType){var o=t.data.toUpperCase().indexOf(r);if((o-=t.data.substr(0,o).toUpperCase().length-t.data.substr(0,o).length)>=0){var a=document.createElement("span");a.className="word__hglght--ylw";var n=t.splitText(o),i=(n.splitText(r.length),n.cloneNode(!0));a.appendChild(i),n.parentNode.replaceChild(a,n),s=1}}else if(1==t.nodeType&&t.childNodes&&!/(script|style)/i.test(t.tagName))for(var l=0;l<t.childNodes.length;++l)l+=e(t.childNodes[l],r);return s}(this,e.toUpperCase())}):this};var visited,qnaScrolled=!1,recommScrolled=!1,QnA={data:{mspId:$(".js-prdct-ttl").data("mspid"),leastAnsweredQuestionsList:[],answeringSingleQuestion:!1},generalFunctions:{randomInt:function(e,t){return Math.floor(Math.random()*(t-e+1))+e}},ajaxFunctions:{submitQuestion:function(e,t,r){$.ajax({url:"/review/qna/submit_qna.php",data:{email:e,question:t,mspid:QnA.data.mspId,capture_point:document.referrer}}).done(function(){r.slideDown()})},submitAnswer:function(e,t,r){$.ajax({url:"/review/qna/submit_qna.php",data:{email:e,answer:t,mspid:QnA.data.mspId,questionId:r,capture_point:document.referrer}}).done(function(){var e=$this.closest(".wrt-answr-form").find(".wrt-answr-form__sccss");e.slideDown(),QnA.data.answeringSingleQuestion&&(e.append(" | Loading Next Question ... "),setTimeout(function(){QnA.eventFunctions.gotoNextQuestion()},2e3))})},followQuestion:function(e){$.ajax({url:"/review/qna/submit_user_action.php",data:{entity_type:"q",email_id:Modules.Cookie.get("msp_login_email"),entity_id:questionId,action:type,source:"desktop_"+dataLayer[0].pagetype}}).done(function(t){e.each(function(t,r){if((e=$(this)).closest(".js-qstn-answr").data("question-id")==questionId){var s=parseInt(e.find($(".js-qstn-answr__flw__count")).html());return e.data("followstate","unfollow"),e.find($(".js-qstn-answr__flw__count")).html(s+1),e.find($(".js-flw__lbl")).html("Answer Requested"),window.ga&&ga("send","event","QNA","click","follow"),closePopup(),!1}})})},voteQuestion:function(e,t,r){$.ajax({url:"/review/qna/submit_user_action.php",data:{entity_id:e,entity_type:"q",email_id:Modules.Cookie.get("msp_login_email"),action:t,source:"desktop_"+dataLayer[0].pagetype}}).done(function(e){var t=r.closest(".qstn-vote").find(".vte-cnt");e.count?e.count>0?t.removeClass("ngtv").addClass("pstv").text("+"+e.count):t.removeClass("pstv").addClass("ngtv").text("-"+e.count):t.removeClass("pstv ngtv").text(e.count)})},voteAnswer:function(e,t,r){$.ajax({url:"/review/qna/submit_user_action.php",data:{entity_id:e,entity_type:"a",email_id:Modules.Cookie.get("msp_login_email"),action:t,source:"desktop_"+dataLayer[0].pagetype}}).done(function(e){"upvote"===t?r.text(e.likes):r.text(e.dislikes)})}},eventFunctions:{showQuestionForm:function(e){e.closest(".ask-qstn").removeClass("collapse")},showAnswerForm:function(e){e.slideUp(),e.closest(".wrt-answr").find(".wrt-answr-form").slideDown()},upvoteQuestion:function(e){if(!e.hasClass("js-is-active-vote")){var t=e.closest(".qstn-answr").data("question-id")||e.closest(".qna__item").data("question-id"),r=parseInt(e.find(".vte-cnt").html());e.addClass("clckd-vte js-is-active-vote").find(".vte-cnt").html(r+1),QnA.ajaxFunctions.voteQuestion(t,"upvote",e)}},downvoteQuestion:function(e){if(!e.hasClass("js-is-active-vote")){var t=e.closest(".qstn-answr").data("question-id");e.addClass("clckd-vte js-is-active-vote").closest(".qstn-vote").find(".upvt").removeClass("clckd-vte js-is-active-vote"),QnA.ajaxFunctions.voteQuestion(t,"downvote",e)}},followQuestion:function(e){e=e;var t=parseInt(e.find($(".js-qstn-answr__flw__count")).html()),r=e.closest(".js-qstn-answr").data("question-id");"unfollow"!=e.data("followstate")&&("follow"==e.data("followstate")?openPopup("/review/qna/popup/request_answer.php?source=desktop_q_list&q_id="+r):(e.data("followstate","follow"),e.find($(".js-qstn-answr__flw__count")).html(t-1),e.find($(".js-flw__lbl")).html("Request Answer"),window.ga&&ga("send","event","QNA","click","unfollow"),QnA.ajaxFunctions.followQuestion(r,"unfollow",e)))},upvoteAnswer:function(e){if(!e.hasClass("js-is-active-vote")){var t=e.closest(".qna__answr").data("answerid")||e.closest(".user-answrs__answr").data("answerid");e.addClass("clckd-vte js-is-active-vote").closest(".answr-vote").find(".dwnvt").removeClass("clckd-vte js-is-active-vote"),e.closest(".answr-vote").removeClass("answr-vote"),e.html("Marked Helpful ("+(parseInt(e.find(".upvt-cnt").html())+1)+")"),window.ga&&ga("send","event","QNA","click","upVote"),QnA.ajaxFunctions.voteAnswer(t,"upvote",e)}},downvoteAnswer:function(e){if(!e.hasClass("js-is-active-vote")){var t=e.closest(".user-answrs__answr").data("answerid");console.log(t),e.addClass("clckd-vte js-is-active-vote").closest(".answr-vote").find(".upvt").removeClass("clckd-vte js-is-active-vote"),e.html(parseInt(e.find(".upvt-cnt").html())+1),window.ga&&ga("send","event","QNA","click","downVote")}},viewAllAnswers:function(e){var t=e.closest(".qstn-answr").data("question-id");window.location.hash="ans-qstn-"+t},gotoNextQuestion:function(e){if(QnA.data.leastAnsweredQuestionsList[0]){var t=QnA.data.leastAnsweredQuestionsList[0].questionId,r=window.location.hash;/hide-ans/.test(r)?window.location.hash="ans-qstn-hide-ans-"+t:window.location.hash="ans-qstn-"+t,QnA.data.leastAnsweredQuestionsList.shift()}else e&&e.closest(".answr-next-qstn").text("No more questions")}},inputHandler:{email:function(e,t){return!!/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)||(t.slideDown(),!1)},text:function(e,t){return!(!/^[a-z\d\-_\s?]+$/i.test(e)||e.length<2)||(t.slideDown(),!1)}},prefillEmail:function(){Modules.Cookie.get&&$("input[type=email]").val(Modules.Cookie.get("msp_login_email"))},setEmailCookie:function(e){Modules.Cookie.get("msp_login_email")||setCookie("msp_login_email",e,365)},hashHandler:function(e){if(e.length&&/ans-qstn/.test(e)){var t=$(".wrt-answr__ttl").data("qid");Modules.Cookie.get("msp_uid")%2?openPopup("/review/qna/popup/answer_question.php?source=desktop_q_single&q_id="+t):openPopup("/review/qna/popup/fb_answer_question.php?source=desktop_q_single&q_id="+t),$(".popup-overlay")&&$(".popup-overlay").addClass("noclose"),$(".popup-closebutton").on("click",function(){})}},addAndSortQuestions:function(){var e=window.location.hash,t=!1;QnA.data.answeringSingleQuestion&&(t=+e.split("-").pop()),$(".qstn-answr").each(function(){var e=+$(this).data("question-id"),r=$(".user-answrs[data-question-id="+e+"] .user-answrs__answr").length;t!==e&&QnA.data.leastAnsweredQuestionsList.push({questionId:e,numAnswers:r})}),QnA.data.leastAnsweredQuestionsList.sort(function(e,t){return e.numAnswers-t.numAnswers})},init:function(){QnA.hashHandler(window.location.hash),QnA.addAndSortQuestions(),$(window).on("hashchange",function(){QnA.hashHandler(window.location.hash)}),QnA.prefillEmail(),$(".upvt").each(function(e){}),$(".js-ask-qstn__btn").on("click",function(e){e.preventDefault(),window.ga&&ga("send","event","QNA","click","ask-qstn")}),$(".js-qstn-answr__flw").on("click",function(){QnA.eventFunctions.followQuestion($(this))}),$(".js-wrt-answr__ttl").on("click",function(){window.ga&&ga("send","event","QNA","click","write-ans")}),$(".js-dsply-answrs").on("click",function(e){e.preventDefault(),QnA.eventFunctions.viewAllAnswers($(this))}),$(".js-next-qstn-link").on("click",function(e){e.preventDefault(),QnA.eventFunctions.gotoNextQuestion($(this))}),$(".js-ask-qstn__submit").on("click",function(e){e.preventDefault();var t=$(".ask-qstn-form__ttl").val(),r=$(".ask-qstn__ttl-err"),s=$(".ask-qstn-form__desc").val(),o=$(".ask-qstn-form__desc-err"),a=$(".ask-qstn__scs");QnA.inputHandler.email(t,r)&&QnA.inputHandler.text(s,o)&&(QnA.setEmailCookie(t),QnA.ajaxFunctions.submitQuestion(t,s,a))}),$(".js-wrt-answr-form__sbmt").on("click",function(e){e.preventDefault();var t=$(this),r=t.closest(".wrt-answr-form").find(".wrt-answr-form__eml").val(),s=t.closest(".wrt-answr-form").find(".wrt-answr-form__eml-error").slideDown(),o=t.closest(".wrt-answr-form").find(".wrt-answr-form__desc").val(),a=t.closest(".wrt-answr-form").find(".wrt-answr-form__desc-error").slideDown(),n=t.closest(".qstn-answr").data("question-id");QnA.inputHandler.email(r,s)&&QnA.inputHandler.text(o,a)&&(QnA.setEmailCookie(r),QnA.ajaxFunctions.submitAnswer(r,o,n))}),$(".js-qsnt-upvt").on("click",function(){QnA.eventFunctions.upvoteQuestion($(this))}),$(".qstn-vote .upvt").on("click",function(){QnA.eventFunctions.upvoteQuestion($(this))}),$(".qstn-vote .dwnvt").on("click",function(){QnA.eventFunctions.downvoteQuestion($(this))}),$(".answr-vote .upvt").on("click",function(){QnA.eventFunctions.upvoteAnswer($(this))}),$(".answr-vote .dwnvt").on("click",function(){QnA.eventFunctions.downvoteAnswer($(this))}),$(".js-ask-qstn__view-all-qstn--href").on("click",function(){window.ga&&ga("send","event","QNA","click","read-more-questions")}),$(".ask-qstn__view-all-qstn__inr").on("click",function(){window.ga&&ga("send","event","QNA","click","viewall-ques-goto-list")}),$(".ask-qstn__rtrn--href").on("click",function(){window.ga&&ga("send","event","QNA","click","back-to-pdp")})}};function validInput(e){return!!$(".js-qstn-txt").val().length||($(".qna__ask-wrpr").addClass("qna__ask-wrpr-err"),$(".js-qna__srch-kywrds").hide(),$(".qna__ask-wrpr-msg").show(),$(".ask-qstn__ask-wrpr").addClass("ask-qstn__ask-wrpr-err"),$(".ask-qstn__ask-wrpr-msg").show(),!1)}function validInput(e){return!!$(".js-qstn-txt").val().length||($(".qna__ask-wrpr").addClass("qna__ask-wrpr-err"),$(".js-qna__srch-kywrds").hide(),$(".qna__ask-wrpr-msg").show(),!1)}function storeProductInfo(){var e=document.URL;if(void 0!==dataLayer[0].url&&(e.indexOf("-msp")>-1||e.indexOf("-msf")>-1||e.indexOf("products")>-1||e.indexOf("-dealid")>-1)){var t={title:dataLayer[0].title,image:dataLayer[0].image,price:dataLayer[0]["min-price"],url:dataLayer[0].url,mspid:dataLayer[0].mspid,productType:dataLayer[0]["product-type"],timeStamp:Date.now()};if(window.indexedDB){var r=window.indexedDB.open("userDb",1);r.onupgradeneeded=function(e){var t=e.target.result;if(!t.objectStoreNames.contains("recentlyViewed")){var r=t.createObjectStore("recentlyViewed",{autoIncrement:!0});r.createIndex("url","url",{unique:!0}),r.createIndex("timeStamp","timeStamp",{unique:!1})}},r.onerror=function(e){console.log("error on indexdb open")},r.onsuccess=function(e){db=e.target.result;var r=db.transaction(["recentlyViewed"],"readwrite").objectStore("recentlyViewed"),s=r.index("url").getKey(t.url);s.onsuccess=function(e){var o=s.result;if(void 0===o)r.put(t);else{var a=r.get(o);a.onsuccess=function(e){var s=a.result.price,n=t.price,i=new Date(a.result.timeStamp).toDateString();if(i=i==(new Date).toDateString()?"":" on "+i,s>n&&"0"!=s&&"0"!=n)(100*(s-n)/s).toFixed(1);else if(s<n&&"0"!=s&&"0"!=n)(100*(n-s)/s).toFixed(1);else if(s=n&&"0"!=s&&"0"!=n);r.put(t,o)}}};var o=r.count();o.onsuccess=function(){o.result>20&&(delCount=o.result-20,r.index("timeStamp").openCursor().onsuccess=function(e){var t=e.target.result;t&&delCount>0&&(delCount--,console.log(delCount),r.delete(t.primaryKey),t.continue())})}}}}}function fillRecentlyViewedSection(){var e="/deals/"===window.location.pathname;if(window.indexedDB){var t=indexedDB.open("userDb",1);t.onupgradeneeded=function(e){var t=e.target.result;if(!t.objectStoreNames.contains("recentlyViewed")){var r=t.createObjectStore("recentlyViewed",{autoIncrement:!0});r.createIndex("url","url",{unique:!0}),r.createIndex("timeStamp","timeStamp",{unique:!1})}},t.onerror=function(e){console.log("error on indexdb open")},t.onsuccess=function(t){db=t.target.result;var r=db.transaction(["recentlyViewed"],"readonly").objectStore("recentlyViewed").index("timeStamp").openCursor(null,"prev"),s='<div class="sctn" id="rcntly_vwd" data-slideitem="prdct-item" data-slideitemwrprper="sctn__inr"><div class="sctn__hdr clearfix"><div class="sctn__ttl">You Recently Viewed</div><div class="sctn__nvgtn"></div></div><div class="sctn__inr prdct-grid clearfix">',o=0;r.onsuccess=function(t){var r=t.target.result;if(console.log(r),5==o&&(r=null),r){newSnippet='<div class="prdct-item" data-mspid="--mspid--"><div class="prdct-item__save-btn js-save-btn"></div><a class="prdct-item__img-wrpr" href="--url--"><img class="prdct-item__img" src="https://assets.mspcdn.net/w_70/logos/mysmartprice/owl/lazy.png" data-lazy-src="--image--" alt="--alttitle--"></a><div class="prdct-item__dtls"><a class="prdct-item__name" href="--hrefurl--">--title--</a><div class="prdct-item__prc"><span class="prdct-item__rpe">--priceSym--</span><span class="prdct-item__prc-val">--price--</span></div></div></div>';var a=r.value.price,n=r.value.productType;if(e&&"deals"==n||!e&&"deals"!=n){var i="";if("0"==(a=a.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","))){i="";a="Not Available"}newSnippet=newSnippet.replace("--url--",r.value.url+"?ref=rv").replace("--title--",r.value.title).replace("--image--",r.value.image).replace("--price--",a).replace("--mspid--",r.value.mspid).replace("--alttitle--",r.value.title).replace("--hrefurl--",r.value.url).replace("--priceSym--",i),o++,s+=newSnippet}r.continue()}else o>0&&(s+="</div></div>",$(".spnsr-cntnt").length?$(".spnsr-cntnt").before(s):$(".main-wrpr").append(s),lazyLoadImages())}}}}function init(){Modules.Cookie.get("visit_num_pages")?Modules.Cookie.set("visit_num_pages",parseInt(Modules.Cookie.get("visit_num_pages"))+1):Modules.Cookie.set("visit_num_pages",1),Modules.Cookie.get("session-start-time")||Modules.Cookie.set("session-start-time",(new Date).getTime()),Modules.Cookie.set("active_time",((new Date).getTime()-Modules.Cookie.get("session-start-time"))/1e3)}function countPages(){var e=Modules.Cookie.get("num_pages");e=e?parseInt(e,10)+1:1,Modules.Cookie.set("num_pages",e,"7d")}function validUID(){var e=Modules.Cookie.get("msp_uid"),t=$.Deferred();return $.ajax({url:"/api/transacting_uid_popup.php",type:"GET",data:{uid:e}}).done(function(e){t.resolve(e)}),t.promise()}function loadVideoReviews(){var e=[],t={},r=$(".js-yt-vdo"),s=$(".js-yt-vdo__ftrd"),o=$(".js-vdo-list");function a(e){if(e){var t=e.match(/(\d+)H/)||"",r=e.match(/(\d+)M/)||"",s=e.match(/(\d+)S/)||"";return t&&(t=1===t[1].length?"0"+t[1]+":":t[1]+":"),r&&(r=1===r[1].length?"0"+r[1]+":":r[1]+":"),s&&(s=1===s[1].length?"0"+s[1]:s[1]),t+r+s}return""}r.length&&(r.each(function(t,r){var s=$(r).data("yt-vdo-id");e.push(s)}),$.ajax({url:"https://www.googleapis.com/youtube/v3/videos",data:{part:"snippet, contentDetails",id:e.join(),key:"AIzaSyCJrzy0GTt2WfQF8jMVCfXHIhHIOLz2luQ"}}).done(function(r){var n;(n=r)&&n.items&&n.items.forEach(function(r,s){var o=r.snippet,a=r.contentDetails;t[e[s]]={id:e[s],publishedAt:o.publishedAt,thumbnails:o.thumbnails,title:o.title,duration:a.duration}}),function(r){if(r.length){var s=t[e[0]],o=(r.data("yt-vdo-id"),r.find(".js-thumb")),n=r.find(".js-duration"),i=r.find(".js-play"),l=r.find(".js-title");o.length&&o.attr("src",s.thumbnails.medium.url),n.length&&n.text(a(s.duration)),l&&l.text(s.title),o.on("click",d),i.on("click",d)}function d(e){var t=['<iframe id="vdo-rvw__ftrd__plyr" type="text/html" width="426" height="240" ','src="https://www.youtube.com/embed/'+s.id+'?autoplay=1" frameborder="0" allowfullscreen></iframe>'].join("");return r.html(t),!1}}(s),function(e){function r(e){var t={mspid:$(".prdct-dtl__ttl").data("mspid"),offset_media_key:"customerReviewVideos",offset_position:$(".js-yt-vdo").index(this),offset_video:$(".js-yt-vdo").index(this)};return openPopup("/mobile/multiple_media_popup.php?"+$.param(t)),!1}e.length&&e.find(".js-yt-vdo").each(function(e,s){var o=$(s).data("yt-vdo-id"),n=$(s).find(".js-thumb"),i=$(s).find(".js-duration"),l=$(s).find(".js-title"),d=$(s).find(".js-date"),p=t[o];p&&($(s).data("videolink","https://www.youtube.com/embed/"+o+"?autoplay=1"),n.attr("src",p.thumbnails.medium.url),i.text(a(p.duration)),l.text(p.title),d.text(function(e){if(e)try{var t=new Date(e);return["Jan","Feb","March","April","May","June","July","Aug","Sept","Oct","Nov","Dec"][t.getMonth()]+" "+t.getDate()+", "+t.getFullYear()}catch(e){return console.error("Error",e),""}}(p.publishedAt))),$(s).on("click",r)})}(o)}))}function handleCopyText(){$this=$(this),copyText($this,function(){$this.text("COPIED").removeClass("bttn--blue").addClass("bttn--grn")},function(){})}function handleSendEmail(){var e=$(this).data("address"),t=$(this).data("subject"),r=$(this).data("body"),s="mailto:"+encodeURIComponent(e)+"?subject="+encodeURIComponent(t)+"&body="+encodeURIComponent(r);window.open(s,"_blank")}function bindAutoComplete(){var e=$(".srch-wdgt"),t=e.find(".js-atcmplt");if(t.length){var r=t.autocomplete({minLength:0,delay:110,autoFocus:!1,max:10,open:function(t,r){$(".ui-menu").css({width:e.width(),left:"-1px",top:"1px",clear:"both"}),e.addClass("srch-wdgt--show-rslt")},close:function(t,r){e.removeClass("srch-wdgt--show-rslt")},source:function(e,t){e.term=$.trim(e.term).toLowerCase(),e.term.length<3&&(e.term="_top_");var r=bindAutoComplete._cache_=bindAutoComplete._cache_||{keys:[],values:[]},s=r.keys.indexOf(e.term);s>-1?t(r.values[s]):$.ajax({url:"/msp/search/auto_suggest_search.php",dataType:"json",data:e}).done(function(s){if(s){var o=[];s.subcategories&&s.subcategories.length&&$.merge(o,s.subcategories),s.terms&&s.terms.length&&$.merge(o,s.terms),s.products&&s.products.length&&$.merge(o,s.products),o.length?(r.keys.push(e.term),r.values.push(o),r.keys.length>25&&(r.keys.shift(),r.values.shift()),t(o)):t([])}else t([])}).fail(function(){t([])})},select:function(e,t){if(t.item.url){var r=window.location.href.split("#"),s=t.item.url.split("#");r[0]===s[0]?r[1]!==s[1]?(window.location.href=t.item.url,window.location.reload()):window.location.reload():window.location.href=t.item.url}else{$(this).parent().find(".search_type").val("auto");var o=$(this).val();$(this).parent().find(".typed_term").val(o),$(this).val(t.item.value).closest("form").submit()}}}).data("ui-autocomplete");r._renderItem=function(e,t){var r=this.term.split(" ").join("|"),s=new RegExp("\\b("+r+")","gi"),o=t.value.replace(s,"<strong>$1</strong>"),a=$("<li>").data("item.autocomplete",t);return t.subcategory?(o+=" in <span style='font-weight: bold; color: #c00;'>"+t.subcategory+"</span>",a.addClass("subcategory-item")):t.image?(o="<span class='image'><img src='"+t.image+"' alt='"+t.value+"'/></span>"+o,a.addClass("product-item")):a.addClass("string-item"),o="<a>"+o+"</a>",a.append(o).appendTo(e)},r._renderMenu=function(e,t){var r=this;$.each(t,function(t,s){r._renderItemData(e,s)});var s=$(e);s.find(".string-item").first().not(":first-child").before("<li class='separator-item'><span>Popular terms</span></li>"),s.find(".product-item").first().before("<li class='separator-item'><span>Popular products</span></li>")}}}function initScrollToTop(){var e=$("body"),t=["<div class='to-top'>","<div class='to-top__btn js-lazy-bg'></div>","<div class='to-top__lbl'>Back to top</div>","</div>"].join(""),r=$(t),s="hidden";e.append(r),r.on("click",function(){e.animate({scrollTop:"0"},"slow",function(){s="hidden"}),r.stop(!0,!0).fadeOut()}),Modules.$win.on("scroll",function(){$(this).scrollTop()>100?"hidden"==s&&(s="display",r.stop(!0,!0).fadeIn()):"display"==s&&(s="hidden",r.stop(!0,!0).fadeOut())})}function copyText(e,t,r){var s=e.data("text");$("body").append("<input class='js-temp-txt' value="+s+" />"),$(".js-temp-txt").select();try{document.execCommand("copy"),t()}catch(e){r(e)}}function handleSendEmail(){$(this).data("address");var e=$(this).data("subject"),t=$(this).data("body"),r=$(this).data("cc"),s="https://mail.google.com/mail/?view=cm&fs=1&su="+encodeURIComponent(e)+"&body="+encodeURIComponent(t)+"&cc="+encodeURIComponent(r);window.open(s,"_blank")}function scrollToSectionNoAnimation(){var e=url.hashParams;e&&setTimeout(function(){e.scrollTo&&t(e,!0),e.clickElt&&r(e)},300),Modules.$win.on("hashchange",function(){(e=url.hashParams).scrollTo&&t(e,!1)});var t=function(e,t){var r=$('[data-id="'+e.scrollTo+'"]').offset(),s=0;if(r&&(s=Math.ceil(r.top-$(".sctn--page-nvgtn").height()-10)),t)$("body").scrollTop(s);else if(e&&e.scrollTo&&$('[data-id="'+e.scrollTo+'"]').length){var o=$("html, body");o.on("scroll.inpageLink mousedown.inpageLink wheel.inpageLink DOMMouseScroll.inpageLink mousewheel.inpageLink keyup.inpageLink touchmove.inpageLink",function(){o.stop()}),o.animate({scrollTop:s},"slow",function(){o.off("scroll.inpageLink mousedown.inpageLink wheel.inpageLink DOMMouseScroll.inpageLink mousewheel.inpageLink keyup.inpageLink touchmove.inpageLink")})}},r=function(e){e&&e.clickElt&&$(e.clickElt).trigger("click")},s=$(".sctn--page-nvgtn");if(s.length){var o=Math.ceil(s.offset().top);Modules.$win.scroll(Modules.throttle(function(){Math.ceil(Modules.$win.scrollTop())>o?s.addClass("sctn--stcky-nvgtn"):s.removeClass("sctn--stcky-nvgtn")},100))}Modules.$doc.on("click",".js-inpg-link",function(r){var s=$(this);if("disabled"===s.data("action"))return!1;e||(e={}),e.scrollTo=s.data("href"),url.hashParams=e,t(e),r.preventDefault()}),Modules.$doc.on("click",".js-inpg-link[data-href=user-reviews]",function(){var e=$(this);Modules.Cookie.get("msp_uid")%5==0?(e.data("href","video-reviews"),window.ga&&ga("send","event","PDPReviewLink","click","video-reviews")):window.ga&&ga("send","event","PDPReviewLink","click","text-reviews")})}function inpageLinking(e){if(""!==e&&"#"!==e)try{$(e).length&&$("html, body").animate({scrollTop:$(e).offset().top-90+"px"})}catch(e){}}function handleHashChange(){return inpageLinking(window.location.hash),!1}function handleAnchorLinkClick(e){e.preventDefault(),inpageLinking($(this).attr("href"))}function handleLoadEvent(){inpageLinking(window.location.hash)}$(document).ready(function(){QnA.init(),Modules.$doc.on("click",".js-user-answr__more-answr",function(){var e=$(this).data("state"),t=$(this).parents(".js-user-answrs").data("question-id"),r=$(this).parents(".js-qstn-answr").data("ans-count"),s="More Answers ("+(parseInt(r,10)-1)+")";"collapsed"===e?($(this).text("Collapse Answers").data("state","opened"),parseInt(r)>10&&$(this).before('<a class="user-answr__all-answrs js-all-answrs" href="single.php?q_id='+t+'" target="_blank">Show all answers ('+r+")</a>"),window.ga&&ga("send","event","QNA","click","read-more-answers")):($(this).text(s).data("state","collapsed"),$(this).parent().find(".js-all-answrs").remove(),window.ga&&ga("send","event","QNA","click","collapse-more-answers")),$(this).toggleClass("qna__more-answr--opnd"),$(this).parent().parent().find(".user-answrs__answr").toggleClass("user-answrs__answr--show")}),Modules.$doc.on("submit",".js-ask-qstn__frm",function(){return $(".js-ask-qstn").click(),!1}),$(".js-qstn-txt").on("focus",function(){$(".qna__ask-wrpr, .ask-qstn__ask-wrpr").css("border-color","#999")}).on("blur",function(){$(".qna__ask-wrpr, .ask-qstn__ask-wrpr").css("border-color","#bbb")})}),$("body").on("click",".js-ask-qstn",function(e){if(!validInput(e))return!1}),Modules.$doc.on("keyup",".js-qstn-txt",function(){console.log($(this).val().length);$(this).val().length;$(".qna__ask-wrpr").removeClass("qna__ask-wrpr-err"),$(".qna__ask-wrpr-msg").hide(),$(".js-qna__srch-kywrds").show(),$(".ask-qstn__ask-wrpr").removeClass("ask-qstn__ask-wrpr-err"),$(".ask-qstn__ask-wrpr-msg").hide()}),Modules.$win.scroll(Modules.throttle(function(e){var t=Modules.$win.scrollTop(),r=$(".sub-hdr"),s=$(".hdr"),o=r.outerHeight(),a=$($(".ftr")[0]).offset().top,n=$(".ad-sdbr"),i=n.height()+40;if(a<i+t&&!visited){var l=a-620;n.css("position","absolute").css("top",l+"px"),visited=!0}else a>i+t&&visited?(n.css("position","fixed").css("top","20px"),visited=!1):a>i+t&&(s.height()>t?n.css("position","absolute").css("top","120px"):n.css("position","fixed").css("top","20px"));if($(".qna").length>0&&t>=$(".qna").position().top&&!qnaScrolled&&(ga("send","event","QNA","qna-scroll","",{nonInteraction:!0}),qnaScrolled=!0),$("#recomm").length>0&&t>=$("#recomm").position().top&&!recommScrolled&&(ga("send","event","recommendations","scrollTo","",{nonInteraction:!0}),recommScrolled=!0),$(".drpdwn-menu-ovrly--show").length&&$(".js-ctgry-btn").click(),!s.hasClass("hdr--scrl")){if(t<=0)return r.removeClass("not-vsbl"),void($(".lead-hdr-wrpr").length&&!Modules.Cookie.get("msp_lead_hdr_hide")&&$(".lead-hdr-wrpr").slideDown());if(Math.abs(lastScrollTop-t)<=5)return;t>lastScrollTop&&t>o?(s.addClass("hdr--sld"),r.addClass("not-vsbl"),$(".lead-hdr-wrpr").length&&!Modules.Cookie.get("msp_lead_hdr_hide")&&$(".lead-hdr-wrpr").slideUp(),$(".ad-sdbr").addClass("ad-sdbr--top")):t+Modules.$win.height()<Modules.$doc.height()&&(r.removeClass("not-vsbl"),s.removeClass("hdr--sld"),$(".ad-sdbr").removeClass("ad-sdbr--top"),$(".lead-hdr-wrpr").length&&!Modules.Cookie.get("msp_lead_hdr_hide")&&$(".lead-hdr-wrpr").slideDown()),lastScrollTop=t}Modules.lazyLoad.run()},100)),url.getAQueryParam&&"email"===url.getAQueryParam("ref")&&openPopup("/review/qna/popup/thankyou.html"),Modules.$doc.on("focus",".js-qstn-txt",function(){window.ga&&ga("send","event","QNA","focus","search-input")}),Modules.$doc.one("click",".js-qna__srch-kywrd",function(){window.QnASearch&&(QnASearch.data.searchWordsArr=QnASearch.buildFunction.init(QnASearch.settings.qnaApi()))}),Modules.$doc.on("click",".js-qna__srch-kywrd",function(){window.ga&&ga("send","event","qna","click","qna-suggested-search"),$(".js-qstn-txt").val($(this).text()).trigger("input")}),Modules.$doc.on("click",".js-more-answr",function(){var e=$(this).data("state"),t=$(this).parents(".qna__item").data("qid")||$(this).parents(".qna__item").data("question-id"),r=$(this).parents(".qna__item").data("ans-count");if("collapsed"===e)$(this).text("Collapse Answers").data("state","opened"),parseInt(r)>5&&$(this).before('<a class="qna__all-answrs js-all-answrs" href="/qna/single/?q_id='+t+'" target="_blank">Show all answers ('+r+")</a>");else{var s="More Answers ("+(parseInt(r,10)-1)+")";$(this).text(s).data("state","collapsed"),$(this).parent().find(".js-all-answrs").remove()}$(this).toggleClass("qna__more-answr--opnd"),$(this).parent().find(".qna__answr").toggleClass("qna__answr--show"),$(this).parent().find(".qna__answr-upvt").toggleClass("hide")}),Modules.$doc.off(".qns__frm").on("submit",".qna__frm",function(e){return!!validInput(e)&&($(".js-ask-qstn").click(),!1)}),$("body").on("click",".js-ask-qstn",function(e){if(!validInput(e))return!1}),Modules.$doc.on("click",".js-qna-bbl",function(){$(this).hide()}),Modules.$doc.on("click",".js-ask-qstn__submit",function(e){e.preventDefault();var t=$(".ask-qstn-form__ttl").val(),r=$(".ask-qstn-form__desc").val();return/^(([^<>()[\]\.,;:\s@"]+(\.[^<>()[\]\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t)?!/^[a-z\d\-_\s?]+$/i.test(r)||r.length<20?($(".ask-qstn-form__desc-err").slideDown(),!1):($.ajax({url:"/review/qna/submit_qna.php",data:{email:t,question:r,mspid:PriceTable.dataPoints.mspid}}).done(function(){$(".ask-qstn__scs").slideDown()}),!1):($(".ask-qstn__ttl-err").slideDown(),!1)}),$(document).on("click",".js-qna__rqst-answr",function(e){$this=$(this),e.preventDefault(),e.stopPropagation();var t=$(this).data("qid");"unfollow"!=$this.data("followstate")&&($this.addClass("js-qna__rqst-answr-actv"),openPopup("/review/qna/popup/request_answer.php?source=desktop_q_list&q_id="+t))}),Modules.$doc.on("focus",".js-qstn-txt",function(){window.ga&&ga("send","event","QNA","focus","search-input")}),storeProductInfo(),$(document).ready(function(){"/"!=window.location.pathname&&"/deals/"!=window.location.pathname||fillRecentlyViewedSection()}),Modules.$doc.on("click","#exprt-rvw__prvw .exprt-rvw__glry-img",function(e){if($(this).parent().hasClass("exprt-rvw__glry-thmbnl")){var t=$(this).closest(".exprt-rvw__glry-thmbnl"),r=$(this).offset().left,s=$(this).width()+r,o=t.find(".exprt-rvw__glry-img:first").offset().left,a=t.offset().left,n=t.width()+15,i=$(this).closest(".exprt-rvw__glry");$(i).find(".exprt-rvw__glry-img-active").removeClass("exprt-rvw__glry-img-active"),$(this).addClass("exprt-rvw__glry-img-active"),$(i).find(".exprt-rvw__glry-main-img").attr("src",$(this).data("image-src")),$(i).find(".exprt-rvw__glry-cntr").html($(this).data("image-index")+1+" of "+($(i).find("img").length-1)),$(i).find(".exprt-rvw__glry-main-img").data("href","/mobile/review_image_popup.php?image_url="+encodeURIComponent($(this).data("image-src"))),$(i).find(".exprt-rvw__glry-main-img").data("image-index",$(this).data("image-index")),s>a+n?t.animate({scrollLeft:s-(o+n)+40},"fast"):r<a&&t.animate({scrollLeft:o-r},"fast")}}),Modules.$doc.on("click","#exprt-rvw__prvw .zoom-viewer__arrow",function(e){var t,r=$(this).closest(".exprt-rvw__glry"),s=$(r).find(".exprt-rvw__glry-main-img").data("image-index");s=void 0!==s?parseInt(s,10):0,(s=$(this).hasClass("zoom-viewer__arrow--prev")?s-1:s+1)>$(r).find("img").length-2&&(s=0),s<0&&(s=$(r).find("img").length-2),t=$(r).find(".exprt-rvw__glry-img[data-image-index='"+s+"']"),$(t).click()}),$(".exprt-rvw__vid-play").on("click",function(e){var t=$(this);$imageNode=t.siblings(".exprt-rvw__vid-img"),$container=t.parent(),height=$container.height(),width=$container.width(),videoId=$imageNode.data("video-id"),$imageNode.remove(),t.remove(),$container.append('<iframe class="exprt-rvw__vid-iframe" width="'+width+'" height="'+height+'" src="//www.youtube.com/embed/'+videoId+'?rel=0&autoplay=1" frameborder="0" allowfullscreen></iframe>')}),Modules.$doc.ready(function(){if($(".usr-rvw-form--sngl").length){$(".usr-rvw-form__ttl-wrpr-vsbl").length>0?window.ga&&ga("send","event","user-review","landing","title-visible"):window.ga&&ga("send","event","user-review","landing","title-hidden");var e=$(".usr-rvw-form__rtng-wrpr .rtng-star").width(),t=$(".usr-rvw-form__rtng-wrpr .rtng-star__inr"),r=$(".usr-rvw-form__rtng-rmrk"),s=r.data("remarks").split(","),o=$(".usr-rvw-form__rtng-inpt");if(isUserDetailsDisplayed=!1,url.getAQueryParam&&url.getAQueryParam("rating")){var a=20*parseInt(url.getAQueryParam("rating")),n=parseInt(url.getAQueryParam("rating"))||1,i=["Terrible","Bad","Average","Good","Excellent"];r.data("remark",i[n-1]),o.val(n),t.data("width",a).addClass("rtng-star__inr--rated"),t.width(20*n+"%"),r.text(i[n-1]),setTimeout(function(){$(".usr-rvw-form__desc-wrpr").slideDown("fast"),$(".usr-rvw-form__submit").slideDown("fast")},500)}Modules.$doc.on("keyup",".js-usr-rvw__desc",function(e){e.target.value.trim().length>0?0===$(".usr-rvw-form__ttl-wrpr-vsbl").length&&$(this).closest(".usr-rvw-form--sngl").find(".usr-rvw-form__ttl-wrpr").slideDown("fast"):0===$(".usr-rvw-form__ttl-wrpr-vsbl").length&&$(this).closest(".usr-rvw-form--sngl").find(".usr-rvw-form__ttl-wrpr").slideUp("fast")}),Modules.$doc.on("mousemove",".usr-rvw-form__rtng-wrpr .rtng-star",function(o){var a=parseInt(o.pageX-$(this).offset().left,10),n=Math.ceil(a/e*5)||1;r.text(s[n-1]),a<=e&&t.width(20*n+"%")}),Modules.$doc.on("click",".usr-rvw-form__rtng-wrpr .rtng-star",function(){var s=t.width(),a=Math.ceil(s/e*5)||1;r.data("remark",r.text()),o.val(a),t.data("width",s).addClass("rtng-star__inr--rated"),$(".usr-rvw-form__desc-wrpr").slideDown("fast"),$(".usr-rvw-form__submit").slideDown("fast")}),Modules.$doc.on("mouseleave",".usr-rvw-form__rtng-wrpr .rtng-star",function(){t.hasClass("rtng-star__inr--rated")?(r.text(r.data("remark")),t.width(t.data("width"))):(t.width(0),r.empty())}),Modules.$doc.on("submit",".usr-rvw-form--sngl",function(){return MSP.utils.validate.form([{type:"rating",inputField:$(".usr-rvw-form__rtng-inpt"),errorNode:$(".usr-rvw-form__rtng-err")},{type:"text",inputField:$(".usr-rvw-form__ttl"),errorNode:$(".usr-rvw-form__ttl-err"),options:{min:1}},{type:"required",inputField:$(".usr-rvw-form__desc"),errorNode:$(".usr-rvw-form__desc-err"),options:{min:1}}]).done(function(){var e=$(".usr-rvw-form__rtng-inpt").val(),t=$(".usr-rvw-form__ttl").val(),r=$(".usr-rvw-form__desc").val(),s="There was a problem submitting your review. Please try again.",o="",a=Modules.Cookie.get("msp_login_email"),n="/msp/review/save_review_basic.php";if(url.getAQueryParam&&url.getAQueryParam("user"))try{o=atob(url.getAQueryParam("user")),l(!0)}catch(e){a?(o=a,l(!0)):i.call(this)}else a?(o=a,l(!0)):i.call(this);function i(){loginCallback(l,this,[!1])}function l(a){a||(o=Modules.Cookie.get("msp_login_email")),$.ajax({type:"POST",url:n,data:{mspid:url.getAQueryParam("mspid"),title:t,details:r,rating_review:e,email_id:o,source:"desktop"}}).done(function(e){1==(e=JSON.parse(e)).success?($(".sctn__hdr").hide(),$(".usr-rvw-prdct").addClass("usr-rvw-prdct__scs"),$(".usr-rvw-form--sngl").hide(),$(".usr-rvw-form__wrpr").hide(),$(".usr-wrt-rvw__scs").fadeIn(),$(".usr-rvw-form").data("submitted",!0),$(".usr-wrt-rvw__scs-desc").after($(".usr-rvw-form--sngl").html()),$(".usr-rvw-form__rtng-lbl").text("You rated"),$(".usr-rvw-form__ttl-wrpr-vsbl").length>0?window.ga&&ga("send","event","user-review","submit","title-visible"):window.ga&&ga("send","event","user-review","submit","title-hidden")):alert(s)}).fail(function(){alert(s)})}}),!1})}}),function(){if($(".usr-wrt-rvw").length){var e=$(".usr-rvw-form__rtng-wrpr .rtng-star").width(),t=$(".usr-rvw-form__rtng-wrpr .rtng-star__inr"),r=$(".usr-rvw-form__rtng-rmrk"),s=r.data("remarks").split(","),o=$(".usr-rvw-form__rtng-inpt");isUserDetailsDisplayed=!1,"1"===Modules.Cookie.get("msp_login")&&($(".usr-rvw-form__dtls-img").attr("src",Modules.Cookie.get("msp_user_image")),$(".usr-rvw-form__dtls-name").text(Modules.Cookie.get("msp_login_name")||"MySmartPrice User"),$(".usr-rvw-form__dtls-email").text(Modules.Cookie.get("msp_login_email")),$(".usr-rvw-form__dtls").show(),isUserDetailsDisplayed=!0),Modules.$doc.on("mousemove",".usr-rvw-form__rtng-wrpr .rtng-star",function(o){var a=parseInt(o.pageX-$(this).offset().left,10),n=Math.ceil(a/e*5)||1;r.text(s[n-1]),a<=e&&t.width(20*n+"%")}),Modules.$doc.on("click",".usr-rvw-form__rtng-wrpr .rtng-star",function(){var s=t.width(),a=Math.ceil(s/e*5)||1;r.data("remark",r.text()),o.val(a),t.data("width",s).addClass("rtng-star__inr--rated")}),Modules.$doc.on("mouseleave",".usr-rvw-form__rtng-wrpr .rtng-star",function(){t.hasClass("rtng-star__inr--rated")?(r.text(r.data("remark")),t.width(t.data("width"))):(t.width(0),r.empty())}),Modules.$doc.on("click",".js-usr-rvw-item-more",function(){$(this).hide(),$(this).closest(".usr-rvw-item__text").find(".usr-rvw-item__text-hide").fadeIn()}),Modules.$doc.on("submit",".usr-rvw-form",function(){return loginCallback(function(){MSP.utils.validate.form([{type:"rating",inputField:$(".usr-rvw-form__rtng-inpt"),errorNode:$(".usr-rvw-form__rtng-err")},{type:"text",inputField:$(".usr-rvw-form__ttl"),errorNode:$(".usr-rvw-form__ttl-err"),options:{min:20}},{type:"required",inputField:$(".usr-rvw-form__desc"),errorNode:$(".usr-rvw-form__desc-err"),options:{min:100}}]).done(function(){var e=$(".usr-rvw-form__rtng-inpt").val(),t=$(".usr-rvw-form__ttl").val(),r=$(".usr-rvw-form__desc").val(),s="There was a problem submitting your review. Please try again.";$.ajax({type:"POST",url:"/msp/review/save_a_review.php",data:{mspid:PriceTable.dataPoints.mspid,title:t,details:r,rating_review:e,email_id:Modules.Cookie.get("msp_login_email")}}).done(function(e){1==(e=JSON.parse(e)).success?($(".usr-rvw-form").hide(),$(".usr-wrt-rvw__scs").fadeIn(),$(".usr-rvw-form").data("submitted",!0)):alert(s)}).fail(function(){alert(s)})})}),!1}),window.onbeforeunload=function(e){var t="You have not finished submitting your review.";if(!$(".usr-rvw-form").data("submitted")&&$.trim($(".usr-rvw-form__desc").val()).length)return(e||window.event).returnValue=t,t}}}(),Modules.$doc.on("click",".js-usr-rvw-vote-up, .js-usr-rvw-vote-down",function(){function e(e){var t=e.closest(".usr-rvw__bttm__rvw").data("review-id"),r=PriceTable.dataPoints.mspid,s=e.hasClass("js-usr-rvw-vote-up")?1:-1,o=e.closest(".usr-rvw__bttm__rvw-vote");if(!o.find("span").hasClass("done")){$.post("/msp/review/post_vote.php",{reviewid:t,mspid:r,vote:s});var a=o.find("span:not(.text-link)").not(e),n=o.find(".js-usr-rvw-rprt-spam");a.removeClass("done"),e.text(Number(e.text())+1).addClass("done"),n.remove()}}return function(){return loginCallback(e,this,[$(this)]),!1}}()),Modules.$doc.on("submit",".js-srch-wdgt__frm",function(){var e=$(".js-hdr-srch").val(),t="";$(".js-srch-wdgt__frm .search_type").val()&&(t=$(".js-srch-wdgt__frm .search_type").val());var r="";$(".js-srch-wdgt__frm .typed_term").val()&&(r=$(".js-srch-wdgt__frm .typed_term").val());var s="/msp/search/search.php?search_type="+t+"&typed_term="+r+"&s="+e+"#s="+e;$(".js-srch-wdgt__frm").attr("action",s)}),Modules.$doc.on("focus",".srch-wdgt__fld",function(){$(this).autocomplete("search")}),init(),countPages(),$(".list-best__vdo").on("click",function(e){var t=$(this).data("video-id"),r=$(this).data("media_key"),s=$(this).data("media_position"),o=["mspid="+$(this).closest(".list-best__item").data("mspid"),"offset_media_key="+r,"offset_position="+s,"primaryThumb="+$(".list-best__img").data("image"),"maxThumbs=0","thumbId="+$(".list-best__img").data("thumb-id"),"videoUrl="+t].join("&");openPopup("http://www.mysmartprice.com/mobile/"+$(".list-best__vdo").data("href")+"?"+o)}),function(){var e=$(".vdo-rvw-sctn");e.length&&(Modules.lazyLoad.assign({node:e,callback:{definition:loadVideoReviews,context:this,arguments:[]}}),Modules.lazyLoad.run())}(),bindAutoComplete(),initScrollToTop(),Modules.$doc.on("click",".js-copy",handleCopyText),Modules.$doc.on("click",".js-send-email",handleSendEmail),0!==$(".body-wrpr").length?scrollToSectionNoAnimation():(Modules.$win.on("hashchange",handleHashChange),Modules.$doc.on("click",'a[href^="#"]',handleAnchorLinkClick),Modules.$win.on("load",handleLoadEvent));var Popout={closePopout:function(){$(".js-wdgt-flt").addClass("Popout-hide-animate"),setTimeout(function(){$(".js-wdgt-flt").remove()},100)},storePopout:function(e){$.isEmptyObject(e)||localStorage.setItem("Popout",JSON.stringify(e))},animateProgressBar:function(e,t){!function r(){var s;e<t?(s=++e/t*100,$(".wdgt-tmr__inr-bg").css("width",s+"%"),setTimeout(r)):Popout.closePopout()}()},showPopout:function(){var e=getStorageData("local","Popout");if(e){var t=(e=JSON.parse(e)).PopoutHide,r=e.position;"bottom"==r&&(r="wdgt-flt-btm");var s=['<div class="wdgt-flt js-wdgt-flt Popout-show-animate '+r+'">','<div class="wdgt-flt--cntnr"><div class="wdgt-flt--cntnr__cls js-Popout-close"> &times; </div>','<div class="wdgt-flt__ttl">'+e.title+"</div>",'<div class="wdgt-flt__ttl--sub">'+e.subTitle+"</div>",'<div class="wdgt-flt__bttns">'];2==e.buttonCount?(s.push('<a href="#" class="bttn bttn--blue wdgt-flt__bttn js-Popout-close bttn--two">Close</a>'),s.push('<a href="'+e.buttonUrl+'"  class="bttn bttn--grn wdgt-flt__bttn js-wdgt-flt__bttn bttn--two" target="_blank">'+e.buttonLabel+"</a>")):s.push('<a href="'+e.buttonUrl+'" target="_blank" class="bttn bttn--grn wdgt-flt__bttn js-wdgt-flt__bttn">'+e.buttonLabel+"</a>"),s.push("</div>","</div>",'<div class="wdgt-tmr">','<div class="wdgt-tmr__inr-bg"></div>',"</div>","</div>"),$("body").append(s.join(""));if("short"==t){var o=1e3;setTimeout(function(){Popout.animateProgressBar(0,o)},500)}else if("long"==t){o=2e3;setTimeout(function(){Popout.animateProgressBar(0,o)},500)}else $(".wdgt-tmr").remove();localStorage.removeItem("Popout")}},showPopout2:function(){var e=getStorageData("local","Popout");if(e){var t=(e=JSON.parse(e)).PopoutHide,r=e.position;r="bottom"==r?"wdgt-flt-btm":"wdgt-flt",console.log(e.utm_source);var s=['<div id="msp-container" class="plgn-popup Popout-show-animate js-wdgt-flt '+r+'"> ','<div class="plgn-popup__innr-wrppr clearfix">','<div class="plgn-popup__cls"><span class="js-Popout-close"></span></div>','<a href="'+e.buttonUrl+'" data-utmsource="'+e.utm_source+'"class="clearfix plgn-popup-link js-wdgt-flt__bttn" title="Click to earn more on every purchase" style="text-decoration:none">','<div class="plgn-popup__bst-prc">','<div class="plgn-popup__prc-ttl">'+e.title+"</div>",'<div class="plgn-popup__prc-desc">'+e.subTitle+"</div>",'<div class="plgn-popup__prc-val"></div>',"</div>",'<div class="plgn-popup__send-to-store">',"<span>"+e.buttonText+"</span>",'<span class="msp_send_to_store_right_arrow"></span>',"</div>",'<div class="privacy-policy" style="position: absolute;right: 20px;bottom: 20px;">','<a href="/privacy.html" target="_blank" style="color: #fff;">Privacy Policy</a>',"</div>","</a> "];s.push("</div> </div> "),$("body").append(s.join("")),$(document).on("click",".js-wdgt-flt__bttn",function(){Cookie.setCookie("pluginInstallSource","Installed by popout",20)});if("short"==t){var o=1e3;setTimeout(function(){Popout.animateProgressBar(0,o)},500)}else if("long"==t){o=2e3;setTimeout(function(){Popout.animateProgressBar(0,o)},500)}else $(".wdgt-tmr").remove();localStorage.removeItem("Popout")}},showQnAPopOut:function(){var e={position:"top",title:"Have a Question about this Product?",subTitle:"Get answers from verified buyers",url:"qna",label:"ASK QUESTION"};$(".qna").data("ttl-qstn")>=3&&(e.label=$(".qna").data("ttl-qstn")+" Answered Questions");var t=['<div id="msp-container" class="plgn-popup Popout-show-animate js-wdgt-flt '+("bottom"==e.position?"wdgt-flt-btm":"wdgt-flt")+'"> <div style="cursor:pointer" data-href="'+e.url+'" class="plgn-popup__innr-wrppr js-inpg-link js-qpop-clck clearfix"> <div class="plgn-popup__cls js-qpop-cls"> <span class="js-Popout-close"></span> </div> <a class="clearfix plgn-popup-link" style="text-decoration:none"> <div class="plgn-popup__bst-prc"> <div class="plgn-popup__prc-ttl">'+e.title+'</div> <div class="plgn-popup__prc-desc">'+e.subTitle+'</div> <div class="plgn-popup__prc-val"></div> </div> <div class="plgn-popup__send-to-store"> <span>'+e.label+'</span> <span class="msp_send_to_store_right_arrow"></span> </div> </a> '];$("body").append(t.join("")),ga("send","event","QNA","pop-show","",{nonInteraction:!0})}};function qPopCloseHandler(e){var t=localStorage.QNAPop?JSON.parse(localStorage.QNAPop):{};t[dataLayer[0].mspid]={lastClosed:new Date},localStorage.QNAPop=JSON.stringify(t),e.stopPropagation()}function qPopClickHandler(){ga("send","event","QNA","pop-click","",{nonInteraction:!0}),Popout.closePopout()}function widgetFilterButtonHandler(e){getStorageData("local","Popout");var t=$(this).data("utmsource");Cookie.setCookieMins("signup-utm",t,2),window.ga&&ga("send","event","Loyalty",t+"clicked",Modules.Cookie.get("msp_uid")+""),Popout.closePopout()}function popoutCloseHandler(e){window.ga&&ga("send","event","Loyalty","Popout closed clicked",Modules.Cookie.get("msp_uid")+""),Popout.closePopout(),e.preventDefault()}Modules.$doc.on("click",".js-qpop-cls",qPopCloseHandler),Modules.$doc.on("click",".js-qpop-clck",qPopClickHandler),Modules.$doc.on("click",".js-wdgt-flt__bttn",widgetFilterButtonHandler),Modules.$doc.on("click",".js-Popout-close",popoutCloseHandler);var _gPopStoreUrl=null,popupDataObj={},autoPopupTimeout=1e4,pageLeaveTimeout=4e3,popupCallbackQueue=[];function closePopup(){for($(".popup-overlay").addClass("not-vsbl"),$(".popup-container").addClass("not-vsbl"),$(".popup-closebutton").addClass("not-vsbl"),setTimeout(function(){$(".popup-overlay").remove(),$(".popup-container").remove(),$(".popup-closebutton").remove()},400);popupQueue.length>0;)popupQueue.shift()()}function closePopup_RUI(){for($(".pop-up__ovrly").addClass("not-opq"),$(".pop-up__cntnr").addClass("not-opq"),setTimeout(function(){$(".pop-up__ovrly").remove(),$(".pop-up__cntnr").remove()},300);popupQueue.length>0;)popupQueue.shift()()}function popupQueueFn(e,t,r){return function(){e.apply(t,r)}}function openAutoPopup(e){if(!$(".popup-overlay").length){var t=$("[data-autopopup]");if(t.length){var r=t.data("autopopup");if(r){if(t.data("autopopup-login")&&(Modules.Cookie.get("msp_login_email")||Modules.Cookie.get("msp_login")))return;openPopup(r+(e?(r.indexOf("?")>-1?"&":"?")+"pl=1":""),"PromoA")}}}}function handlePopupTargetClick(){if(0!=$(this).parent(".exprt-rvw__glry-thmbnl").length)return!1;var e,t=$(this),r=t.attr("href"),s=t.data("promo");if(popupDataObj={type:t.data("popup-type")},t.hasClass("js-wdgt-gts")){window.ga&&ga("send","event","Loyalty","click","lylty-deals-wdgt-cta","1");var o=$(this).data("url");if(window.open(o,"_blank"),Modules.Cookie.get("msp_login"))return!0;Modules.Cookie.setCookieMins("signup-utm",$(this).data("utmsource")||"",2)}if(t.is(".prdct-dtl__tlbr-prc-alrt")&&handleStorePriceAlert(t))return!1;if(t.hasClass("js-prc-tbl__gts-btn")){var a=t.data("cookiename");if(e=t.data("url"),Modules.Cookie.get(a))return window.open(e),!0;if((Modules.Cookie.get("msp_login")||Modules.Cookie.get("partial_login"))&&(t.hasClass("js-check-email-cookie")||t.hasClass("check-email-cookie")))return window.open(e),!0;if(a){var n=parseInt(t.data("cookietimemins"),10),i=parseInt(t.data("cookietimedays"),10);isNaN(n)?isNaN(i)||Modules.Cookie.set(a,"true",i+"d"):Modules.Cookie.set(a,"true",n)}Modules.Cookie.set("autoPopup","1","1d")}return r&&"#"!=r&&!t.hasClass("storebutton")||(r=t.data("href")),_gPopStoreUrl=e,r&&"#"!==r&&openPopup(r,s),!1}function chromePluginPopupTarget(){var e=$(this),t=e.data("cookiename"),r=e.data("href"),s=e.data("promo");if(Modules.Cookie.set("autoPopup","1","1d"),"true"===Modules.Cookie.get(t))return window.open(e.data("url")),!1;if(t){var o=parseInt(e.data("cookietimemins"),10),a=parseInt(e.data("cookietimedays"),10);isNaN(o)?isNaN(a)||Modules.Cookie.set(t,"true",a+"d"):Modules.Cookie.set(t,"true",o)}return _gPopStoreUrl=e.data("url"),openPopup(r,s),!1}function loyaltyPopupTarget(){var e=$(this),t=Modules.Cookie.get("msp_login"),r=Modules.Cookie.get("hideLoyaltyOnBoarded");if(cookieName=e.data("cookiename"),popupUrl=e.data("href"),isMandatory=!1,Modules.Cookie.set("autoPopup","1",30),window.dataLayer&&"appliance"===dataLayer[0].category&&Modules.Cookie.get("msp_uid")%2==0)isMandatory=!0;else if("true"===Modules.Cookie.get(cookieName))return window.open(e.data("url")),!0;if(cookieName){var s=parseInt(e.data("cookietimemins"),10),o=parseInt(e.data("cookietimedays"),10);isNaN(s)?isNaN(o)||Modules.Cookie.set(cookieName,"true",o+"d"):Modules.Cookie.set(cookieName,"true",s)}if(isMandatory&&(t||Modules.Cookie.get("partial_login")))return window.open(e.data("url")),!0;if(t){if(r)return window.open(e.data("url")),!0;_gPopStoreUrl=e.data("url"),openPopup(popupUrl,"PromoB")}else _gPopStoreUrl=e.data("url"),openPopup(popupUrl,"PromoB");return!1}function handlePopupOverlayClick(){$link=$(".popup-closebutton > a"),$link[0]&&$(this).hasClass("noclose")?($link[0]&&window.open($link.attr("href"),"_blank"),closePopup()):$(this).hasClass("noclose")||closePopup()}function handlePopupOverlayClickRUI(){$link=$(".pop-up__cls-btn > a"),$link[0]&&$(this).hasClass("noclose")?($link[0]&&window.open($link.attr("href"),"_blank"),closePopup_RUI()):$(this).hasClass("noclose")||closePopup_RUI()}function getAjaxDataSync(e){var t;return $.ajax({url:e,async:!1}).done(function(e){t=e}),t}function getBrowsePopupData(){return getAjaxDataSync("/browse-menu.htm")}function getPopupData(e){return getAjaxDataSync(e)}function isPromoPopupShown(e){return!("undefined"==typeof disablePromoPopup||!disablePromoPopup)||(!!(Modules.Cookie.get("promo_a_shown")&&"PromoA"===e||Modules.Cookie.get("promo_b_shown")&&"PromoB"===e)||("PromoA"==e?Modules.Cookie.set("promo_a_shown",1,"1d"):"PromoB"==e&&(Modules.Cookie.set("promo_a_shown",1,"1d"),Modules.Cookie.set("promo_b_shown",1,"1d")),!1))}function popupCallback(e,t,r){return function(){e.apply(t,r)}}function openPopup(e,t){if(storeUrl=_gPopStoreUrl||null,_gPopStoreUrl=null,t&&("PromoA"===t||"PromoB"===t)&&isPromoPopupShown(t))return storeUrl&&window.open(storeUrl,"_blank"),void(popupCallbackQueue=[]);if(!Modules.Cookie.get("test_no_popup")){for(var r=getPopupData(e),s=r.indexOf("pop-up__cntnr")>0;popupCallbackQueue.length>0;)popupCallbackQueue.shift()();if(s){$(".pop-up__ovrly, .pop-up__cntnr").remove(),storeUrl?$("body").append(['<div class="pop-up__ovrly js-pop-up__ovrly not-opq noclose"></div>','<div class="pop-up__cntnr not-opq"></div>'].join("")):$("body").append(['<div class="pop-up__ovrly js-pop-up__ovrly not-opq"></div>','<div class="pop-up__cntnr not-opq"></div>'].join(""));var o=$(r);o.filter(".pop-up__cntnr").add(o.find(".pop-up__cntnr")).each(function(){$(this).addClass("not-opq")}),$(".pop-up__cntnr").replaceWith(o),storeUrl&&($(".pop-up__cntnr .pop-up__cls-btn").replaceWith('<div class="pop-up__cls-btn js-pop-up__cls-btn"><a href="'+storeUrl+'" target="_blank">&#10005;</a></div>'),$(".pop-up__cntnr a.usr-inputbox__input--lnk").attr({href:storeUrl,target:"_blank"})),setTimeout(function(){$(".pop-up__ovrly, .pop-up__cntnr").removeClass("not-opq")},200)}else $(".popup-overlay, .popup-container, .popup-closebutton").remove(),storeUrl?$("body").append(['<div class="popup-overlay not-vsbl noclose"></div>','<div class="popup-container not-vsbl">','<div class="popup-closebutton not-vsbl">','<a href="'+storeUrl+'" target="_blank">&#10005;</a>',"</div>","</div>"].join("")):$("body").append(['<div class="popup-overlay not-vsbl"></div>','<div class="popup-container not-vsbl">','<div class="popup-closebutton not-vsbl">&#10005;</div>',"</div>"].join("")),setTimeout(function(){$(".popup-overlay, .popup-container").removeClass("not-vsbl")},300),setTimeout(function(){$(".popup-closebutton").removeClass("not-vsbl")},900),$(".popup-container").append(r).css("width",$(".popup-inner-content").outerWidth()),storeUrl&&$(".popup-container .popup-skip a, .popup-container a.popup-submit").attr("href",storeUrl)}}function openAutoPopupURL(e){if(!Modules.Cookie.get("msp_login_email")&&!Modules.Cookie.get("msp_login")){openPopup(e,"PromoA");var t=Modules.Cookie.get("msp_uid"),r=Modules.Cookie.get("msp_vid"),s=Modules.Cookie.get("num_pages"),o=Modules.Cookie.get("visit_num_pages"),a=Modules.Cookie.get("gts_count"),n=Modules.Cookie.get("transaction_count"),i=$(".auto-popup-data").data("popup_id"),l=$(".auto-popup-data").data("experimentid"),d=encodeURIComponent($(".popup-email").val());$.post("/users/popup_capture_user_details.php",{experiment_id:l,msp_uid:t,msp_vid:r,overall_visits:s,session_visits:o,gts_count:a,transaction_count:n,popup_id:i,emailValue:d},function(e,t){})}}function getAutopopupURL(e){if(1!=Modules.Cookie.get("msp_login")&&!(e.length<=0))return $popupData=e.data("popuprule"),!0===$popupData["first-visit"]&&Modules.Cookie.get("msp_uid")==Modules.Cookie.get("msp_vid")?(e.data("popup_id",$popupData["first-visit-id"]),void openAutoPopupURL($popupData["first-visit-url"])):!0===$popupData["repeat-visit"]&&Modules.Cookie.get("msp_uid")!=Modules.Cookie.get("msp_vid")?(e.data("popup_id",$popupData["repeat-visit-id"]),void openAutoPopupURL($popupData["repeat-visit-url"])):!0===$popupData["pages-visited"]&&Modules.Cookie.get("visit_num_pages")>=$popupData["pages-visited-count"]?(e.data("popup_id",$popupData["pages-visited-id"]),void openAutoPopupURL($popupData["pages-visited-url"])):!0===$popupData["time-spend"]&&parseInt(Modules.Cookie.get("active_time"))>=parseInt($popupData["time-spend-count"])?(e.data("popup_id",$popupData["time-spend-id"]),void openAutoPopupURL($popupData["time-spend-url"])):(!0===$popupData.scroll&&(-1===window.location.href.indexOf("msp")&&-1===window.location.href.indexOf("msf")||Modules.$doc.on("scroll",function(t){Modules.$doc.scrollTop()>=Modules.$win.height()&&(e.data("popup_id",$popupData["scroll-id"]),openAutoPopupURL($popupData["scroll-url"]))})),!0===$popupData["gts-made"]&&Modules.Cookie.get("gts_count")>=$popupData["gts-made-count"]?(e.data("popup_id",$popupData["gts-made-id"]),void openAutoPopupURL($popupData["gts-made-url"])):!0===$popupData.transaction&&Modules.Cookie.get("transaction_count")>=$popupData["time-spend-count"]?(e.data("popup_id",$popupData["transaction-id"]),void openAutoPopupURL($popupData["transaction-url"])):void 0)}function pageLeavePopupBind(){$("body").on("mouseleave",function(e){e.pageY<5&&openAutoPopup(!0)})}function openPageLeaveGTSPopup(){if(0!==window.location.pathname.indexOf("/refurbished/")&&$(".prdct-dtl, .fltr-wrpr1").length){url.getAQueryParam&&-1===["pa-transact","ps-transact","browsing_pa_emailer","browsing_ps_emailer"].indexOf(url.getAQueryParam("utm_source"))&&setTimeout(function(){$("body").on("mouseleave",function(e){e.pageY<5&&!Modules.Cookie.get("msp_login")&&!$(".pop-up__ovrly, .popup-overlay").length&&openPopup("https://www.mysmartprice.com/loyalty/popup/gts.php?type=pageleave","PromoB")})},5e3)}}function closeRefreshPopup(){location.reload()}function openRefreshPagePopup(){var e='<div onClick="closeRefreshPopup()" style="position: fixed; top: 0px; z-index: 1000; cursor: pointer; left: 0px; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.7);">        <div style="position: relative; width: 100%; height: 100%;">            <div style="position: absolute; padding: 10px; border-radius: 3px; top: 0px; left: 0px; right: 0px; bottom: 0px; height: 100px; width: 300px; margin: auto; background-color: white; cursor: auto;">            <span style="position: absolute; top: -15px; right: -15px; cursor: pointer; color: #eee;">&#10006;</span><p style="font-size: 16px;">Please refresh the page after adding extension.</p>            <center><a class="bttn bttn--blue" style="margin-top: 12px;" href="'+window.location.href+'">Refresh the Page</a></center>            </div>        </div>    </div>';document.body.innerHTML+=e}function setPopUpCookie(){setTimeout(function(){Modules.Cookie.get("autoPopup")||(openPopup($("[data-autopopup]").data("autopopup")),Modules.Cookie.set("autoPopup","1","1d"))},5e3)}function handleMouseEnter(){$(".tltp").remove();var e=$(this),t=e.data("tooltip"),r=e.data("tooltip-direction")||"tltp--top-left";""!==t&&void 0!==t&&($("body").append('<div class="tltp '+r+'">'+t+"</div>"),$tooltip=$(".tltp"),$(this).data("tooltip").length>50&&$tooltip.css({"font-size":"11px","line-height":"1.5"}),"tltp--top-rght"===r?($tooltip.css("left",e.offset().left-$tooltip.outerWidth()+$(this).outerWidth()+4),$tooltip.css("top",e.offset().top-$tooltip.outerHeight()-10),$tooltip.offset().top-Modules.$win.scrollTop()<0&&($tooltip.removeClass(r).addClass("tltp--btm-rght"),$tooltip.css("top",e.outerHeight()+e.offset().top+10))):"tltp--top-left"===r?($tooltip.css("left",e.offset().left-4),$tooltip.css("top",e.offset().top-$tooltip.outerHeight()-10),$tooltip.offset().top-Modules.$win.scrollTop()<0&&($tooltip.removeClass(r).addClass("tltp--btm-left"),$tooltip.css("top",e.outerHeight()+e.offset().top+10))):"tltp--btm-rght"===r?($tooltip.css("left",e.offset().left-$tooltip.outerWidth()+$(this).outerWidth()+4),$tooltip.css("top",e.offset().top+e.outerHeight()+10),Modules.$win.scrollTop()+Modules.$win.height()-$tooltip.offset().top<0&&($tooltip.removeClass(r).addClass("tltp--btm-rght"),$tooltip.css("top",e.offset().top-$tooltip.outerHeight()-10))):"tltp--btm-left"===r?($tooltip.css("left",e.offset().left-4),$tooltip.css("top",e.offset().top+e.outerHeight()+10),Modules.$win.scrollTop()+Modules.$win.height()-$tooltip.offset().top<0&&($tooltip.removeClass(r).addClass("tltp--btm-left"),$tooltip.css("top",e.offset().top-$tooltip.outerHeight()-10))):"tltp--left"===r&&($tooltip.css("left",e.offset().left-$tooltip.width()-30),$tooltip.css("top",e.offset().top+e.outerHeight()/2-10)))}function removeTooltip(){$(".tltp").remove()}function showMessageBox(e){if($(e.target).hasClass("js-msg-box__cls"))return!1;$(".msg-box").removeClass("msg-box--show"),$(this).find(".msg-box").addClass("msg-box--show")}function hideMessageBox(){return $(this).closest(".msg-box").removeClass("msg-box--show"),!1}Modules.$doc.on("click",".popup-target, .js-popup-trgt",handlePopupTargetClick),Modules.$doc.on("click",".chrmcshbck-popup-target, .js-chrmcshbck-popup-trgt",chromePluginPopupTarget),Modules.$doc.on("click",".loyalty-popup-target, .js-lylty-popup-trgt",loyaltyPopupTarget),Modules.$doc.on("click",".popup-closebutton",function(){closePopup()}),Modules.$doc.on("click",".popup-overlay",handlePopupOverlayClick),Modules.$doc.on("click",".pop-up__cls-btn, .popup-optn__link.usr-inputbox__input--lnk",function(){closePopup_RUI()}),Modules.$doc.on("click",".pop-up__ovrly",handlePopupOverlayClickRUI),setTimeout(function(){openAutoPopup()},autoPopupTimeout),setTimeout(function(){pageLeavePopupBind()},pageLeaveTimeout),getAutopopupURL($(".auto-popup-data")),-1!==location.href.indexOf("/deals/promotions")||Modules.Cookie.get("plugin_id")||openPageLeaveGTSPopup(),setPopUpCookie(),Modules.$doc.on("mouseenter",".js-tltp",handleMouseEnter),Modules.$doc.on("mouseleave",".js-tltp",removeTooltip),Modules.$doc.on("click",".js-msg-box-trgt",showMessageBox),Modules.$doc.on("click",".js-msg-box__cls",hideMessageBox);;

});
